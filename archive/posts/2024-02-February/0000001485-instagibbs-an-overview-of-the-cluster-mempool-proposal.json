{
  "id": 1485,
  "name": "Gregory Sanders",
  "username": "instagibbs",
  "avatar_template": "/user_avatar/delvingbitcoin.org/instagibbs/{size}/28_2.png",
  "created_at": "2024-02-08T14:14:45.277Z",
  "cooked": "<p>Something like this might be general enough to be useful(Uncle eviction?):</p>\n<p>If proposed chunk is too large for cluster by (remaining_size, remaining_count):</p>\n<ol>\n<li>add all existing chunks to minheap by CFR</li>\n<li>While heap not empty, pop chunk:\nFor each transaction in chunk(in reverse topo order):<br>\nif in proposed chunks\u2019 ancestor set: skip<br>\nelse mark for eviction and reduce remaining_size by tx size and remaining_count by 1\nIf remaining_size &lt;= 0 and remaining_count &lt;= 0: break</li>\n<li>If anything was marked for eviction: Do diagram check (don\u2019t check remaining_*, maybe we split clusters accidentally?)</li>\n</ol>\n<p>You could also restrict the space of transactions to evict to something more \u201clocal\u201d\nlike the descendants of the proposed chunk\u2019s ancestors\u2019(not including the ancestor set itself).\nThis should allow eviction in every case still if the new chunk\u2019s fees are high enough, while acting a bit more \u201clocally\u201d.</p>\n<p>These should allow improvements to the mempool with O(nlogn) processing, and no resubmission of transactions? Doesn\u2019t solve incremental relay pins of course.</p>",
  "post_number": 14,
  "post_type": 1,
  "updated_at": "2024-02-08T14:15:36.144Z",
  "reply_count": 1,
  "reply_to_post_number": 13,
  "quote_count": 0,
  "incoming_link_count": 1,
  "reads": 10,
  "readers_count": 9,
  "score": 12.0,
  "yours": false,
  "topic_id": 393,
  "topic_slug": "an-overview-of-the-cluster-mempool-proposal",
  "topic_title": "An overview of the cluster mempool proposal",
  "topic_html_title": "An overview of the cluster mempool proposal",
  "category_id": 8,
  "display_username": "Gregory Sanders",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "reply_to_user": {
    "username": "instagibbs",
    "name": "Gregory Sanders",
    "avatar_template": "/user_avatar/delvingbitcoin.org/instagibbs/{size}/28_2.png"
  },
  "bookmarked": false,
  "raw": "Something like this might be general enough to be useful(Uncle eviction?):\n\nIf proposed chunk is too large for cluster by (remaining_size, remaining_count):\n1) add all existing chunks to minheap by CFR\n2) While heap not empty, pop chunk:\n   For each transaction in chunk(in reverse topo order):  \n   if in proposed chunks' ancestor set: skip  \n   else mark for eviction and reduce remaining_size by tx size and remaining_count by 1\n   If remaining_size <= 0 and remaining_count <= 0: break\n3) If anything was marked for eviction: Do diagram check (don't check remaining_*, maybe we split clusters accidentally?)\n   \n   \nYou could also restrict the space of transactions to evict to something more \"local\"\nlike the descendants of the proposed chunk's ancestors'(not including the ancestor set itself).\nThis should allow eviction in every case still if the new chunk's fees are high enough, while acting a bit more \"locally\".\n\nThese should allow improvements to the mempool with O(nlogn) processing, and no resubmission of transactions? Doesn't solve incremental relay pins of course.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 31,
  "hidden": false,
  "trust_level": 3,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
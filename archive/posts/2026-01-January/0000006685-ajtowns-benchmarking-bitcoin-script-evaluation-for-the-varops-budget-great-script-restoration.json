{
  "id": 6685,
  "name": "Anthony Towns",
  "username": "ajtowns",
  "avatar_template": "/user_avatar/delvingbitcoin.org/ajtowns/{size}/417_2.png",
  "created_at": "2026-01-26T05:31:22.674Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"rustyrussell\" data-post=\"15\" data-topic=\"2094\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/rustyrussell/48/154_2.png\" class=\"avatar\"> rustyrussell:</div>\n<blockquote>\n<p>Timings are done the largest possible objects (eg. 2MB objects for OP_ADD,</p>\n</blockquote>\n</aside>\n<aside class=\"quote no-group\" data-username=\"rustyrussell\" data-post=\"15\" data-topic=\"2094\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/rustyrussell/48/154_2.png\" class=\"avatar\"> rustyrussell:</div>\n<blockquote>\n<p>The implementation is fairly optimal (treating things as 64-bit numbers, in particular),</p>\n</blockquote>\n</aside>\n<p>Argh, for some reason I had in my head that GSR was targeting 64-bit maths (like elements), not bignum maths. (Calling it \u201cval64\u201d wasn\u2019t super helpful there\u2026)</p>\n<aside class=\"quote no-group\" data-username=\"rustyrussell\" data-post=\"15\" data-topic=\"2094\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/rustyrussell/48/154_2.png\" class=\"avatar\"> rustyrussell:</div>\n<blockquote>\n<p>1.9 seconds on my laptop (i7-1280P, 2023)</p>\n</blockquote>\n</aside>\n<p>That seems too slow to me, fwiw (in an ideal world, anyway); taking the 13k vs 80k ratio would bring that down to ~300ms which seems more appropriate for ~current generation, high-end, consumer hardware. I think you\u2019d want to get 1s-2s even from a cheap VPS or a refurbished celeron/i3/i5 minipc \u2013 ie the sort of thing a random datum/stratumv2 miner might decide to use for block construction.</p>\n<p>That presumably also means an single standard tx could take 190ms to verify (assuming the 400k weight standardness vs 4M weight consensus ratio dominates), which also feels high, and potentially usable as DoS vector to delay block propagation (by crafting invalid txs that take roughly as long to (in)validate as the worst case valid, standard tx takes to validate; though validating blocks/txs in parallel, or having a way for blocks to bypass the tx validation queue would mostly mitigate that).</p>\n<aside class=\"quote no-group\" data-username=\"rustyrussell\" data-post=\"15\" data-topic=\"2094\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/rustyrussell/48/154_2.png\" class=\"avatar\"> rustyrussell:</div>\n<blockquote>\n<p>I tried to benchmark 0.13.1, to measure the original implementation</p>\n</blockquote>\n</aside>\n<p>I guess making a regtest chain with a block with max sig checks, and feeding it into the <a href=\"https://bitcoincore.org/bin/bitcoin-core-0.13.1/\">release binary</a> might work without requiring dev environment archeology. I guess a deboostrap\u2019ed chroot for xenial ought to allow building it though?</p>",
  "post_number": 16,
  "post_type": 1,
  "posts_count": 16,
  "updated_at": "2026-01-26T05:31:22.674Z",
  "reply_count": 0,
  "reply_to_post_number": 15,
  "quote_count": 1,
  "incoming_link_count": 0,
  "reads": 1,
  "readers_count": 0,
  "score": 0.2,
  "yours": false,
  "topic_id": 2094,
  "topic_slug": "benchmarking-bitcoin-script-evaluation-for-the-varops-budget-great-script-restoration",
  "topic_title": "Benchmarking Bitcoin Script Evaluation for the Varops Budget (Great Script Restoration)",
  "topic_html_title": "Benchmarking Bitcoin Script Evaluation for the Varops Budget (Great Script Restoration)",
  "category_id": 7,
  "display_username": "Anthony Towns",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"rustyrussell, post:15, topic:2094\"]\nTimings are done the largest possible objects (eg. 2MB objects for OP_ADD,\n[/quote]\n\n[quote=\"rustyrussell, post:15, topic:2094\"]\nThe implementation is fairly optimal (treating things as 64-bit numbers, in particular),\n[/quote]\n\nArgh, for some reason I had in my head that GSR was targeting 64-bit maths (like elements), not bignum maths. (Calling it \"val64\" wasn't super helpful there...)\n\n[quote=\"rustyrussell, post:15, topic:2094\"]\n1.9 seconds on my laptop (i7-1280P, 2023)\n[/quote]\n\nThat seems too slow to me, fwiw (in an ideal world, anyway); taking the 13k vs 80k ratio would bring that down to ~300ms which seems more appropriate for ~current generation, high-end, consumer hardware. I think you'd want to get 1s-2s even from a cheap VPS or a refurbished celeron/i3/i5 minipc -- ie the sort of thing a random datum/stratumv2 miner might decide to use for block construction.\n\nThat presumably also means an single standard tx could take 190ms to verify (assuming the 400k weight standardness vs 4M weight consensus ratio dominates), which also feels high, and potentially usable as DoS vector to delay block propagation (by crafting invalid txs that take roughly as long to (in)validate as the worst case valid, standard tx takes to validate; though validating blocks/txs in parallel, or having a way for blocks to bypass the tx validation queue would mostly mitigate that).\n\n[quote=\"rustyrussell, post:15, topic:2094\"]\nI tried to benchmark 0.13.1, to measure the original implementation\n[/quote]\n\nI guess making a regtest chain with a block with max sig checks, and feeding it into the [release binary](https://bitcoincore.org/bin/bitcoin-core-0.13.1/) might work without requiring dev environment archeology. I guess a deboostrap'ed chroot for xenial ought to allow building it though?",
  "actions_summary": [],
  "moderator": true,
  "admin": true,
  "staff": true,
  "user_id": 3,
  "hidden": false,
  "trust_level": 4,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "Argh, for some reason I had in my head that GSR was targeting 64-bit maths (like elements), not bignum maths. (Calling it \u201cval64\u201d wasn\u2019t super helpful there\u2026) \n\nThat seems too slow to me, fwiw (in an ideal world, anyway); taking the 13k vs 80k ratio would bring that down to ~300ms which seems more&hellip;",
  "truncated": true,
  "post_url": "/t/benchmarking-bitcoin-script-evaluation-for-the-varops-budget-great-script-restoration/2094/16",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
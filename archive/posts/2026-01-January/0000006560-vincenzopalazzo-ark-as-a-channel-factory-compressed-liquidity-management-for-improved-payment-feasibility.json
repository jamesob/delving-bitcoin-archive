{
  "id": 6560,
  "name": "",
  "username": "vincenzopalazzo",
  "avatar_template": "/user_avatar/delvingbitcoin.org/vincenzopalazzo/{size}/11_2.png",
  "created_at": "2026-01-04T13:07:54.748Z",
  "cooked": "<p>Thanks for this write-up! I was interested in ark when the protocol was proposed and started to be implemented to understand the interaction between lightning and how it is possible to use it to solve lightning problems.</p>\n<p>I like to define ark as a technique, and not as a layer, just because it fits very well in many use cases, and we may not need to classify ark in a category, but just use the underlying technique to fix some problems that we are having and in this case with lightning scalability.</p>\n<hr>\n<p>So I will add my considerations that I had when I presented a PoC of an ark channel factory in Prague last year with an LDK full node implementation (See the draft PR in <a href=\"https://github.com/vincenzopalazzo/lampo.rs/pull/452\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Macros/custom txs by vincenzopalazzo \u00b7 Pull Request #452 \u00b7 vincenzopalazzo/lampo.rs \u00b7 GitHub</a>)</p>\n<p>I will try to add the design decisions that I was thinking about while implementing it regarding some of your points.</p>\n<p>&gt;Interoperability and routing abstractions</p>\n<p>My idea on how to use the ark channel factory on today\u2019s model is more like implementing a phoenix model LSP, where the mobile is having a channel with one of the LSPs. Here there is an assumption that the LSP for the lightning node is also an Ark operator, but in the big picture, I think this assumption can be removed.</p>\n<p>At the implementation level, if today you want to implement this, it is already possible because mobile + LSP are already 0 conf channels, so you can just assume this is a confirmed channel for the ark channel.</p>\n<p>Then, due to the ark has a liveness \u201cissue\u201d that requires the mobile wallet to be online at some point to refresh the vtxo, you can use this time to \u201crefresh\u201d the channel by basically closing and opening a new channel or splicing (depending on how complicated you want to make the mobile wallet + LSP relationship).</p>\n<h2><a name=\"p-6560-consideration-at-the-lightning-script-level-1\" class=\"anchor\" href=\"#p-6560-consideration-at-the-lightning-script-level-1\"></a>Consideration at the lightning script level.</h2>\n<p>At the script level as of today, we can already implement it somehow by just having some extra path for every script (I need to double check this with the unilateral exit) and here is an unreviewed funding transaction <a href=\"https://github.com/vincenzopalazzo/lampo.rs/blob/63027fea90e7292d32a4e5c9465848b06339aa38/lampo-ark-wallet/src/lib.rs#L173\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">lampo.rs/lampo-ark-wallet/src/lib.rs at 63027fea90e7292d32a4e5c9465848b06339aa38 \u00b7 vincenzopalazzo/lampo.rs \u00b7 GitHub</a> example</p>\n<p>The general idea is that for every lightning script you will have two cases:</p>\n<ul>\n<li><code>&lt;lightning script&gt; + ASP signature</code></li>\n<li><code>&lt;lightning script&gt; + timeout for the ark unilateral exit</code></li>\n</ul>\n<hr>\n<p>I also considered the case where a public channel that impacts the public network will be based on an Ark channel factory, and with my current understanding of the Ark protocol, I think it will create overcomplicated stuff at the gossip level &amp; interconnection between lightning nodes that have channels with different ASPs, but I can be wrong. It has been a while since I thought about this problem, so I probably need too refresh my mind on this last consideration.</p>",
  "post_number": 4,
  "post_type": 1,
  "posts_count": 8,
  "updated_at": "2026-01-04T13:07:54.748Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 0,
  "incoming_link_count": 2,
  "reads": 25,
  "readers_count": 24,
  "score": 45.0,
  "yours": false,
  "topic_id": 2179,
  "topic_slug": "ark-as-a-channel-factory-compressed-liquidity-management-for-improved-payment-feasibility",
  "topic_title": "Ark as a Channel Factory: Compressed Liquidity Management for Improved Payment Feasibility",
  "topic_html_title": "Ark as a Channel Factory: Compressed Liquidity Management for Improved Payment Feasibility",
  "category_id": 7,
  "display_username": "",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "Thanks for this write-up! I was interested in ark when the protocol was proposed and started to be implemented to understand the interaction between lightning and how it is possible to use it to solve lightning problems.\n\nI like to define ark as a technique, and not as a layer, just because it fits very well in many use cases, and we may not need to classify ark in a category, but just use the underlying technique to fix some problems that we are having and in this case with lightning scalability.\n\n---\n\nSo I will add my considerations that I had when I presented a PoC of an ark channel factory in Prague last year with an LDK full node implementation (See the draft PR in https://github.com/vincenzopalazzo/lampo.rs/pull/452)\n\nI will try to add the design decisions that I was thinking about while implementing it regarding some of your points.\n\n\\>Interoperability and routing abstractions\n\nMy idea on how to use the ark channel factory on today\u2019s model is more like implementing a phoenix model LSP, where the mobile is having a channel with one of the LSPs. Here there is an assumption that the LSP for the lightning node is also an Ark operator, but in the big picture, I think this assumption can be removed.\n\nAt the implementation level, if today you want to implement this, it is already possible because mobile + LSP are already 0 conf channels, so you can just assume this is a confirmed channel for the ark channel.\n\nThen, due to the ark has a liveness \u201cissue\u201d that requires the mobile wallet to be online at some point to refresh the vtxo, you can use this time to \u201crefresh\u201d the channel by basically closing and opening a new channel or splicing (depending on how complicated you want to make the mobile wallet + LSP relationship).\n\n## Consideration at the lightning script level.\n\nAt the script level as of today, we can already implement it somehow by just having some extra path for every script (I need to double check this with the unilateral exit) and here is an unreviewed funding transaction https://github.com/vincenzopalazzo/lampo.rs/blob/63027fea90e7292d32a4e5c9465848b06339aa38/lampo-ark-wallet/src/lib.rs#L173 example\n\nThe general idea is that for every lightning script you will have two cases:\n\n* `<lightning script> + ASP signature`\n* `<lightning script> + timeout for the ark unilateral exit`\n\n---\n\nI also considered the case where a public channel that impacts the public network will be based on an Ark channel factory, and with my current understanding of the Ark protocol, I think it will create overcomplicated stuff at the gossip level & interconnection between lightning nodes that have channels with different ASPs, but I can be wrong. It has been a while since I thought about this problem, so I probably need too refresh my mind on this last consideration.",
  "actions_summary": [
    {
      "id": 2,
      "count": 2
    }
  ],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 13,
  "hidden": false,
  "trust_level": 2,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "Thanks for this write-up! I was interested in ark when the protocol was proposed and started to be implemented to understand the interaction between lightning and how it is possible to use it to solve lightning problems. \nI like to define ark as a technique, and not as a layer, just because it fits &hellip;",
  "truncated": true,
  "post_url": "/t/ark-as-a-channel-factory-compressed-liquidity-management-for-improved-payment-feasibility/2179/4",
  "reactions": [
    {
      "id": "heart",
      "type": "emoji",
      "count": 2
    }
  ],
  "current_user_reaction": null,
  "reaction_users_count": 2,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
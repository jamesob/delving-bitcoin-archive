{
  "id": 6629,
  "name": "Rene Pickhardt",
  "username": "renepickhardt",
  "avatar_template": "/user_avatar/delvingbitcoin.org/renepickhardt/{size}/7_2.png",
  "created_at": "2026-01-16T00:49:30.878Z",
  "cooked": "<p>Dear fellow lightning network developers</p>\n<p>I\u2019ve posted a <a href=\"https://arxiv.org/pdf/2601.04835\" rel=\"noopener nofollow ugc\">new paper on arXiv</a> that formalizes several long-standing observations about payment channel networks (in particular with the lightning network in mind) under a single geometric framework:</p>\n<p><a href=\"https://arxiv.org/pdf/2601.04835\" class=\"onebox\" target=\"_blank\" rel=\"noopener nofollow ugc\">https://arxiv.org/pdf/2601.04835</a></p>\n<p>Many of the individual phenomena discussed in the paper are familiar to practitioners:</p>\n<ul>\n<li>channel depletion,</li>\n<li>capital inefficiency of two-party channels,</li>\n<li>the benefits of channel factories,</li>\n<li>and the idea that <a href=\"https://delvingbitcoin.org/t/estimating-likelihood-for-lightning-payments-to-be-in-feasible/973\">feasibility rather than routing is the real bottleneck</a>.</li>\n</ul>\n<p>The goal of this work was not to rediscover these effects, but to explain why they are structurally true and how they are connected.\nA key outcome of the paper is the perspective that payments should be analyzed through the set of feasible wealth distributions rather than individual paths. Liquidity states differ only by circulations within fibers over a polytope. A payment is feasible if and only if the resulting wealth vector remains inside that polytope and offchain rebalancing does not change this (as was noted by others in 2018 on lightning-dev). This leads to:</p>\n<ul>\n<li>a simple throughput law <code>S=c/r</code> linking the supported off-chain payment bandwidth <code>S</code> to the rate <code>r</code> of infeasible payment attempts and onchain transaction bandwidth <code>c</code></li>\n<li>a cut-based characterization of feasibility,</li>\n<li>a formal explanation of why multi-party channels (coinpools / channel factories) are structurally more capital-efficient,</li>\n<li>and a geometric explanation of <a href=\"https://delvingbitcoin.org/t/channel-depletion-ln-topology-cycles-and-rational-behavior-of-nodes/1259\">why linear asymmetric fees generically lead to channel depletion</a>.</li>\n</ul>\n<p>These insights directly motivated the <a href=\"https://delvingbitcoin.org/t/ark-as-a-channel-factory-compressed-liquidity-management-for-improved-payment-feasibility/2179\">recent Delving Bitcoin article, which explores Ark as a channel factory</a> and its implications for payment feasibility:</p>\n<aside class=\"quote quote-modified\" data-post=\"1\" data-topic=\"2179\">\n  <div class=\"title\">\n    <div class=\"quote-controls\"></div>\n    <img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/renepickhardt/48/7_2.png\" class=\"avatar\">\n    <div class=\"quote-title__text-content\">\n      <a href=\"https://delvingbitcoin.org/t/ark-as-a-channel-factory-compressed-liquidity-management-for-improved-payment-feasibility/2179\">Ark as a Channel Factory: Compressed Liquidity Management for Improved Payment Feasibility</a> <a class=\"badge-category__wrapper \" href=\"/c/protocol-design/7\"><span data-category-id=\"7\" style=\"--category-badge-color: #0088CC; --category-badge-text-color: #FFFFFF;\" data-drop-close=\"true\" class=\"badge-category --style-square \" title=\"Bitcoin-related protocol proposals, or analysis or discussion thereof. For example, new P2P messages, new wallet techniques, methods for coinjoins or payment channels, etc.\"><span class=\"badge-category__name\">Protocol Design</span></span></a>\n    </div>\n  </div>\n  <blockquote>\n    Over the past months, I have discussed the ideas in this post in many bilateral conversations. To avoid repeating arguments inconsistently and to invite broader feedback, I am writing them down here. I apologize to readers already familiar with these concepts and welcome comments, objections, and open questions. \nNote: As I am not a native english speaker I used an LLM for copy editing; the technical content and arguments are my own. While I supervised the LLM I did not diverge from the typical \u2026\n  </blockquote>\n</aside>\n\n<p>The paper also analyzes <a href=\"https://delvingbitcoin.org/t/mitigating-channel-depletion-in-the-lightning-network-a-survey-of-potential-solutions/1640\">mitigation strategies for depletion</a> such as symmetric fees, <a href=\"https://github.com/renepickhardt/Lightning-Network-Limitations/blob/603a167af04c8d526e1c8d4b5c9e8db3d368dedd/Limits%20of%20two%20party%20channels/Effect%20of%20Convex%20Fee%20Functions%20on%20Flow%20Control%20and%20Channel%20Depletion.ipynb\" rel=\"noopener nofollow ugc\">convex/tiered fee schedules</a>, and <a href=\"https://delvingbitcoin.org/t/research-update-a-geometric-approach-for-optimal-channel-rebalancing/1768\">coordinated off-chain replenishment</a> while explaining why some of these are difficult to deploy under today\u2019s source-routing model.</p>\n<p>For readers interested in simulations and executable intuition, much of the reasoning <a href=\"https://github.com/renepickhardt/Lightning-Network-Limitations/blob/924bfaa3c730ce1f0998f2ec23e7bde3d0c6ea22/README.md\" rel=\"noopener nofollow ugc\">was developed alongside code and notebooks</a>, which are collected here:</p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/renepickhardt/Lightning-Network-Limitations/blob/main/README.md\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/renepickhardt/Lightning-Network-Limitations/blob/main/README.md\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com/renepickhardt/Lightning-Network-Limitations</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/renepickhardt/Lightning-Network-Limitations/blob/main/README.md\" target=\"_blank\" rel=\"noopener nofollow ugc\">README.md</a></h4>\n\n<div class=\"git-blob-info\">\n  <a href=\"https://github.com/renepickhardt/Lightning-Network-Limitations/blob/main/README.md\" rel=\"noopener nofollow ugc\"><code>main</code></a>\n</div>\n\n\n      <pre><code class=\"lang-md\"># Lightning-Network-Limitations\n\nThis repository is a collection of Notebooks and papers that investigate the technical limitations that exist in Bitcoin's Lightning Network Protocol with respect to its ability to scale payments. \nA lot of this is work in progress and many models depend on assumptions that can be justifiably questioned. \nThus I encourage you to be cautious in case you use these result to draw conclusions. \n\n## A Mathematical theory of payment channel networks\nThe main document that this respository contains is a research paper titled: [a mathematical theory of payment channel networks](https://github.com/renepickhardt/Lightning-Network-Limitations/blob/paper/Limits%20of%20two%20party%20channels/paper/a%20mathematical%20theory%20of%20payment%20channel%20networks.pdf). Its contributions are:\n\n* Providing a model and [Integer Linear Program](https://en.wikipedia.org/wiki/Integer_programming) for feasible wealth distributions of users on the lightning network given a channel graph.\n* A general formular that estimates the upper bound of payment bandwidth for LN payments (currently section 4.4. of the paper) This was also [discussed during the 2024 Lighting Network Developer summit](https://delvingbitcoin.org/t/ln-summit-2024-notes-summary-commentary/1198) \n* A method to estimate how likely it is that payments are infeasible. This was also [discussed on delving bitcoin](https://delvingbitcoin.org/t/estimating-likelihood-for-lightning-payments-to-be-in-feasible/973) and in the [bitcoin optech newsletter](https://bitcoinops.org/en/newsletters/2024/06/28/).\n* A proof that the number of circulations on the liquidity graph is equivalent to the number of equivalent states on the polytope of liquidity states given that two states are equivalent if they yield the same wealth distribution\n* The conclusions that two party channels put (potentially too) strong constraints to the ability of liquidity to flow between peers of the network.\n* **Not included in the paper yet but [available as a study](https://github.com/renepickhardt/Lightning-Network-Limitations/blob/main/Limits%20of%20two%20party%20channels/A%20Geometric%20Approach%20for%20Optimal%20Channel%20Replanishment.ipynb)**: A constructive result applying the method to optimal channel replanishment (aka circular offchain rebalancing).\n\n## Notebooks &amp; Studies\n* While circular offchain rebalancing does not change the feasibility of payments it may positively affect the reliability of feasibile payments. A [geometric method for optimal channel replanishment](https://github.com/renepickhardt/Lightning-Network-Limitations/blob/main/Limits%20of%20two%20party%20channels/A%20Geometric%20Approach%20for%20Optimal%20Channel%20Replanishment.ipynb) is available and [was discussed on delving bitcoin](https://delvingbitcoin.org/t/research-update-a-geometric-approach-for-optimal-channel-rebalancing/1768).\n* We investigate how [economic rational behaviour of nodes relates to the distribution of liquidity](https://github.com/renepickhardt/Lightning-Network-Limitations/blob/sidiropoulos_counter_example/Limits%20of%20two%20party%20channels/Estimating%20Liquidity%20State%20given%20Fees%20and%20Network%20Topologies.ipynb). This notebook in particular states that for any lightning network channel graph besides a spanning tree all channels are expected to be depleted. This goes hand and in hand with [prior research](https://github.com/gr-g/ln-steady-state-model/issues/1) (which operated under different assumptions) and seems to be a rather strong argument for the emergence of hub and spoke models (as one can understand the [results from other researchers](https://pubsonline.informs.org/doi/10.1287/mnsc.2023.03872))\n* A follow up studies if the [selfish sending behavior of nodes leads to the same global optimization problem](https://github.com/renepickhardt/Lightning-Network-Limitations/blob/sidiropoulos_counter_example/Limits%20of%20two%20party%20channels/Selfish%20Sending%20yields%20Almost%20solution%20to%20Global%20Fee%20Potential%20Optimization.ipynb). The provided evidence seems to give justification to study the above global optimization problem.\n</code></pre>\n\n\n\n  This file has been truncated. <a href=\"https://github.com/renepickhardt/Lightning-Network-Limitations/blob/main/README.md\" target=\"_blank\" rel=\"noopener nofollow ugc\">show original</a>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Feedback and Questions are very welcome, especially on how these results should influence protocol design and whether multi-party channels should primarily serve as channel factories or as long-lived payment venues.</p>\n<p>With kind regards Rene Pickhardt</p>",
  "post_number": 1,
  "post_type": 1,
  "posts_count": 1,
  "updated_at": "2026-01-16T00:54:38.694Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 0,
  "incoming_link_count": 1,
  "reads": 3,
  "readers_count": 2,
  "score": 5.6,
  "yours": false,
  "topic_id": 2204,
  "topic_slug": "a-mathematical-theory-of-payment-channel-networks",
  "topic_title": "A Mathematical Theory of Payment Channel Networks",
  "topic_html_title": "A Mathematical Theory of Payment Channel Networks",
  "category_id": 7,
  "display_username": "Rene Pickhardt",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 2,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "Dear fellow lightning network developers\n\nI\u2019ve posted a [new paper on arXiv](https://arxiv.org/pdf/2601.04835) that formalizes several long-standing observations about payment channel networks (in particular with the lightning network in mind) under a single geometric framework:\n\nhttps://arxiv.org/pdf/2601.04835\n\nMany of the individual phenomena discussed in the paper are familiar to practitioners: \n\n* channel depletion, \n* capital inefficiency of two-party channels, \n* the benefits of channel factories, \n* and the idea that [feasibility rather than routing is the real bottleneck](https://delvingbitcoin.org/t/estimating-likelihood-for-lightning-payments-to-be-in-feasible/973?u=renepickhardt). \n\nThe goal of this work was not to rediscover these effects, but to explain why they are structurally true and how they are connected.\nA key outcome of the paper is the perspective that payments should be analyzed through the set of feasible wealth distributions rather than individual paths. Liquidity states differ only by circulations within fibers over a polytope. A payment is feasible if and only if the resulting wealth vector remains inside that polytope and offchain rebalancing does not change this (as was noted by others in 2018 on lightning-dev). This leads to:\n\n* a simple throughput law `S=c/r` linking the supported off-chain payment bandwidth `S` to the rate `r` of infeasible payment attempts and onchain transaction bandwidth `c`\n* a cut-based characterization of feasibility,\n* a formal explanation of why multi-party channels (coinpools / channel factories) are structurally more capital-efficient,\n* and a geometric explanation of [why linear asymmetric fees generically lead to channel depletion](https://delvingbitcoin.org/t/channel-depletion-ln-topology-cycles-and-rational-behavior-of-nodes/1259).\n\nThese insights directly motivated the [recent Delving Bitcoin article, which explores Ark as a channel factory](https://delvingbitcoin.org/t/ark-as-a-channel-factory-compressed-liquidity-management-for-improved-payment-feasibility/2179) and its implications for payment feasibility:\n\nhttps://delvingbitcoin.org/t/ark-as-a-channel-factory-compressed-liquidity-management-for-improved-payment-feasibility/2179\n\nThe paper also analyzes [mitigation strategies for depletion](https://delvingbitcoin.org/t/mitigating-channel-depletion-in-the-lightning-network-a-survey-of-potential-solutions/1640?u=renepickhardt) such as symmetric fees, [convex/tiered fee schedules](https://github.com/renepickhardt/Lightning-Network-Limitations/blob/603a167af04c8d526e1c8d4b5c9e8db3d368dedd/Limits%20of%20two%20party%20channels/Effect%20of%20Convex%20Fee%20Functions%20on%20Flow%20Control%20and%20Channel%20Depletion.ipynb), and [coordinated off-chain replenishment](https://delvingbitcoin.org/t/research-update-a-geometric-approach-for-optimal-channel-rebalancing/1768) while explaining why some of these are difficult to deploy under today\u2019s source-routing model.\n\nFor readers interested in simulations and executable intuition, much of the reasoning [was developed alongside code and notebooks](https://github.com/renepickhardt/Lightning-Network-Limitations/blob/924bfaa3c730ce1f0998f2ec23e7bde3d0c6ea22/README.md), which are collected here:\n\nhttps://github.com/renepickhardt/Lightning-Network-Limitations/blob/main/README.md\n\nFeedback and Questions are very welcome, especially on how these results should influence protocol design and whether multi-party channels should primarily serve as channel factories or as long-lived payment venues.\n\nWith kind regards Rene Pickhardt",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 8,
  "hidden": false,
  "trust_level": 2,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": "Github link was replaced with a permanent link",
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "Dear fellow lightning network developers \nI\u2019ve posted a <a href=\"https://arxiv.org/pdf/2601.04835\" rel=\"noopener nofollow ugc\">new paper on arXiv</a> that formalizes several long-standing observations about payment channel networks (in particular with the lightning network in mind) under a single geometric framework: \n<a href=\"https://arxiv.org/pdf/2601.04835\" class=\"onebox\" target=\"_blank\" rel=\"noopener nofollow ugc\">https://arxiv.org/pdf/2601.04835</a> \nMany of the individua&hellip;",
  "truncated": true,
  "post_url": "/t/a-mathematical-theory-of-payment-channel-networks/2204/1",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null,
  "can_vote": false
}
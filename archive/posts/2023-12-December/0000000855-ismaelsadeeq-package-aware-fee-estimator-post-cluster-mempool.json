{
  "id": 855,
  "name": "Abubakar Sadiq Ismail",
  "username": "ismaelsadeeq",
  "avatar_template": "/user_avatar/delvingbitcoin.org/ismaelsadeeq/{size}/151_2.png",
  "created_at": "2023-12-23T11:01:55.472Z",
  "cooked": "<blockquote>\n<p>When suggesting the \u201cfee estimation should use chunk feerates\u201d, I had imagined it would just use our mempool\u2019s clusters/chunks to determine those values.</p>\n</blockquote>\n<p>Yes</p>\n<blockquote>\n<p>I guess you could track chunks + the individual transactions, and only use exact matches after you linearize the block?</p>\n</blockquote>\n<p>I agree and think that\u2019s what\u2019s better to do and the safest.</p>\n<p>So we should track chunks, individual transactions are also chunks with single transactions.</p>\n<p>Whenever we receive a new block we linearize the block to get a series of chunks.</p>\n<p>If there is an exact match for a chunk of transactions and its fee rate, remove it as a success.</p>\n<p>Otherwise, remove the chunk transactions from the fee estimator mapMempoolTxs and blockIndex.</p>\n<p>The mempool should notify the fee estimator about new chunks, updated chunks, and chunk eviction.</p>\n<p>Reasons why chunk fee rate will not match in some cases might be due to</p>\n<ul>\n<li>Mempool differences</li>\n<li>Differences in linearization algorithm</li>\n<li>When a subset of the package is mined</li>\n</ul>\n<p>I think it\u2019s best to ignore if there is a mismatch in all the cases above.</p>\n<p>This way we are on safe side by relying on our mempool just as sipa mentioned.</p>",
  "post_number": 4,
  "post_type": 1,
  "updated_at": "2023-12-23T11:10:35.539Z",
  "reply_count": 2,
  "reply_to_post_number": null,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 10,
  "readers_count": 9,
  "score": 12.0,
  "yours": false,
  "topic_id": 312,
  "topic_slug": "package-aware-fee-estimator-post-cluster-mempool",
  "topic_title": "Package aware Fee estimator post cluster mempool",
  "topic_html_title": "Package aware Fee estimator post cluster mempool",
  "category_id": 8,
  "display_username": "Abubakar Sadiq Ismail",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 2,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "> When suggesting the \u201cfee estimation should use chunk feerates\u201d, I had imagined it would just use our mempool\u2019s clusters/chunks to determine those values.\n\nYes\n\n> I guess you could track chunks + the individual transactions, and only use exact matches after you linearize the block?\n\nI agree and think that's what's better to do and the safest.\n\nSo we should track chunks, individual transactions are also chunks with single transactions.\n\nWhenever we receive a new block we linearize the block to get a series of chunks.\n\nIf there is an exact match for a chunk of transactions and its fee rate, remove it as a success.\n\nOtherwise, remove the chunk transactions from the fee estimator mapMempoolTxs and blockIndex.\n\nThe mempool should notify the fee estimator about new chunks, updated chunks, and chunk eviction.\n\n\nReasons why chunk fee rate will not match in some cases might be due to \n\n* Mempool differences\n* Differences in linearization algorithm\n* When a subset of the package is mined\n\nI think it's best to ignore if there is a mismatch in all the cases above.\n\nThis way we are on safe side by relying on our mempool just as sipa mentioned.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 135,
  "hidden": false,
  "trust_level": 1,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
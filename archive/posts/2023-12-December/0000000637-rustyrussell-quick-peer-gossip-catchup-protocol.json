{
  "id": 637,
  "name": "Rusty Russell",
  "username": "rustyrussell",
  "avatar_template": "/user_avatar/delvingbitcoin.org/rustyrussell/{size}/154_2.png",
  "created_at": "2023-12-06T05:06:18.586Z",
  "cooked": "<blockquote>\n<p>TBH I\u2019d really rather we Just Do Minisketch and move on rather than trying to keep applying bandaids to the current gossip.</p>\n</blockquote>\n<p>Sure, but you need gossip v1.5 for minisketch.  And you still might want this for catchup, if you only have a few peers (i.e. one peer!).</p>\n<p>Meanwhile, I thought \u201cno, your proposal is just like gossip_timestamp_filter which we\u2019re moving away from\u201d, but actually, /it\u2019s different/, being based on the gossip time, not the timestamps.</p>\n<p>If you record the timestamp when you commit the gossip, assuming 60 second relay, you\u2019re pretty close.  If the peer reports when they last received gossip you can subtract 120 seconds and probably do a pretty good job.</p>\n<p>It turns out, we even have a field in our gossip_store header \u201ctimestamp\u201d, which is redundant (it used to be a copy of the update timestamp, used for easy timestamp filter when we supported that).  We use that without a format change.</p>\n<p>We\u2019d still need to keep some offset markers to avoid having to sweep the entire file when asked for a specific time, but that\u2019s actually extremely implementable\u2026</p>",
  "post_number": 3,
  "post_type": 1,
  "updated_at": "2023-12-06T05:06:18.586Z",
  "reply_count": 1,
  "reply_to_post_number": 2,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 11,
  "readers_count": 10,
  "score": 7.2,
  "yours": false,
  "topic_id": 251,
  "topic_slug": "quick-peer-gossip-catchup-protocol",
  "topic_title": "Quick peer gossip catchup protocol",
  "topic_html_title": "Quick peer gossip catchup protocol",
  "category_id": 7,
  "display_username": "Rusty Russell",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "reply_to_user": {
    "username": "MattCorallo",
    "name": "Matt Corallo",
    "avatar_template": "/letter_avatar_proxy/v4/letter/m/e47c2d/{size}.png"
  },
  "bookmarked": false,
  "raw": "> TBH I\u2019d really rather we Just Do Minisketch and move on rather than trying to keep applying bandaids to the current gossip.\n\nSure, but you need gossip v1.5 for minisketch.  And you still might want this for catchup, if you only have a few peers (i.e. one peer!).\n\nMeanwhile, I thought \"no, your proposal is just like gossip_timestamp_filter which we're moving away from\", but actually, /it's different/, being based on the gossip time, not the timestamps.\n\nIf you record the timestamp when you commit the gossip, assuming 60 second relay, you're pretty close.  If the peer reports when they last received gossip you can subtract 120 seconds and probably do a pretty good job.\n\nIt turns out, we even have a field in our gossip_store header \"timestamp\", which is redundant (it used to be a copy of the update timestamp, used for easy timestamp filter when we supported that).  We use that without a format change.\n\nWe'd still need to keep some offset markers to avoid having to sweep the entire file when asked for a specific time, but that's actually extremely implementable...",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 137,
  "hidden": false,
  "trust_level": 2,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
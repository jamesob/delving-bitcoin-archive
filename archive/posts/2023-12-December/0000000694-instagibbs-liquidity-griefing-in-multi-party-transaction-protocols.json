{
  "id": 694,
  "name": "Gregory Sanders",
  "username": "instagibbs",
  "avatar_template": "/user_avatar/delvingbitcoin.org/instagibbs/{size}/28_2.png",
  "created_at": "2023-12-08T15:05:34.778Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"t-bast\" data-post=\"6\" data-topic=\"264\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/t-bast/48/98_2.png\" class=\"avatar\"> t-bast:</div>\n<blockquote>\n<p>It has the same effect though: the inflated transaction is thus paying a lower feerate than expected, which makes it easy to replace with a transaction that pays the expected feerate (when not coupled with descendant pinning).</p>\n</blockquote>\n</aside>\n<p>anti-DoS rule#3 is the pain point here. If it gets evicted from the mempool, then you\u2019re in the clear(future bytes will have to pay higher minfee, protecting the node), otherwise you have to overcome the total value.</p>\n<aside class=\"quote no-group\" data-username=\"morehouse\" data-post=\"5\" data-topic=\"264\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/m/df705f/48.png\" class=\"avatar\"> morehouse:</div>\n<blockquote>\n<p>v3 does prevent pinning, but witness inflation can still be used with a single 1000 vB descendant to inflate the RBF cost for the victim. Doing this repeatedly can burn the victim\u2019s funds to fees, with no cost to the attacker. Whether this can be done reliably, I\u2019m not sure \u2013 the only way to find out is to try such an attack.</p>\n</blockquote>\n</aside>\n<p>The future post-cluster mempool scheme I have in mind is pretty simple: v3 would be relaxed to \u201cmust be in top block to enter mempool\u201d. This makes pinning essentially impossible unless the attacker somehow knows the top-rate backlog is going to get bad shortly in the future, and should protect against witness inflation and the like. Would allow for pin-resistant batch CPFP, would mean you don\u2019t necessarily need no unconfirmed ancestors, should make ANYONECANPAY usage more safe(like HTLC second stage txns) etc.</p>\n<p>Just a sketch at this point, but something to consider if you\u2019re already thinking about pins and mitigations.</p>",
  "post_number": 7,
  "post_type": 1,
  "updated_at": "2023-12-08T15:06:22.999Z",
  "reply_count": 0,
  "reply_to_post_number": 6,
  "quote_count": 2,
  "incoming_link_count": 0,
  "reads": 3,
  "readers_count": 2,
  "score": 0,
  "yours": false,
  "topic_id": 264,
  "topic_slug": "liquidity-griefing-in-multi-party-transaction-protocols",
  "topic_title": "Liquidity griefing in multi-party transaction protocols",
  "topic_html_title": "Liquidity griefing in multi-party transaction protocols",
  "category_id": 7,
  "display_username": "Gregory Sanders",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"t-bast, post:6, topic:264\"]\nIt has the same effect though: the inflated transaction is thus paying a lower feerate than expected, which makes it easy to replace with a transaction that pays the expected feerate (when not coupled with descendant pinning).\n[/quote]\n\nanti-DoS rule#3 is the pain point here. If it gets evicted from the mempool, then you're in the clear(future bytes will have to pay higher minfee, protecting the node), otherwise you have to overcome the total value.\n\n[quote=\"morehouse, post:5, topic:264\"]\nv3 does prevent pinning, but witness inflation can still be used with a single 1000 vB descendant to inflate the RBF cost for the victim. Doing this repeatedly can burn the victim\u2019s funds to fees, with no cost to the attacker. Whether this can be done reliably, I\u2019m not sure \u2013 the only way to find out is to try such an attack.\n[/quote]\n\nThe future post-cluster mempool scheme I have in mind is pretty simple: v3 would be relaxed to \"must be in top block to enter mempool\". This makes pinning essentially impossible unless the attacker somehow knows the top-rate backlog is going to get bad shortly in the future, and should protect against witness inflation and the like. Would allow for pin-resistant batch CPFP, would mean you don't necessarily need no unconfirmed ancestors, should make ANYONECANPAY usage more safe(like HTLC second stage txns) etc.\n\nJust a sketch at this point, but something to consider if you're already thinking about pins and mitigations.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 31,
  "hidden": false,
  "trust_level": 3,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
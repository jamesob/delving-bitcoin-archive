{
  "id": 5191,
  "name": "Matt Corallo",
  "username": "MattCorallo",
  "avatar_template": "/letter_avatar_proxy/v4/letter/m/e47c2d/{size}.png",
  "created_at": "2025-06-02T14:19:11.698Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"carla\" data-post=\"1\" data-topic=\"1723\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/carla/48/119_2.png\" class=\"avatar\"> carla:</div>\n<blockquote>\n<p>Intermediaries: timing analysis is used to connect an incoming <code>revoke_and_ack</code> with an outgoing <code>update_add_htlc</code> to identify forwarding nodes.</p>\n</blockquote>\n</aside>\n<aside class=\"quote no-group\" data-username=\"carla\" data-post=\"1\" data-topic=\"1723\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/carla/48/119_2.png\" class=\"avatar\"> carla:</div>\n<blockquote>\n<p>Note that senders and receivers are identified based on the size of messages, without needing to rely on any timing information. Here, a forwarding delay isn\u2019t helping sender/receiver privacy at all</p>\n</blockquote>\n</aside>\n<p>These two statements appear to contradict each other - the point of the forwarding delay is to create a batch such that a passive network monitor can\u2019t trivially trace payments. Indeed, in some specific attacks in the literature they use message sizes and other issues in LN that we should address separately, but unless we want to switch to full CBR streams (at least for HTLCs themselves, in theory we could segment out our traffic in our TCP streams such that we send exactly one 1400-byte packet every 100ms or whatever even though we let gossip use whatever rate it wants), moving to no forwarding delay would leave payment tracing from someone doing network monitoring absolutely trivial.</p>\n<p>Even if we switch to CBR (is there even appetite for doing this?), having no forwarding delays would mean that someone trying to get privacy by adding extra hops would be absolutely wrecked by an adversary running multiple nodes (post-PTLCs).</p>\n<p>ISTM delays when forwarding (to the point of getting batching, at least insofar as we have enough traffic that we can get there without killing UX) is very important for privacy, especially as we fix low-hanging fruit like message padding.</p>",
  "post_number": 18,
  "post_type": 1,
  "posts_count": 40,
  "updated_at": "2025-06-02T14:19:11.698Z",
  "reply_count": 1,
  "reply_to_post_number": null,
  "quote_count": 1,
  "incoming_link_count": 0,
  "reads": 28,
  "readers_count": 27,
  "score": 10.6,
  "yours": false,
  "topic_id": 1723,
  "topic_slug": "latency-and-privacy-in-lightning",
  "topic_title": "Latency and Privacy in Lightning",
  "topic_html_title": "Latency and Privacy in Lightning",
  "category_id": 7,
  "display_username": "Matt Corallo",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"carla, post:1, topic:1723\"]\nIntermediaries: timing analysis is used to connect an incoming `revoke_and_ack` with an outgoing `update_add_htlc` to identify forwarding nodes.\n[/quote]\n\n[quote=\"carla, post:1, topic:1723\"]\nNote that senders and receivers are identified based on the size of messages, without needing to rely on any timing information. Here, a forwarding delay isn\u2019t helping sender/receiver privacy at all\n[/quote]\n\nThese two statements appear to contradict each other - the point of the forwarding delay is to create a batch such that a passive network monitor can't trivially trace payments. Indeed, in some specific attacks in the literature they use message sizes and other issues in LN that we should address separately, but unless we want to switch to full CBR streams (at least for HTLCs themselves, in theory we could segment out our traffic in our TCP streams such that we send exactly one 1400-byte packet every 100ms or whatever even though we let gossip use whatever rate it wants), moving to no forwarding delay would leave payment tracing from someone doing network monitoring absolutely trivial.\n\nEven if we switch to CBR (is there even appetite for doing this?), having no forwarding delays would mean that someone trying to get privacy by adding extra hops would be absolutely wrecked by an adversary running multiple nodes (post-PTLCs).\n\nISTM delays when forwarding (to the point of getting batching, at least insofar as we have enough traffic that we can get there without killing UX) is very important for privacy, especially as we fix low-hanging fruit like message padding.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 50,
  "hidden": false,
  "trust_level": 2,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "These two statements appear to contradict each other - the point of the forwarding delay is to create a batch such that a passive network monitor can\u2019t trivially trace payments. Indeed, in some specific attacks in the literature they use message sizes and other issues in LN that we should address &hellip;",
  "truncated": true,
  "post_url": "/t/latency-and-privacy-in-lightning/1723/18",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
{
  "id": 5325,
  "name": "Sanket Kanjalkar",
  "username": "sanket1729",
  "avatar_template": "/user_avatar/delvingbitcoin.org/sanket1729/{size}/13_2.png",
  "created_at": "2025-06-20T01:47:24.097Z",
  "cooked": "<p>Taking another stab at this. I am modifying the construction of CTV vaults as follows. Instead of depositing funds directly into vaults, funds are deposited into a regular BIP380 <code>in_desc</code>. All UTXOs then go into a CTV address that is governed by a ctv vault-like policy.</p>\n<p>There is a big difference from traditional vaults here, in that the deposit also goes into a hot wallet and is then moved with a separate transaction into the CTV vault. As discussed in several other threads earlier, users depositing directly into CTV addresses will be error-prone and can lead to loss of funds. If we are using software to deposit funds into a CTV vault, we might use the descriptor where we get the money to identify the wallets. For tracing all funds for backup purposes, we can then use this descriptor to trace them.</p>\n<p>What if we fit in the ctv_vaults as follows:\n<code>ctv(in_desc, out_desc)</code> where</p>\n<ul>\n<li><code>in_desc</code> is a BIP380 descriptor that we use to index deposits. We immediately move funds to the vault with a regular CTV transaction.</li>\n<li><code>out_desc</code> represents the first output of a BIP380 descriptor with the same amount as the input, and a second output that serves as an anchor for fees. This can be a fixed amount like a DUST output with a fixed fee for 1 sat/vb etc. Along with other sensible defaults for nlocktime, sequence etc <a class=\"mention\" href=\"/u/sjors\">@sjors</a> mentioned above.</li>\n</ul>\n<p>I believe this should be easy to implement, as most wallets (including bitcoin core) would not need any or complex logic to support this. Implementing it this way, we also avoid the footgun of potentially depositing incorrect amounts in CTV vaults. Curious to hear your thoughts</p>",
  "post_number": 9,
  "post_type": 1,
  "posts_count": 9,
  "updated_at": "2025-06-20T01:50:09.128Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 12,
  "readers_count": 11,
  "score": 17.4,
  "yours": false,
  "topic_id": 1766,
  "topic_slug": "ctv-vault-output-descriptor",
  "topic_title": "CTV vault output descriptor",
  "topic_html_title": "CTV vault output descriptor",
  "category_id": 8,
  "display_username": "Sanket Kanjalkar",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "Taking another stab at this. I am modifying the construction of CTV vaults as follows. Instead of depositing funds directly into vaults, funds are deposited into a regular BIP380 `in_desc`. All UTXOs then go into a CTV address that is governed by a ctv vault-like policy.\n\nThere is a big difference from traditional vaults here, in that the deposit also goes into a hot wallet and is then moved with a separate transaction into the CTV vault. As discussed in several other threads earlier, users depositing directly into CTV addresses will be error-prone and can lead to loss of funds. If we are using software to deposit funds into a CTV vault, we might use the descriptor where we get the money to identify the wallets. For tracing all funds for backup purposes, we can then use this descriptor to trace them.\n\nWhat if we fit in the ctv_vaults as follows:\n`ctv(in_desc, out_desc)` where\n\n* `in_desc` is a BIP380 descriptor that we use to index deposits. We immediately move funds to the vault with a regular CTV transaction.\n* `out_desc` represents the first output of a BIP380 descriptor with the same amount as the input, and a second output that serves as an anchor for fees. This can be a fixed amount like a DUST output with a fixed fee for 1 sat/vb etc. Along with other sensible defaults for nlocktime, sequence etc @sjors mentioned above.\n\nI believe this should be easy to implement, as most wallets (including bitcoin core) would not need any or complex logic to support this. Implementing it this way, we also avoid the footgun of potentially depositing incorrect amounts in CTV vaults. Curious to hear your thoughts",
  "actions_summary": [
    {
      "id": 2,
      "count": 1
    }
  ],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 14,
  "hidden": false,
  "trust_level": 3,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "Taking another stab at this. I am modifying the construction of CTV vaults as follows. Instead of depositing funds directly into vaults, funds are deposited into a regular BIP380 in_desc. All UTXOs then go into a CTV address that is governed by a ctv vault-like policy. \nThere is a big difference fro&hellip;",
  "truncated": true,
  "post_url": "/t/ctv-vault-output-descriptor/1766/9",
  "reactions": [
    {
      "id": "+1",
      "type": "emoji",
      "count": 1
    }
  ],
  "current_user_reaction": null,
  "reaction_users_count": 1,
  "current_user_used_main_reaction": false
}
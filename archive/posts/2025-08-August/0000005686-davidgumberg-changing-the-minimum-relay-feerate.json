{
  "id": 5686,
  "name": "David Gumberg",
  "username": "davidgumberg",
  "avatar_template": "/user_avatar/delvingbitcoin.org/davidgumberg/{size}/378_2.png",
  "created_at": "2025-08-12T02:50:42.859Z",
  "cooked": "<p>I wonder if it is possible to set minimum relay fees dynamically and preserve DoS protections, without requiring a release cycle for Bitcoin Core policy to catch up with blockspace demand and the exchange rate between BTC and EC2 bandwidth.</p>\n<p>If one only had to account for blockspace demand the problem would be more tractable since the only thing that needs to be considered is what transactions get included in blocks, and you could pick some metric like percentile of transactions included in blocks you want to fit above the minimum relay fee. Coupled with <a class=\"mention\" href=\"/u/0xb10c\">@0xB10C</a>\u2019s prefill <a href=\"https://delvingbitcoin.org/t/stats-on-compact-block-reconstructions/1052/24\">proposal</a>, this could mitigate compact block relay issues related to minimum relay feerate.</p>\n<p>But, miners don\u2019t pay the total cost to the network of relaying a transaction, they only pay their own small portion of that cost. So, in some circumstances it might be profitable for miners to include transactions at a feerate (sats/vB) below the network\u2019s relay cost (# of nodes * cost of bandwidth in sats/byte * 4 bytes/vB<sup class=\"footnote-ref\"><a href=\"#footnote-5686-1\" id=\"footnote-ref-5686-1\">[1]</a></sup><em>).</em> For an example estimate of network relay cost, that follows along the same lines as <a class=\"mention\" href=\"/u/ajtowns\">@ajtowns</a> <a href=\"https://github.com/bitcoin/bitcoin/pull/32959#issuecomment-3095260286\" rel=\"noopener nofollow ugc\">calculations</a>: taking EC2\u2019s most expensive bandwidth tier of $0.09 / GB, and 1 BTC = 100,000 USD, the cost of bandwidth is <span class=\"math\">90 \\frac{\\text{sats}}{\\text{GB}} = 9 \\times 10^{-8} \\frac{\\text{sats}}{\\text{Byte}} = 3.6 \\times 10^{-7} \\frac{\\text{sats}}{\\text{vB}}</span>. Multiplied by 100,000 (<span class=\"math\">10^5</span>) nodes the total network bandwidth cost is <span class=\"math\">0.036 \\frac{\\text{sats}}{\\text{vB}}</span>. In this scenario, the proposed minimum relay feerate of 0.1 sats/vB makes DoS\u2019ing the network with transaction relay still more expensive than DoS\u2019ing it with EC2.</p>\n<p>But, determining the cost to externally relay to the Bitcoin network seems like it will always require external information (cost of internet bandwidth in sats / 4 bytes) and accurately determining the number of nodes on the network is difficult and will always be subject to sybiling, so will Bitcoin Core always have to hardcode minimum relay feerates, responding to network / market shifts one release cycle after they happen?</p>\n<hr class=\"footnotes-sep\">\n\n<ol class=\"footnotes-list\">\n<li id=\"footnote-5686-1\" class=\"footnote-item\"><p>Multiplied by 4 because in the worst case a vB is four bytes. (BIP-0141#transaction-size-calculations <a href=\"#footnote-ref-5686-1\" class=\"footnote-backref\">\u21a9\ufe0e</a></p>\n</li>\n</ol>",
  "post_number": 9,
  "post_type": 1,
  "posts_count": 13,
  "updated_at": "2025-08-12T15:26:50.392Z",
  "reply_count": 3,
  "reply_to_post_number": 8,
  "quote_count": 0,
  "incoming_link_count": 17,
  "reads": 47,
  "readers_count": 46,
  "score": 124.4,
  "yours": false,
  "topic_id": 1886,
  "topic_slug": "changing-the-minimum-relay-feerate",
  "topic_title": "Changing the minimum relay feerate",
  "topic_html_title": "Changing the minimum relay feerate",
  "category_id": 8,
  "display_username": "David Gumberg",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 4,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "reply_to_user": {
    "id": 7,
    "username": "glozow",
    "name": "Gloria Zhao",
    "avatar_template": "/user_avatar/delvingbitcoin.org/glozow/{size}/261_2.png"
  },
  "bookmarked": false,
  "raw": "I wonder if it is possible to set minimum relay fees dynamically and preserve DoS protections, without requiring a release cycle for Bitcoin Core policy to catch up with blockspace demand and the exchange rate between BTC and EC2 bandwidth.\n\nIf one only had to account for blockspace demand the problem would be more tractable since the only thing that needs to be considered is what transactions get included in blocks, and you could pick some metric like percentile of transactions included in blocks you want to fit above the minimum relay fee. Coupled with @0xB10C\u2019s prefill [proposal](https://delvingbitcoin.org/t/stats-on-compact-block-reconstructions/1052/24), this could mitigate compact block relay issues related to minimum relay feerate.\n\nBut, miners don\u2019t pay the total cost to the network of relaying a transaction, they only pay their own small portion of that cost. So, in some circumstances it might be profitable for miners to include transactions at a feerate (sats/vB) below the network\u2019s relay cost (# of nodes \\* cost of bandwidth in sats/byte \\* 4 bytes/vB^[Multiplied by 4 because in the worst case a vB is four bytes. (BIP-0141#transaction-size-calculations]*).* For an example estimate of network relay cost, that follows along the same lines as @ajtowns [calculations](https://github.com/bitcoin/bitcoin/pull/32959#issuecomment-3095260286): taking EC2\u2019s most expensive bandwidth tier of $0.09 / GB, and 1 BTC = 100,000 USD, the cost of bandwidth is $90 \\frac{\\text{sats}}{\\text{GB}} = 9 \\times 10^{-8} \\frac{\\text{sats}}{\\text{Byte}} = 3.6 \\times 10^{-7} \\frac{\\text{sats}}{\\text{vB}}$. Multiplied by 100,000 ($10^5$) nodes the total network bandwidth cost is $0.036 \\frac{\\text{sats}}{\\text{vB}}$. In this scenario, the proposed minimum relay feerate of 0.1 sats/vB makes DoS\u2019ing the network with transaction relay still more expensive than DoS\u2019ing it with EC2.\n\nBut, determining the cost to externally relay to the Bitcoin network seems like it will always require external information (cost of internet bandwidth in sats / 4 bytes) and accurately determining the number of nodes on the network is difficult and will always be subject to sybiling, so will Bitcoin Core always have to hardcode minimum relay feerates, responding to network / market shifts one release cycle after they happen?",
  "actions_summary": [
    {
      "id": 2,
      "count": 1
    }
  ],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 315,
  "hidden": false,
  "trust_level": 1,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "I wonder if it is possible to set minimum relay fees dynamically and preserve DoS protections, without requiring a release cycle for Bitcoin Core policy to catch up with blockspace demand and the exchange rate between BTC and EC2 bandwidth. \nIf one only had to account for blockspace demand the probl&hellip;",
  "truncated": true,
  "post_url": "/t/changing-the-minimum-relay-feerate/1886/9",
  "reactions": [
    {
      "id": "+1",
      "type": "emoji",
      "count": 1
    }
  ],
  "current_user_reaction": null,
  "reaction_users_count": 1,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
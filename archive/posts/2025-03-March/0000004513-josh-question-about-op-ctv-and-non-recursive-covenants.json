{
  "id": 4513,
  "name": "",
  "username": "josh",
  "avatar_template": "/user_avatar/delvingbitcoin.org/josh/{size}/95_2.png",
  "created_at": "2025-03-13T14:44:55.081Z",
  "cooked": "<p><a class=\"mention\" href=\"/u/ajtowns\">@ajtowns</a> Thank you for the detailed response! Below are some of my thoughts:</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"ajtowns\" data-post=\"4\" data-topic=\"1517\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/ajtowns/48/417_2.png\" class=\"avatar\"> ajtowns:</div>\n<blockquote>\n<aside class=\"quote no-group\" data-username=\"josh\" data-post=\"1\" data-topic=\"1517\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/josh/48/95_2.png\" class=\"avatar\"> josh:</div>\n<blockquote>\n<p>My interest in runes is chiefly as a protocol that could facilitate the issuance of stocks and other securities natively on Bitcoin.</p>\n</blockquote>\n</aside>\n<p>\u2026my expectation is that doing these things on bitcoin will end up out-competed by custom solutions.</p>\n</blockquote>\n</aside>\n<p>That\u2019s very fair, and I think that\u2019s the dominant perspective right now. My perspective is somewhat contrarian. If you\u2019re a public company like Microstrategy / Strategy and you want to raise bitcoin <em>directly from bitcoiners</em>, you need to go to where the bitcoin is. You can\u2019t expect the bitcoin to come to you. Features like speed and programmability are less relevant when all you care about is raising capital and the alternative is DTCC.</p>\n<p>Bitcoin holders don\u2019t want to move their bitcoin to an exchange, where it could get frozen, only to then sell for dollars and wait days to move it to a brokerage, just to buy the stock. Nor do they wish to take on the hassle and risk of bridging to another blockchain or giving someone else custody.</p>\n<p>If a company issued their stock natively on Bitcoin, a secondary market could develop directly between bitcoin and their stock, and the company could easily raise bitcoin by selling shares into the market. Likewise, they could easily buyback their stock and issue bitcoin dividends, and prospective investors could easily invest or divest with a single trustless transaction, without needing KYC or intermediaries.</p>\n<aside class=\"quote no-group\" data-username=\"ajtowns\" data-post=\"4\" data-topic=\"1517\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/ajtowns/48/417_2.png\" class=\"avatar\"> ajtowns:</div>\n<blockquote>\n<p>I\u2019m not sure I understand the problem statement here. I think what you\u2019re saying is essentially \u201cI know of a dozen existing txids, each of which imply control of a different rune R1 \u2026 R12, and I am happy to buy any one of those runes for X BTC\u201d.</p>\n</blockquote>\n</aside>\n<p>Here is a more formal problem statement:</p>\n<p><em>With a single signature, make a blanket buy offer of <span class=\"math\">X</span> runes of type <span class=\"math\">R</span> for <span class=\"math\">Y</span> sats, across all UTXOs with a balance of at least <span class=\"math\">X</span> runes of type <span class=\"math\">R</span>.</em></p>\n<p>This unfortunately isn\u2019t practical to do today:</p>\n<aside class=\"quote no-group\" data-username=\"josh\" data-post=\"8\" data-topic=\"1517\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/josh/48/95_2.png\" class=\"avatar\"> josh:</div>\n<blockquote>\n<p>You can create a rune buy offer today for a single UTXO holding <span class=\"math\">X</span> runes of type <span class=\"math\">R</span> by creating a PSBT with SIGHASH_ALL committing to the entire transaction, leaving the seller\u2019s input for them to sign. This is how <code>ord</code> implements <a href=\"https://github.com/ordinals/ord/blob/ca9950a1dc702bad082ba016c62eaa88456e99fa/src/subcommand/wallet/offer/create.rs\" rel=\"noopener nofollow ugc\">inscription buy offers</a>.</p>\n<p>The problem is that you can\u2019t realistically do this at scale, without creating a ridiculous number of signatures. You would need to sign a distinct PSBT for each UTXO with a balance of at least <span class=\"math\">X</span> runes of type <span class=\"math\">R</span>, which could number in the 1000s or 10s of 1000s, or more.</p>\n</blockquote>\n</aside>\n<p>The idea I was exploring was to commit to multiple possible transaction templates with a single signature, which any of the potential sellers could use to accept their specific buy offer.</p>\n<aside class=\"quote no-group\" data-username=\"josh\" data-post=\"8\" data-topic=\"1517\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/josh/48/95_2.png\" class=\"avatar\"> josh:</div>\n<blockquote>\n<p>My idea was for the bidder to first create a transaction <span class=\"math\">T_0</span> that commits to a P2TR output that has a unique script spend path <span class=\"math\">S_i</span> for each UTXO <span class=\"math\">U_i</span> they\u2019re bidding on. There would be no signatures in the script spend path, just a commitment to a transaction <span class=\"math\">T_i</span> that has the buyer\u2019s output, the seller\u2019s output, the seller\u2019s input, and an <code>OP_RETURN</code> that sends <span class=\"math\">X</span> runes to the buyer\u2019s output.</p>\n<p>The transaction <span class=\"math\">T_0</span> could then be easily broadcast, and any owner of rune <span class=\"math\">R</span> at <span class=\"math\">U_i</span> could create and sign the \u201creveal\u201d transaction <span class=\"math\">T_i</span> that sends the runes to the bidder and claims the sats for themselves.</p>\n<p>This though would require some way to commit to the spent outpoint <span class=\"math\">U_i</span>, but I\u2019m afraid there\u2019s no way to do that with CTV.</p>\n</blockquote>\n</aside>\n<p>Finally,</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"ajtowns\" data-post=\"4\" data-topic=\"1517\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/ajtowns/48/417_2.png\" class=\"avatar\"> ajtowns:</div>\n<blockquote>\n<p>If the CTV hash committed to the inputs, then you couldn\u2019t construct a (spendable) scriptPubKey that included a CTV hash\u2026</p>\n</blockquote>\n</aside>\n<p>I\u2019m not sure I totally follow, but I\u2019d like to. Just to clarify, I\u2019m not suggesting that you commit to the full input, including the scripts. Just the mined location of the spent outpoint you wish to buy (to ensure the correct number of runes are in the transaction, without enabling recursive covenants).</p>",
  "post_number": 9,
  "post_type": 1,
  "updated_at": "2025-03-13T14:48:52.122Z",
  "reply_count": 0,
  "reply_to_post_number": 4,
  "quote_count": 3,
  "incoming_link_count": 0,
  "reads": 10,
  "readers_count": 9,
  "score": 2.0,
  "yours": false,
  "topic_id": 1517,
  "topic_slug": "question-about-op-ctv-and-non-recursive-covenants",
  "topic_title": "Question about OP_CTV and Non-Recursive Covenants",
  "topic_html_title": "Question about OP_CTV and Non-Recursive Covenants",
  "category_id": 7,
  "display_username": "",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "@ajtowns Thank you for the detailed response! Below are some of my thoughts:\n\n[quote=\"ajtowns, post:4, topic:1517, full:true\"]\n\n[quote=\"josh, post:1, topic:1517\"]\n\nMy interest in runes is chiefly as a protocol that could facilitate the issuance of stocks and other securities natively on Bitcoin.\n\n[/quote]\n\n...my expectation is that doing these things on bitcoin will end up out-competed by custom solutions.\n\n[/quote]\n\nThat's very fair, and I think that's the dominant perspective right now. My perspective is somewhat contrarian. If you're a public company like Microstrategy / Strategy and you want to raise bitcoin *directly from bitcoiners*, you need to go to where the bitcoin is. You can't expect the bitcoin to come to you. Features like speed and programmability are less relevant when all you care about is raising capital and the alternative is DTCC.\n\nBitcoin holders don\u2019t want to move their bitcoin to an exchange, where it could get frozen, only to then sell for dollars and wait days to move it to a brokerage, just to buy the stock. Nor do they wish to take on the hassle and risk of bridging to another blockchain or giving someone else custody.\n\nIf a company issued their stock natively on Bitcoin, a secondary market could develop directly between bitcoin and their stock, and the company could easily raise bitcoin by selling shares into the market. Likewise, they could easily buyback their stock and issue bitcoin dividends, and prospective investors could easily invest or divest with a single trustless transaction, without needing KYC or intermediaries.\n\n[quote=\"ajtowns, post:4, topic:1517, full:true\"]\n\nI\u2019m not sure I understand the problem statement here. I think what you\u2019re saying is essentially \u201cI know of a dozen existing txids, each of which imply control of a different rune R1 \u2026 R12, and I am happy to buy any one of those runes for X BTC\u201d.\n\n[/quote]\n\nHere is a more formal problem statement:\n\n*With a single signature, make a blanket buy offer of $X$ runes of type $R$ for $Y$ sats, across all UTXOs with a balance of at least $X$ runes of type $R$.*\n\nThis unfortunately isn't practical to do today:\n\n[quote=\"josh, post:8, topic:1517, full:true\"]\nYou can create a rune buy offer today for a single UTXO holding $X$ runes of type $R$ by creating a PSBT with SIGHASH_ALL committing to the entire transaction, leaving the seller's input for them to sign. This is how `ord` implements [inscription buy offers](https://github.com/ordinals/ord/blob/ca9950a1dc702bad082ba016c62eaa88456e99fa/src/subcommand/wallet/offer/create.rs).\n\nThe problem is that you can't realistically do this at scale, without creating a ridiculous number of signatures. You would need to sign a distinct PSBT for each UTXO with a balance of at least $X$ runes of type $R$, which could number in the 1000s or 10s of 1000s, or more.\n\n[/quote]\n\nThe idea I was exploring was to commit to multiple possible transaction templates with a single signature, which any of the potential sellers could use to accept their specific buy offer. \n\n[quote=\"josh, post:8, topic:1517, full:true\"]\n\nMy idea was for the bidder to first create a transaction $T_0$ that commits to a P2TR output that has a unique script spend path $S_i$ for each UTXO $U_i$ they're bidding on. There would be no signatures in the script spend path, just a commitment to a transaction $T_i$ that has the buyer's output, the seller's output, the seller's input, and an `OP_RETURN` that sends $X$ runes to the buyer's output.\n\nThe transaction $T_0$ could then be easily broadcast, and any owner of rune $R$ at $U_i$ could create and sign the \"reveal\" transaction $T_i$ that sends the runes to the bidder and claims the sats for themselves.\n\nThis though would require some way to commit to the spent outpoint $U_i$, but I'm afraid there's no way to do that with CTV.\n[/quote]\n\nFinally,\n\n[quote=\"ajtowns, post:4, topic:1517, full:true\"]\n\nIf the CTV hash committed to the inputs, then you couldn\u2019t construct a (spendable) scriptPubKey that included a CTV hash...\n\n[/quote]\n\nI'm not sure I totally follow, but I'd like to. Just to clarify, I'm not suggesting that you commit to the full input, including the scripts. Just the mined location of the spent outpoint you wish to buy (to ensure the correct number of runes are in the transaction, without enabling recursive covenants).",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 98,
  "hidden": false,
  "trust_level": 1,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
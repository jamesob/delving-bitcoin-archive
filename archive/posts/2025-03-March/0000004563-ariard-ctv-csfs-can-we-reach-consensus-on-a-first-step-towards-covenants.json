{
  "id": 4563,
  "name": "Antoine Riard",
  "username": "ariard",
  "avatar_template": "/letter_avatar_proxy/v4/letter/a/c67d28/{size}.png",
  "created_at": "2025-03-17T22:28:38.389Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"jamesob\" data-post=\"42\" data-topic=\"1509\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/jamesob/48/271_2.png\" class=\"avatar\"> jamesob:</div>\n<blockquote>\n<p>Except that in the last week, we\u2019ve had</p>\n<ul>\n<li>2 Blockstream engineers go on record as saying CTV would be valuable for Liquid,</li>\n<li>the CEO of one of Bitcoin\u2019s most popular hardware wallets saying <a href=\"https://x.com/nvk/status/1899918763728003420\">he\u2019d implement vaults</a>,</li>\n<li>the CEO of Bitcoin\u2019s only custodial insurance product saying <a href=\"https://x.com/Rob1Ham/status/1897781338796966103\">he wants vaults</a>, and</li>\n<li>a prototype of Ark based on CTV passing tests and showing a substantial reduction in the interactivity required (mentioned above).</li>\n</ul>\n<p>I wouldn\u2019t call that \u201cdoing circles!\u201d</p>\n</blockquote>\n</aside>\n<p>Okay so yes to be precise, it was more on the theoretical / primitive design space technical options, in the sense that I don\u2019t think we have seen primitives breakthrough since OP_TLUV, OP_EVICT, MATT or PT2R merkle tree editors since few years ago. The only recent breakthrough have been constructions like BitVM or ColliderScript, to attempt to achieve the same for some use-cases, without consensus changes.</p>\n<p>Though yes, getting industry\u2019s opinions on how they would see vaults in practice, and not only on whiteboard is a notable move forward, I do not disagree. IMHO, the more interesting question, I was laying is if HW / secure enclave vendors would be ready to have CTV-like support on the enclave-side, otherwise it\u2019s \u201cblind signing\u201d for the key ceremonies (cf. \u201c<a href=\"https://medium.com/@devrandom/blind-signing-considered-harmful-ac82e5852853\">Blind Signing Considered Harmful</a>\u201d).</p>\n<aside class=\"quote no-group\" data-username=\"AntoineP\" data-post=\"44\" data-topic=\"1509\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/antoinep/48/483_2.png\" class=\"avatar\"> AntoineP:</div>\n<blockquote>\n<p>Meanwhile Bob McElrath <a href=\"https://x.com/BobMcElrath/status/1900445574626693258\">stated</a> that from his experience researching vaults for years at <a href=\"https://www.fidelitydigitalassets.com\">Fidelity Digital Asset</a>, one of the largest Bitcoin custodians in the world, vaults sounded like a good idea but were not in practice.</p>\n</blockquote>\n</aside>\n<p>In my perspective, the only security property improvement, that one can argue on is <em>immutability</em>, that once the coins are deposited on-chain beyond reorgs, there is no more reliance on correct and secure key-deletion for the intermediary unvaulting transactions.</p>\n<p>From browsing the Nunchuk, McElrath and Wizardsardine viewpoints, if I\u2019m understanding correctly they\u2019re saying either (a) vault it\u2019s hard because <em>reactive model</em> (so chain monitoring or watchtower) or (b) vault it\u2019s hard because duplicate set of keys. To have researched in the past extensively second-layers threats models (cf. <a href=\"https://github.com/ariard/L2-zoology\">L2 Transaction-Relay Workshops</a>), vault security model is not more complex than Lightning, and while LN is plagued by security vulnerabilities and limitations, courageous wallet vendors have succeeded to integrate it on mobile and desktop wallets. Of course, key ceremonies is a hard thing for vaults, i.e dealing well the transition from cold storage, though it\u2019s that harder than managing seeds transfers on multiple platforms for LN, and inadvertently broadcasting an already revoked state ? I don\u2019t think so\u2026</p>\n<p>Contrary to LN, vaults are not stateful, in the sense of off-chain update with a counterparty. This is already far less complexity, imo.</p>\n<aside class=\"quote no-group\" data-username=\"AntoineP\" data-post=\"44\" data-topic=\"1509\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/antoinep/48/483_2.png\" class=\"avatar\"> AntoineP:</div>\n<blockquote>\n<p>Now, all these discussions you brought up are about vaults that the proposal at hand does not enable. So i hope we can \u201cput this matter to rest\u201d and come back on topic to usecases actually enabled by the combination of <code>OP_CTV</code> and <code>OP_CSFS</code>. So far i see three:</p>\n</blockquote>\n</aside>\n<p>Fwiw, if we wish to have LN-Symmetry / Eltoo, we should just do ANYPREVOUT. I think OP_CSFS enhances the range of <a href=\"https://blog.bitmex.com/txwithhold-smart-contracts/\">TxWithhold</a> contract, as you can pass now a signature for a tx, you\u2019re not a counterparty to (i.e not a pubkey in a 2-of-2 P2WSH), which can be concerned for already deployed L2s like Lightning.</p>\n<aside class=\"quote no-group\" data-username=\"instagibbs\" data-post=\"51\" data-topic=\"1509\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/instagibbs/48/28_2.png\" class=\"avatar\"> instagibbs:</div>\n<blockquote>\n<p>I\u2019m thinking about it from another direction: Designing BIP119 from scratch, how should we build it? Legacy script (short-hand for non-segwit, not NOPs) is a dumpster fire, and it shouldn\u2019t be touched unless necessary.</p>\n<p>If it saves no vbytes, makes no operations safer, doesn\u2019t make the changes easier to understand for reviewers, why would we build it this way?</p>\n</blockquote>\n</aside>\n<p>I do not disagree that we should avoid to go for legacy script, avoids making the DoS surface worst (e.g worst-block case). I\u2019m re-reading BIP119 though there is no footnote to explain why <code>OP_NOP4</code> vs another upgrade path (e.g tapleaf version or <code>OP_SUCCESS</code>).</p>\n<p>Doing an OP_PUSH <code>&lt;template&gt;</code> instead of a OP_CHECK <code>&lt;template&gt;</code>, that means now you have a comparison on the Script stack to be done between <code>&lt;pushed_template&gt;</code> and <code>&lt;reference_template&gt;</code>. I do no think something in terms of <code>&lt;template&gt;</code> <em>bad malleability</em> it\u2019s an issue (hmm\u2026), however it\u2019s more memory allocated among the different script ops on the stack by each full-nodes. Not sure it\u2019s a concern.</p>",
  "post_number": 52,
  "post_type": 1,
  "updated_at": "2025-03-17T22:28:38.389Z",
  "reply_count": 1,
  "reply_to_post_number": null,
  "quote_count": 3,
  "incoming_link_count": 1,
  "reads": 16,
  "readers_count": 15,
  "score": 13.2,
  "yours": false,
  "topic_id": 1509,
  "topic_slug": "ctv-csfs-can-we-reach-consensus-on-a-first-step-towards-covenants",
  "topic_title": "CTV+CSFS: Can we reach consensus on a first step towards covenants?",
  "topic_html_title": "CTV+CSFS: Can we reach consensus on a first step towards covenants?",
  "category_id": 7,
  "display_username": "Antoine Riard",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"jamesob, post:42, topic:1509\"]\nExcept that in the last week, we\u2019ve had\n\n* 2 Blockstream engineers go on record as saying CTV would be valuable for Liquid,\n* the CEO of one of Bitcoin\u2019s most popular hardware wallets saying [he\u2019d implement vaults](https://x.com/nvk/status/1899918763728003420),\n* the CEO of Bitcoin\u2019s only custodial insurance product saying [he wants vaults](https://x.com/Rob1Ham/status/1897781338796966103), and\n* a prototype of Ark based on CTV passing tests and showing a substantial reduction in the interactivity required (mentioned above).\n\nI wouldn\u2019t call that \u201cdoing circles!\u201d\n[/quote]\n\nOkay so yes to be precise, it was more on the theoretical / primitive design space technical options, in the sense that I don't think we have seen primitives breakthrough since OP_TLUV, OP_EVICT, MATT or PT2R merkle tree editors since few years ago. The only recent breakthrough have been constructions like BitVM or ColliderScript, to attempt to achieve the same for some use-cases, without consensus changes.\n\nThough yes, getting industry's opinions on how they would see vaults in practice, and not only on whiteboard is a notable move forward, I do not disagree. IMHO, the more interesting question, I was laying is if HW / secure enclave vendors would be ready to have CTV-like support on the enclave-side, otherwise it's \"blind signing\" for the key ceremonies (cf. \"[Blind Signing Considered Harmful](https://medium.com/@devrandom/blind-signing-considered-harmful-ac82e5852853)\").\n\n[quote=\"AntoineP, post:44, topic:1509\"]\nMeanwhile Bob McElrath [stated](https://x.com/BobMcElrath/status/1900445574626693258) that from his experience researching vaults for years at [Fidelity Digital Asset](https://www.fidelitydigitalassets.com), one of the largest Bitcoin custodians in the world, vaults sounded like a good idea but were not in practice.\n[/quote]\n\nIn my perspective, the only security property improvement, that one can argue on is *immutability*, that once the coins are deposited on-chain beyond reorgs, there is no more reliance on correct and secure key-deletion for the intermediary unvaulting transactions.\n\nFrom browsing the Nunchuk, McElrath and Wizardsardine viewpoints, if I'm understanding correctly they're saying either (a) vault it's hard because *reactive model* (so chain monitoring or watchtower) or (b) vault it's hard because duplicate set of keys. To have researched in the past extensively second-layers threats models (cf. [L2 Transaction-Relay Workshops](https://github.com/ariard/L2-zoology)), vault security model is not more complex than Lightning, and while LN is plagued by security vulnerabilities and limitations, courageous wallet vendors have succeeded to integrate it on mobile and desktop wallets. Of course, key ceremonies is a hard thing for vaults, i.e dealing well the transition from cold storage, though it's that harder than managing seeds transfers on multiple platforms for LN, and inadvertently broadcasting an already revoked state ? I don't think so...\n\nContrary to LN, vaults are not stateful, in the sense of off-chain update with a counterparty. This is already far less complexity, imo.\n\n[quote=\"AntoineP, post:44, topic:1509\"]\nNow, all these discussions you brought up are about vaults that the proposal at hand does not enable. So i hope we can \u201cput this matter to rest\u201d and come back on topic to usecases actually enabled by the combination of `OP_CTV` and `OP_CSFS`. So far i see three:\n[/quote]\n\nFwiw, if we wish to have LN-Symmetry / Eltoo, we should just do ANYPREVOUT. I think OP_CSFS enhances the range of [TxWithhold](https://blog.bitmex.com/txwithhold-smart-contracts/) contract, as you can pass now a signature for a tx, you're not a counterparty to (i.e not a pubkey in a 2-of-2 P2WSH), which can be concerned for already deployed L2s like Lightning.\n\n[quote=\"instagibbs, post:51, topic:1509\"]\nI\u2019m thinking about it from another direction: Designing BIP119 from scratch, how should we build it? Legacy script (short-hand for non-segwit, not NOPs) is a dumpster fire, and it shouldn\u2019t be touched unless necessary.\n\nIf it saves no vbytes, makes no operations safer, doesn\u2019t make the changes easier to understand for reviewers, why would we build it this way?\n[/quote]\n\nI do not disagree that we should avoid to go for legacy script, avoids making the DoS surface worst (e.g worst-block case). I'm re-reading BIP119 though there is no footnote to explain why `OP_NOP4` vs another upgrade path (e.g tapleaf version or `OP_SUCCESS`).\n\nDoing an OP_PUSH `<template>` instead of a OP_CHECK `<template>`, that means now you have a comparison on the Script stack to be done between `<pushed_template>` and `<reference_template>`. I do no think something in terms of `<template>` *bad malleability* it's an issue (hmm...), however it's more memory allocated among the different script ops on the stack by each full-nodes. Not sure it's a concern.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 5,
  "hidden": false,
  "trust_level": 3,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
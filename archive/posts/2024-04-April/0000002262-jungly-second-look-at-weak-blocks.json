{
  "id": 2262,
  "name": "jungly",
  "username": "jungly",
  "avatar_template": "/user_avatar/delvingbitcoin.org/jungly/{size}/289_2.png",
  "created_at": "2024-04-18T07:16:55.801Z",
  "cooked": "<p>Hi instagibbs,</p>\n<aside class=\"quote no-group\" data-username=\"instagibbs\" data-post=\"1\" data-topic=\"805\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/instagibbs/48/28_2.png\" class=\"avatar\"> instagibbs:</div>\n<blockquote>\n<p>Re-use a variant of <a href=\"https://github.com/bitcoin/bips/blob/b3701faef2bdb98a0d7ace4eedbeefa2da4c89ed/bip-0152.mediawiki\" rel=\"noopener nofollow ugc\">compact blocks messages </a> to support propagation of \u201cweak compact blocks\u201d. Don\u2019t make a DAG or require consensus over these messages, just use them as a DoS-resistant messaging layer for things miners appear to be working on.</p>\n</blockquote>\n</aside>\n<p>Not requiring consensus on these is a good move here.</p>\n<p>As I understand your proposal, the idea is that we use weak blocks, propagated using compact block specs to make sure all nodes pull in any missing transactions. Is that right? If so, the proposal could be called a proposal to check-point transaction propagation across the network.</p>\n<h2><a name=\"validation-1\" class=\"anchor\" href=\"#validation-1\"></a>Validation</h2>\n<p>When we validate a chain of weak blocks, we need to enable support for propagating weak blocks. You raise this point as your second question. It also slows down validation of weak blocks while waiting for filling holes in the past.</p>\n<p>Instead, if each weak block directly refers to the last confirmed bitcoin block, then we don\u2019t need to validate a chain of weak blocks and we can eliminate questions about retaining weak blocks. We also know for sure we don\u2019t need to fill any holes before validating weak blocks as everyone has the last strong block.</p>\n<p>In the diagram below, if some node receives <code>Weak-Block3</code>, they don\u2019t need to ask for <code>Weak-Block2</code> before they can validate <code>Weak-Block3</code>. We are taking just this approach in Braidpool as described in an <a href=\"https://github.com/pool2win/braidpool/blob/8d0724f9fb191ddbd5e02afa20f847fc0249f128/proposal/proposal.pdf\" rel=\"noopener nofollow ugc\">early proposal</a>.</p>\n<pre data-code-height=\"322\" data-code-wrap=\"mermaid\"><code class=\"lang-mermaid\">    flowchart LR\n          BTC-Block  --&gt; wb1{{Weak-Block1}}\n          BTC-Block  --&gt; wb2{{Weak-Block2}}\n          BTC-Block  --&gt; wb3{{Weak-Block3}}\n          BTC-Block  --&gt; BTC-Block2\n</code></pre>\n<p>With the above approach, all nodes are synching their state every time they receive a weak block. Also the delta between weak blocks will be smaller than the delta between strong blocks, so that when a strong block arrives, there is much less history to fill.</p>\n<p>I hope I am not missing a subtle point in your proposal that is making me miss the bigger picture.</p>\n<p>Best regards</p>",
  "post_number": 4,
  "post_type": 1,
  "updated_at": "2024-04-18T07:16:55.801Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 1,
  "incoming_link_count": 0,
  "reads": 16,
  "readers_count": 15,
  "score": 18.2,
  "yours": false,
  "topic_id": 805,
  "topic_slug": "second-look-at-weak-blocks",
  "topic_title": "Second Look at Weak Blocks",
  "topic_html_title": "Second Look at Weak Blocks",
  "category_id": 8,
  "display_username": "jungly",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "Hi instagibbs,\n\n[quote=\"instagibbs, post:1, topic:805\"]\nRe-use a variant of [compact blocks messages ](https://github.com/bitcoin/bips/blob/b3701faef2bdb98a0d7ace4eedbeefa2da4c89ed/bip-0152.mediawiki) to support propagation of \u201cweak compact blocks\u201d. Don\u2019t make a DAG or require consensus over these messages, just use them as a DoS-resistant messaging layer for things miners appear to be working on.\n[/quote]\n\nNot requiring consensus on these is a good move here.\n\nAs I understand your proposal, the idea is that we use weak blocks, propagated using compact block specs to make sure all nodes pull in any missing transactions. Is that right? If so, the proposal could be called a proposal to check-point transaction propagation across the network.\n\n## Validation\n\nWhen we validate a chain of weak blocks, we need to enable support for propagating weak blocks. You raise this point as your second question. It also slows down validation of weak blocks while waiting for filling holes in the past.\n\nInstead, if each weak block directly refers to the last confirmed bitcoin block, then we don't need to validate a chain of weak blocks and we can eliminate questions about retaining weak blocks. We also know for sure we don't need to fill any holes before validating weak blocks as everyone has the last strong block.\n\nIn the diagram below, if some node receives `Weak-Block3`, they don't need to ask for `Weak-Block2` before they can validate `Weak-Block3`. We are taking just this approach in Braidpool as described in an [early proposal](https://github.com/pool2win/braidpool/blob/8d0724f9fb191ddbd5e02afa20f847fc0249f128/proposal/proposal.pdf).\n                  \n```mermaid height=322,auto\n    flowchart LR\n          BTC-Block  --> wb1{{Weak-Block1}}\n          BTC-Block  --> wb2{{Weak-Block2}}\n          BTC-Block  --> wb3{{Weak-Block3}}\n          BTC-Block  --> BTC-Block2\n```\n\nWith the above approach, all nodes are synching their state every time they receive a weak block. Also the delta between weak blocks will be smaller than the delta between strong blocks, so that when a strong block arrives, there is much less history to fill.\n\nI hope I am not missing a subtle point in your proposal that is making me miss the bigger picture.\n\nBest regards",
  "actions_summary": [
    {
      "id": 2,
      "count": 1
    }
  ],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 102,
  "hidden": false,
  "trust_level": 2,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [
    {
      "id": "+1",
      "type": "emoji",
      "count": 1
    }
  ],
  "current_user_reaction": null,
  "reaction_users_count": 1,
  "current_user_used_main_reaction": false
}
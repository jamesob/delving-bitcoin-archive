{
  "id": 2133,
  "name": "Abubakar Sadiq Ismail",
  "username": "ismaelsadeeq",
  "avatar_template": "/user_avatar/delvingbitcoin.org/ismaelsadeeq/{size}/151_2.png",
  "created_at": "2024-04-02T14:30:11.825Z",
  "cooked": "<blockquote>\n<p>but underestimating in over a quarter of the cases would sounds a bit painful for a user that wants to only submit an initial attempt.</p>\n</blockquote>\n<p>The times when fee rate estimates did not make it are mostly when (the time of block discovery - the time of estimate) is &gt; 10 minutes.</p>\n<p>As I observed, the spikes are mostly due to congestion periods.</p>\n<p>In most cases, when the blue estimates where overestimating, it\u2019s within the block range. However, yes, paying a lower fee rate might get the transaction in, but with high likelihood of getting bumped out.</p>\n<blockquote>\n<p>In particular an estimate of 150 sat/vb vs 75 sat/vb (the blue spike at the end) is probably about equally bad as a 50 sat/vb vs 25 sat/vb (the yellow overestimate for a while at the beginning).</p>\n</blockquote>\n<p>The estimate of <code>150 sat/vB</code> (50th Percentile fee rate of expected block) you indicated is for block <code>832478</code>.</p>\n<p>The block <code>832478</code> after its Confirmed has 50th Percentile fee rate of <code>150 sat/vB</code>, which means this estimate was accurate.</p>\n<p>The block\u2019s high end used to plot the point in the graph is the <code>75th</code> Percentile, which is <code>178 sat/vB</code>.\nThe block\u2019s low end (5th Percentile) is <code>60 sat/vB</code>.</p>\n<p>The block has average fee rate of  ~<code>170 sat/vB</code>.</p>\n<p>We could reduce the percentile we do estimate to maybe the 25th percentile, which is <code>130 sat/vB</code> in this case, but there is a likelihood of getting bumped out if the time it takes the block to confirm after we make estimate is &gt; 10 minutes, and the weight of transactions with a mining score &gt; <code>130 sat/vB</code> that entered the mempool after we made our estimate are also &gt; 25th Percentile of <code>4,000,000</code>.\nThe choice of the 50th percentile is to reduce the chances of getting bumped out.</p>\n<p>In the case of the yellow overestimations at the beginning, it is unlike the blue once because what you are paying is beyond the block fee rate ranges. (i.e you will pay for the block space more that other people are paying)</p>\n<p>I have modified the plotting. It can now return both linear and log scales for the y-axis.</p>\n<p>Here is how it looks now without the threshold:\n<code>plot_estimates(832331, 832500, data, logscale_yaxis=True)</code></p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://delvingbitcoin.org/uploads/default/original/1X/2f7a29d126f8c22c3507cdb4be253309035be65d.png\" data-download-href=\"https://delvingbitcoin.org/uploads/default/2f7a29d126f8c22c3507cdb4be253309035be65d\" title=\"log_scale_on_y_axis_without_threshold\"><img src=\"https://delvingbitcoin.org/uploads/default/optimized/1X/2f7a29d126f8c22c3507cdb4be253309035be65d_2_690x417.png\" alt=\"log_scale_on_y_axis_without_threshold\" data-base62-sha1=\"6M0aQdVU6i3L63T4ZQdyjhI8yYJ\" width=\"690\" height=\"417\" srcset=\"https://delvingbitcoin.org/uploads/default/optimized/1X/2f7a29d126f8c22c3507cdb4be253309035be65d_2_690x417.png, https://delvingbitcoin.org/uploads/default/optimized/1X/2f7a29d126f8c22c3507cdb4be253309035be65d_2_1035x625.png 1.5x, https://delvingbitcoin.org/uploads/default/optimized/1X/2f7a29d126f8c22c3507cdb4be253309035be65d_2_1380x834.png 2x\" data-dominant-color=\"E6E6EA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">log_scale_on_y_axis_without_threshold</span><span class=\"informations\">1800\u00d71090 105 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>Here is the graph with the threshold when y axis is in log scale:</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://delvingbitcoin.org/uploads/default/original/1X/56f3ba26c0184521c42bb82ec9d8c9f2224d4f8e.png\" data-download-href=\"https://delvingbitcoin.org/uploads/default/56f3ba26c0184521c42bb82ec9d8c9f2224d4f8e\" title=\"log_scale_on_y_axis_with_threshold\"><img src=\"https://delvingbitcoin.org/uploads/default/optimized/1X/56f3ba26c0184521c42bb82ec9d8c9f2224d4f8e_2_690x417.png\" alt=\"log_scale_on_y_axis_with_threshold\" data-base62-sha1=\"cpdfdC7ktK65Q45z2t48jhK81Cm\" width=\"690\" height=\"417\" srcset=\"https://delvingbitcoin.org/uploads/default/optimized/1X/56f3ba26c0184521c42bb82ec9d8c9f2224d4f8e_2_690x417.png, https://delvingbitcoin.org/uploads/default/optimized/1X/56f3ba26c0184521c42bb82ec9d8c9f2224d4f8e_2_1035x625.png 1.5x, https://delvingbitcoin.org/uploads/default/optimized/1X/56f3ba26c0184521c42bb82ec9d8c9f2224d4f8e_2_1380x834.png 2x\" data-dominant-color=\"E7E7EA\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">log_scale_on_y_axis_with_threshold</span><span class=\"informations\">1800\u00d71090 102 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
  "post_number": 11,
  "post_type": 1,
  "updated_at": "2024-04-02T14:34:40.402Z",
  "reply_count": 0,
  "reply_to_post_number": 10,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 12,
  "readers_count": 11,
  "score": 47.0,
  "yours": false,
  "topic_id": 703,
  "topic_slug": "mempool-based-fee-estimation-on-bitcoin-core",
  "topic_title": "Mempool Based Fee Estimation on Bitcoin Core",
  "topic_html_title": "Mempool Based Fee Estimation on Bitcoin Core",
  "category_id": 8,
  "display_username": "Abubakar Sadiq Ismail",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "reply_to_user": {
    "username": "ajtowns",
    "name": "Anthony Towns",
    "avatar_template": "/user_avatar/delvingbitcoin.org/ajtowns/{size}/417_2.png"
  },
  "bookmarked": false,
  "raw": "> but underestimating in over a quarter of the cases would sounds a bit painful for a user that wants to only submit an initial attempt.\n\nThe times when fee rate estimates did not make it are mostly when (the time of block discovery - the time of estimate) is > 10 minutes.\n\n\n\nAs I observed, the spikes are mostly due to congestion periods.\n\nIn most cases, when the blue estimates where overestimating, it's within the block range. However, yes, paying a lower fee rate might get the transaction in, but with high likelihood of getting bumped out.\n\n> In particular an estimate of 150 sat/vb vs 75 sat/vb (the blue spike at the end) is probably about equally bad as a 50 sat/vb vs 25 sat/vb (the yellow overestimate for a while at the beginning).\n\nThe estimate of `150 sat/vB` (50th Percentile fee rate of expected block) you indicated is for block `832478`.\n\nThe block `832478` after its Confirmed has 50th Percentile fee rate of `150 sat/vB`, which means this estimate was accurate.\n\nThe block's high end used to plot the point in the graph is the `75th` Percentile, which is `178 sat/vB`.\nThe block's low end (5th Percentile) is `60 sat/vB`.\n\nThe block has average fee rate of  ~`170 sat/vB`.\n\nWe could reduce the percentile we do estimate to maybe the 25th percentile, which is `130 sat/vB` in this case, but there is a likelihood of getting bumped out if the time it takes the block to confirm after we make estimate is > 10 minutes, and the weight of transactions with a mining score > `130 sat/vB` that entered the mempool after we made our estimate are also > 25th Percentile of `4,000,000`.\nThe choice of the 50th percentile is to reduce the chances of getting bumped out.\n\nIn the case of the yellow overestimations at the beginning, it is unlike the blue once because what you are paying is beyond the block fee rate ranges. (i.e you will pay for the block space more that other people are paying)\n\n\nI have modified the plotting. It can now return both linear and log scales for the y-axis.\n\nHere is how it looks now without the threshold:\n`plot_estimates(832331, 832500, data, logscale_yaxis=True)`\n\n![log_scale_on_y_axis_without_threshold|690x417](upload://6M0aQdVU6i3L63T4ZQdyjhI8yYJ.png)\n\nHere is the graph with the threshold when y axis is in log scale:\n\n![log_scale_on_y_axis_with_threshold|690x417](upload://cpdfdC7ktK65Q45z2t48jhK81Cm.png)",
  "actions_summary": [
    {
      "id": 2,
      "count": 1
    }
  ],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 135,
  "hidden": false,
  "trust_level": 1,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [
    {
      "id": "+1",
      "type": "emoji",
      "count": 1
    }
  ],
  "current_user_reaction": null,
  "reaction_users_count": 1,
  "current_user_used_main_reaction": false
}
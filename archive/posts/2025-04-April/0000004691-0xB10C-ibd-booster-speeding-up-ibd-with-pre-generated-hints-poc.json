{
  "id": 4691,
  "name": "0xB10C",
  "username": "0xB10C",
  "avatar_template": "/user_avatar/delvingbitcoin.org/0xb10c/{size}/15_2.png",
  "created_at": "2025-04-03T10:58:20.284Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"RubenSomsen\" data-post=\"2\" data-topic=\"1562\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/rubensomsen/48/188_2.png\" class=\"avatar\"> RubenSomsen:</div>\n<blockquote>\n<p>And one point of lesser importance, but it\u2019s simple to implement so why not: you can encode the bit hints as the number of 0\u2019s before each 1. So 00010000011001 would be encoded as 3,5,0,2. There is more you can do, but this should already save a ton of space.</p>\n</blockquote>\n</aside>\n<p>I remember thinking about this when first hearing about IBD booster / SwiftSync and just had a quick and dirty look at using delta / differential encoding together with CompactSize and VarInt\u2019s in this <a href=\"https://gist.github.com/0xB10C/01900837f92e48da4800e57152ef2a1d\">notebook</a>. This seems to half the size of the uncompressed data. Though, as the hints will likely be distributed compressed and the <code>xz</code> compressed data is about the same size for all combinations, I\u2019m not sure if it\u2019s worth to differentially encode it.</p>\n<div class=\"md-table\">\n<table>\n<thead>\n<tr>\n<th>filename</th>\n<th>size (bytes)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>booster850900.bin</td>\n<td>364964716</td>\n</tr>\n<tr>\n<td>differential_compact_size.bin</td>\n<td>188209875</td>\n</tr>\n<tr>\n<td>differential_varint.bin</td>\n<td>190098381</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>booster850900.bin.xz</td>\n<td>87882052</td>\n</tr>\n<tr>\n<td>differential_compact_size.bin.xz</td>\n<td>81697540</td>\n</tr>\n<tr>\n<td>differential_varint.bin.xz</td>\n<td>81321492</td>\n</tr>\n</tbody>\n</table>\n</div><p>Note that most of the median deltas are below 253 and encodable with a 1 byte CompactSize:\n<div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://delvingbitcoin.org/uploads/default/original/2X/e/e8d1fecea28049fd0aee6ae9fa834ef7041f3c5d.png\" data-download-href=\"https://delvingbitcoin.org/uploads/default/e8d1fecea28049fd0aee6ae9fa834ef7041f3c5d\" title=\"image\"><img src=\"https://delvingbitcoin.org/uploads/default/original/2X/e/e8d1fecea28049fd0aee6ae9fa834ef7041f3c5d.png\" alt=\"image\" data-base62-sha1=\"xdCGxjytrHxfH80WKhEO2vTZVq5\" width=\"570\" height=\"432\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">image</span><span class=\"informations\">570\u00d7432 85.6 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>",
  "post_number": 4,
  "post_type": 1,
  "updated_at": "2025-04-03T10:58:20.284Z",
  "reply_count": 0,
  "reply_to_post_number": 2,
  "quote_count": 1,
  "incoming_link_count": 1,
  "reads": 13,
  "readers_count": 12,
  "score": 52.2,
  "yours": false,
  "topic_id": 1562,
  "topic_slug": "ibd-booster-speeding-up-ibd-with-pre-generated-hints-poc",
  "topic_title": "IBD Booster -- Speeding up IBD with pre-generated hints (PoC)",
  "topic_html_title": "IBD Booster &ndash; Speeding up IBD with pre-generated hints (PoC)",
  "category_id": 8,
  "display_username": "0xB10C",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"RubenSomsen, post:2, topic:1562\"]\nAnd one point of lesser importance, but it\u2019s simple to implement so why not: you can encode the bit hints as the number of 0\u2019s before each 1. So 00010000011001 would be encoded as 3,5,0,2. There is more you can do, but this should already save a ton of space.\n[/quote]\n\nI remember thinking about this when first hearing about IBD booster / SwiftSync and just had a quick and dirty look at using delta / differential encoding together with CompactSize and VarInt's in this [notebook](https://gist.github.com/0xB10C/01900837f92e48da4800e57152ef2a1d). This seems to half the size of the uncompressed data. Though, as the hints will likely be distributed compressed and the `xz` compressed data is about the same size for all combinations, I'm not sure if it's worth to differentially encode it. \n\n| filename                          | size (bytes)      |\n|-----------------------------------|------------|\n| booster850900.bin                 | 364964716  |\n| differential_compact_size.bin     | 188209875  |\n| differential_varint.bin           | 190098381  |\n|            |   |\n|            |   |\n|            |   |\n| booster850900.bin.xz              | 87882052   |\n| differential_compact_size.bin.xz  | 81697540   |\n| differential_varint.bin.xz        | 81321492   |\n\nNote that most of the median deltas are below 253 and encodable with a 1 byte CompactSize: \n![image|570x432](upload://xdCGxjytrHxfH80WKhEO2vTZVq5.png)",
  "actions_summary": [
    {
      "id": 2,
      "count": 1
    }
  ],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 16,
  "hidden": false,
  "trust_level": 3,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [
    {
      "id": "+1",
      "type": "emoji",
      "count": 1
    }
  ],
  "current_user_reaction": null,
  "reaction_users_count": 1,
  "current_user_used_main_reaction": false
}
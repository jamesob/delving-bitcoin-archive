{
  "id": 4702,
  "name": null,
  "username": "Purpletimez2",
  "avatar_template": "/letter_avatar_proxy/v4/letter/p/a88e57/{size}.png",
  "created_at": "2025-04-05T12:52:46.569Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"carla\" data-post=\"7\" data-topic=\"1147\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/carla/48/119_2.png\" class=\"avatar\"> carla:</div>\n<blockquote>\n<p>See here for a full outline of how we ran the attack.</p>\n</blockquote>\n</aside>\n<pre><code class=\"lang-auto\">\n\n\n\n                -----------------           -------------------\n                |               |           |                 |\n                |  target node  |-----------|  peer's target  |\n                |_______________|           |_________________|\n                        |                       /\n                 slow jammed HTLC              /\n                        |                     /\n                -----------------       \"hijack\" channel\n                |               |           /\n                |  attack node  |----------/\n                |_______________|\n                        |\n                        |\n                ------------------\n                |                |\n                |  largest node  |\n                |________________|\n\n</code></pre>\n<p>HTLCs are flowing from the peer\u2019s target to largest node.</p>\n<p>Re-reading the description of a sink attack, I think the simplest graph that one can come for the numerical analysis of a sink attack and its mitigation, which is still retaining what is understood as a sink attack. I believe it\u2019s not needed to connect neighbor\u2019s peers, Occam\u2019s razor to follow.</p>\n<aside class=\"quote no-group\" data-username=\"ClaraShk\" data-post=\"11\" data-topic=\"1147\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/clarashk/48/370_2.png\" class=\"avatar\"> ClaraShk:</div>\n<blockquote>\n<pre><code class=\"lang-auto\"># Calculate reputation delta\ndf_filtered['reputation_delta'] = (\n    df_filtered['outgoing_reputation'] - df_filtered['in_flight_risk'] \n    - df_filtered['htlc_risk'] - df_filtered['incoming_revenue']\n)\n</code></pre>\n</blockquote>\n</aside>\n<p>There is at least one easily observable limitation with what this reputation delta formula is aiming to model, as if <code>in_flight_risk</code> is equal at the sum of the <code>outstanding_risk</code> of each non-endorsed HTLC (i.e with <code>outstanding_risk = </code>fees<code> * ((</code>cltv_expiry<code>-</code>height_added<code>) * 10 * 60) / </code>resolution_period<code>and</code>htlc_risk<code>is equal to the sum of the</code>outstanding_risk<code>of each non-endorsed HTLC on the channel, there is no guarantee that the</code>height_added` for a HTLC forward is the same on the outgoing channel.</p>\n<p>Block propagation can be observed on the block-relay network, so a jamming attack could profit of the +1 of a block diff in some ways.</p>\n<p>This is also a good question if heuristically the <code>htlc_risk</code> shouldn\u2019t be put as a <em>positive credit</em> to the outgoing reputation, as yet-to-be settled HTLC might bump or not the <code>incoming_revenue</code> of the outgoing chan.</p>\n<aside class=\"quote no-group\" data-username=\"ClaraShk\" data-post=\"11\" data-topic=\"1147\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/clarashk/48/370_2.png\" class=\"avatar\"> ClaraShk:</div>\n<blockquote>\n<p>For honest node A to be able to send endorsed payments to <code>T</code>, they need to have paid <code>T</code> enough in the last 6 months over <code>A-T</code> to compensate them for their revenue from <code>T-B</code>. So while <code>T</code> hasn\u2019t been paid by the attacker, they\u2019ve still been compensated for the damage that abusing that reputation can do.</p>\n</blockquote>\n</aside>\n<p>I believe the node T, when it\u2019s making a decision to forward HTLC on <code>T-B</code> should also weight the potential traffic on hypothetical <code>A\u2019-T</code> that might be go through <code>T-B</code> at the same time than traffic from <code>A-T</code>. Intuitively, one could think that the decaying average delta should be dynamically scaled up or scaled down when there is some measured-on-all-incoming-chan congestion.</p>",
  "post_number": 12,
  "post_type": 1,
  "posts_count": 12,
  "updated_at": "2025-04-05T12:52:46.569Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 2,
  "incoming_link_count": 0,
  "reads": 8,
  "readers_count": 7,
  "score": 1.6,
  "yours": false,
  "topic_id": 1147,
  "topic_slug": "hybrid-jamming-mitigation-results-and-updates",
  "topic_title": "Hybrid Jamming Mitigation: Results and Updates",
  "topic_html_title": "Hybrid Jamming Mitigation: Results and Updates",
  "category_id": 7,
  "display_username": null,
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"carla, post:7, topic:1147\"]\nSee here for a full outline of how we ran the attack.\n[/quote]\n\n```\n\n\n\n\n                -----------------           -------------------\n                |               |           |                 |\n                |  target node  |-----------|  peer's target  |\n                |_______________|           |_________________|\n                        |                       /\n                 slow jammed HTLC              /\n                        |                     /\n                -----------------       \"hijack\" channel\n                |               |           /\n                |  attack node  |----------/\n                |_______________|\n                        |\n                        |\n                ------------------\n                |                |\n                |  largest node  |\n                |________________|\n\n```\n\nHTLCs are flowing from the peer\u2019s target to largest node.\n\n\nRe-reading the description of a sink attack, I think the simplest graph that one can come for the numerical analysis of a sink attack and its mitigation, which is still retaining what is understood as a sink attack. I believe it\u2019s not needed to connect neighbor\u2019s peers, Occam\u2019s razor to follow.\n\n[quote=\"ClaraShk, post:11, topic:1147\"]\n```\n# Calculate reputation delta\ndf_filtered['reputation_delta'] = (\n    df_filtered['outgoing_reputation'] - df_filtered['in_flight_risk'] \n    - df_filtered['htlc_risk'] - df_filtered['incoming_revenue']\n)\n```\n[/quote]\n\nThere is at least one easily observable limitation with what this reputation delta formula is aiming to model, as if `in_flight_risk` is equal at the sum of the `outstanding_risk` of each non-endorsed HTLC (i.e with `outstanding_risk = `fees` * ((`cltv_expiry` - `height_added`) * 10 * 60) / `resolution_period` and `htlc_risk` is equal to the sum of the `outstanding_risk` of each non-endorsed HTLC on the channel, there is no guarantee that the `height_added` for a HTLC forward is the same on the outgoing channel.\n\nBlock propagation can be observed on the block-relay network, so a jamming attack could profit of the +1 of a block diff in some ways.\n\nThis is also a good question if heuristically the `htlc_risk` shouldn\u2019t be put as a *positive credit* to the outgoing reputation, as yet-to-be settled HTLC might bump or not the `incoming_revenue` of the outgoing chan.\n\n[quote=\"ClaraShk, post:11, topic:1147\"]\nFor honest node A to be able to send endorsed payments to `T`, they need to have paid `T` enough in the last 6 months over `A-T` to compensate them for their revenue from `T-B`. So while `T` hasn\u2019t been paid by the attacker, they\u2019ve still been compensated for the damage that abusing that reputation can do.\n[/quote]\n\nI believe the node T, when it's making a decision to forward HTLC on `T-B` should also weight the potential traffic on hypothetical `A\u2019-T` that might be go through `T-B` at the same time than traffic from `A-T`. Intuitively, one could think that the decaying average delta should be dynamically scaled up or scaled down when there is some measured-on-all-incoming-chan congestion.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 715,
  "hidden": false,
  "trust_level": 0,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "-----------------           -------------------\n                |               |           |                 |\n                |  target node  |-----------|  peer&#39;s target  |\n                |_______________|           |_________________|\n                        |              &hellip;",
  "truncated": true,
  "post_url": "/t/hybrid-jamming-mitigation-results-and-updates/1147/12",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
{
  "id": 4880,
  "name": "Victor Kolobov",
  "username": "victorkstarkware",
  "avatar_template": "/user_avatar/delvingbitcoin.org/victorkstarkware/{size}/772_2.png",
  "created_at": "2025-04-27T12:45:15.574Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"Laz1m0v\" data-post=\"2\" data-topic=\"1106\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/laz1m0v/48/1025_2.png\" class=\"avatar\"> Laz1m0v:</div>\n<blockquote>\n<p>This assertion is true but it can be done through Indexers and trackers.</p>\n</blockquote>\n</aside>\n<p>Not sure what \u201cit\u201d means here</p>\n<aside class=\"quote no-group\" data-username=\"Laz1m0v\" data-post=\"2\" data-topic=\"1106\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/laz1m0v/48/1025_2.png\" class=\"avatar\"> Laz1m0v:</div>\n<blockquote>\n<p>Do node will directly store each states? Do we would need to build covenants trackers into the node?</p>\n</blockquote>\n</aside>\n<p>The state is stored onchain. You would need to track the transaction at the tip of the \u201csmart contract\u201d chain</p>\n<aside class=\"quote no-group\" data-username=\"Laz1m0v\" data-post=\"2\" data-topic=\"1106\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/laz1m0v/48/1025_2.png\" class=\"avatar\"> Laz1m0v:</div>\n<blockquote>\n<p>The use of term <strong>covenant</strong> looks especially crafted to avoid the use of \u201csmart contract\u201d (SC) term which is not well defined especially in this case.</p>\n</blockquote>\n</aside>\n<aside class=\"quote no-group\" data-username=\"Laz1m0v\" data-post=\"2\" data-topic=\"1106\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/laz1m0v/48/1025_2.png\" class=\"avatar\"> Laz1m0v:</div>\n<blockquote>\n<p>This can\u2019t be assumed as long as there is no precise definition of a smart contract in the post and the automatic trigger of a SC is not shown.</p>\n</blockquote>\n</aside>\n<p>There is a loose definition for \u201csmart contract\u201d in the text:</p>\n<blockquote>\n<p>A smart contract here means some sort of stateful logic, with a collection of functions that can be invoked to transition the state to a different, valid one, according to predefined rules.</p>\n</blockquote>\n<aside class=\"quote no-group\" data-username=\"Laz1m0v\" data-post=\"2\" data-topic=\"1106\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/laz1m0v/48/1025_2.png\" class=\"avatar\"> Laz1m0v:</div>\n<blockquote>\n<p>Will you be able to trigger automatically new transactions with your implementation? I don\u2019t think so, and this implies that the \u201csmart contract capabilities\u201d are not fully embraced. We don\u2019t have <code>OP_CALL</code> on Bitcoin and as with OP_CAT we won\u2019t be able to trigger from the protocol level new transactions (or at least it\u2019s not discussed in your post).</p>\n</blockquote>\n</aside>\n<p>Correct, this \u201csmart contract\u201d doesn\u2019t have all the capabilities of smart contracts from other blockchains. I am open to suggestions for a better name for this functionality (i.e. an SC but without the ability to call other SCs)</p>\n<aside class=\"quote no-group\" data-username=\"Laz1m0v\" data-post=\"2\" data-topic=\"1106\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/laz1m0v/48/1025_2.png\" class=\"avatar\"> Laz1m0v:</div>\n<blockquote>\n<p>You remind what UTXO model is but you don\u2019t explain the proof computation in STARK models neither a general definition of STARK which seems more important.</p>\n</blockquote>\n</aside>\n<p>There is whole discussion dedicated to proof systems and delegated computation (of which a STARK is a particular example) in Section 6. Going into more details about STARKs specifically is distracting in my opinion.</p>\n<aside class=\"quote no-group\" data-username=\"Laz1m0v\" data-post=\"2\" data-topic=\"1106\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/laz1m0v/48/1025_2.png\" class=\"avatar\"> Laz1m0v:</div>\n<blockquote>\n<p>Do you mean the Bitcoin covenant?</p>\n</blockquote>\n</aside>\n<p>No, I mean a smart contract as loosely defined above.</p>\n<aside class=\"quote no-group\" data-username=\"Laz1m0v\" data-post=\"2\" data-topic=\"1106\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/laz1m0v/48/1025_2.png\" class=\"avatar\"> Laz1m0v:</div>\n<blockquote>\n<p>Where does this value come from?</p>\n</blockquote>\n</aside>\n<p>From StarkWare, whose proof systems in production have settled over $1T</p>\n<aside class=\"quote no-group\" data-username=\"Laz1m0v\" data-post=\"2\" data-topic=\"1106\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/laz1m0v/48/1025_2.png\" class=\"avatar\"> Laz1m0v:</div>\n<blockquote>\n<p>All the previous sections mention SC/convenants but never OP_CAT does it mean that covenants can be done without OP_CAT?</p>\n</blockquote>\n</aside>\n<p>See the text in the introduction:</p>\n<blockquote>\n<p>Finally, we\u2019ll discuss OP_CAT and how it enables the tools mentioned above. We\u2019ll also reference some of our efforts in this direction and discuss what\u2019s to come.</p>\n</blockquote>\n<p>I don\u2019t know how to achieve the same type of construction with other opcodes, see my comment to moonsettler above.</p>\n<aside class=\"quote no-group\" data-username=\"Laz1m0v\" data-post=\"2\" data-topic=\"1106\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/laz1m0v/48/1025_2.png\" class=\"avatar\"> Laz1m0v:</div>\n<blockquote>\n<p>Does it mean that your covenants will be implemented in P2WSH? How exactly the Schnorr trick compensates for the absence of address tweaking? How state tracking would be managed at the node level?</p>\n</blockquote>\n</aside>\n<p>Not sure I understand the Schnorr trick question.</p>\n<p>Regarding state tracking, there is a freedom of choice on where to store the hash preimage. If it is small, you could provide the hash preimage in the tx witness. If it\u2019s large, perhaps it needs to be split across multiple tx, which is also doable and out of scope for the article.</p>\n<aside class=\"quote no-group\" data-username=\"Laz1m0v\" data-post=\"2\" data-topic=\"1106\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/laz1m0v/48/1025_2.png\" class=\"avatar\"> Laz1m0v:</div>\n<blockquote>\n<p>Where states can be verified?</p>\n</blockquote>\n</aside>\n<p>Not sure I understand the question</p>\n<aside class=\"quote no-group\" data-username=\"Laz1m0v\" data-post=\"2\" data-topic=\"1106\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/laz1m0v/48/1025_2.png\" class=\"avatar\"> Laz1m0v:</div>\n<blockquote>\n<p>Please stop mentioning Bitcoin smart contract it\u2019s horrible and factually wrong. We have a word for this it\u2019s covenants.</p>\n</blockquote>\n</aside>\n<p>I disagree. A covenant is a well-known concept that is used as a tool to build smart contracts, as loosely defined above.</p>",
  "post_number": 5,
  "post_type": 1,
  "posts_count": 8,
  "updated_at": "2025-04-27T12:45:15.574Z",
  "reply_count": 1,
  "reply_to_post_number": 2,
  "quote_count": 1,
  "incoming_link_count": 24,
  "reads": 19,
  "readers_count": 18,
  "score": 128.8,
  "yours": false,
  "topic_id": 1106,
  "topic_slug": "the-path-to-general-computation-on-bitcoin-with-op-cat",
  "topic_title": "The path to general computation on Bitcoin (with OP_CAT)",
  "topic_html_title": "The path to general computation on Bitcoin (with OP_CAT)",
  "category_id": 8,
  "display_username": "Victor Kolobov",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": "",
  "bookmarked": false,
  "raw": "[quote=\"Laz1m0v, post:2, topic:1106, full:true\"]\nThis assertion is true but it can be done through Indexers and trackers.\n[/quote]\nNot sure what \"it\" means here\n\n[quote=\"Laz1m0v, post:2, topic:1106, full:true\"]\nDo node will directly store each states? Do we would need to build covenants trackers into the node?\n[/quote]\nThe state is stored onchain. You would need to track the transaction at the tip of the \"smart contract\" chain\n\n[quote=\"Laz1m0v, post:2, topic:1106, full:true\"]\nThe use of term **covenant** looks especially crafted to avoid the use of \u201csmart contract\u201d (SC) term which is not well defined especially in this case.\n[/quote]\n[quote=\"Laz1m0v, post:2, topic:1106, full:true\"]\nThis can\u2019t be assumed as long as there is no precise definition of a smart contract in the post and the automatic trigger of a SC is not shown.\n[/quote]\nThere is a loose definition for \"smart contract\" in the text:\n> A smart contract here means some sort of stateful logic, with a collection of functions that can be invoked to transition the state to a different, valid one, according to predefined rules.\n\n[quote=\"Laz1m0v, post:2, topic:1106, full:true\"]\nWill you be able to trigger automatically new transactions with your implementation? I don\u2019t think so, and this implies that the \u201csmart contract capabilities\u201d are not fully embraced. We don\u2019t have `OP_CALL` on Bitcoin and as with OP_CAT we won\u2019t be able to trigger from the protocol level new transactions (or at least it\u2019s not discussed in your post).\n[/quote]\nCorrect, this \"smart contract\" doesn't have all the capabilities of smart contracts from other blockchains. I am open to suggestions for a better name for this functionality (i.e. an SC but without the ability to call other SCs)\n\n[quote=\"Laz1m0v, post:2, topic:1106, full:true\"]\nYou remind what UTXO model is but you don\u2019t explain the proof computation in STARK models neither a general definition of STARK which seems more important.\n[/quote]\nThere is whole discussion dedicated to proof systems and delegated computation (of which a STARK is a particular example) in Section 6. Going into more details about STARKs specifically is distracting in my opinion.\n\n[quote=\"Laz1m0v, post:2, topic:1106, full:true\"]\nDo you mean the Bitcoin covenant?\n[/quote]\nNo, I mean a smart contract as loosely defined above.\n\n[quote=\"Laz1m0v, post:2, topic:1106, full:true\"]\nWhere does this value come from?\n[/quote]\nFrom StarkWare, whose proof systems in production have settled over $1T\n\n[quote=\"Laz1m0v, post:2, topic:1106, full:true\"]\nAll the previous sections mention SC/convenants but never OP_CAT does it mean that covenants can be done without OP_CAT?\n[/quote]\nSee the text in the introduction:\n> Finally, we\u2019ll discuss OP_CAT and how it enables the tools mentioned above. We\u2019ll also reference some of our efforts in this direction and discuss what\u2019s to come.\n\nI don't know how to achieve the same type of construction with other opcodes, see my comment to moonsettler above.\n\n[quote=\"Laz1m0v, post:2, topic:1106, full:true\"]\nDoes it mean that your covenants will be implemented in P2WSH? How exactly the Schnorr trick compensates for the absence of address tweaking? How state tracking would be managed at the node level?\n[/quote]\nNot sure I understand the Schnorr trick question.\n\nRegarding state tracking, there is a freedom of choice on where to store the hash preimage. If it is small, you could provide the hash preimage in the tx witness. If it's large, perhaps it needs to be split across multiple tx, which is also doable and out of scope for the article.\n\n[quote=\"Laz1m0v, post:2, topic:1106, full:true\"]\nWhere states can be verified?\n[/quote]\nNot sure I understand the question\n\n[quote=\"Laz1m0v, post:2, topic:1106, full:true\"]\nPlease stop mentioning Bitcoin smart contract it\u2019s horrible and factually wrong. We have a word for this it\u2019s covenants.\n[/quote]\nI disagree. A covenant is a well-known concept that is used as a tool to build smart contracts, as loosely defined above.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 517,
  "hidden": false,
  "trust_level": 1,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "Not sure what \u201cit\u201d means here \n\nThe state is stored onchain. You would need to track the transaction at the tip of the \u201csmart contract\u201d chain \n\n\nThere is a loose definition for \u201csmart contract\u201d in the text: \n\nA smart contract here means some sort of stateful logic, with a collection of functions th&hellip;",
  "truncated": true,
  "post_url": "/t/the-path-to-general-computation-on-bitcoin-with-op-cat/1106/5",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
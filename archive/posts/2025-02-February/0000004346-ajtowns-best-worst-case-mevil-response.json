{
  "id": 4346,
  "name": "Anthony Towns",
  "username": "ajtowns",
  "avatar_template": "/user_avatar/delvingbitcoin.org/ajtowns/{size}/417_2.png",
  "created_at": "2025-02-20T17:57:10.966Z",
  "cooked": "<blockquote>\n<p>For example, a Marketplace would allow for bids in the form of \u201cI\u2019ll pay X to include transaction Y as long as it comes before any other transactions which interact with the smart contract identified by Z\u201d.</p>\n</blockquote>\n<p>I think a \u201cbid\u201d of that form would be unpleasant if passed all the way through to miners \u2013 accepting the bid but still including transaction W that interacts with smart contract Z means (in general) modifying transaction W to spend an output of Y (or perhaps some child of Y), and potentially updating the witness data of W to deal with the difference in value of Y\u2019s output vs Z\u2019s output. To me, those seem like things that the \u201cproposer\u201d should be doing, rather than the \u201crelay\u201d or the \u201cbuilder\u201d.</p>\n<p>Would it be plausible to make the \u201cmevpool marketplace\u201d operate solely on packages of transactions, that is:</p>\n<pre data-code-height=\"148\" data-code-wrap=\"mermaid\"><code class=\"lang-mermaid\"> flowchart LR\n    Extractor1 --tx pkg--&gt; Marketplace\n    Extractor2 --tx pkg--&gt; Marketplace\n    Marketplace --{tx pkgs}--&gt; Miner1\n    Marketplace --{tx pkgs}--&gt; Miner2\n    Miner2 --block--&gt; Network\n</code></pre>\n<p>So that extractors who want their tx Y to be first monitor the mempool for other txs that interact with smart contract Z, setup a tx pkg that does that and submits it to the marketplace. Other extractors might submit competing packages, bidding fees up, and the marketplace sends the proposed packages to miners who build block templates, etc.</p>\n<p>For sealed bids, I think you could reveal with utxos the package spends, the txids and wtids, and the total sigops, weight, and fee, and then either rely on trusting the marketplace to reveal the tx contents or a trusted execution environment in a similar way.</p>\n<p>This assumes miners can do package RBF in a fairly optimal manner, and that we can add \u201csealed txs\u201d to the mempool, but otherwise seems to keep things fairly simple on the miner/marketplace side.</p>\n<p>Revealing the utxos that sealed txs are spending might be something of a give away to competitors, but seems unavoidable if you want miners to be building the block templates.</p>",
  "post_number": 2,
  "post_type": 1,
  "updated_at": "2025-02-20T17:57:10.966Z",
  "reply_count": 1,
  "reply_to_post_number": null,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 18,
  "readers_count": 17,
  "score": 8.6,
  "yours": false,
  "topic_id": 1465,
  "topic_slug": "best-worst-case-mevil-response",
  "topic_title": "Best-(Worst-)Case MEVil Response",
  "topic_html_title": "Best-(Worst-)Case MEVil Response",
  "category_id": 7,
  "display_username": "Anthony Towns",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "> For example, a Marketplace would allow for bids in the form of \u201cI\u2019ll pay X to include transaction Y as long as it comes before any other transactions which interact with the smart contract identified by Z\u201d.\n\nI think a \"bid\" of that form would be unpleasant if passed all the way through to miners -- accepting the bid but still including transaction W that interacts with smart contract Z means (in general) modifying transaction W to spend an output of Y (or perhaps some child of Y), and potentially updating the witness data of W to deal with the difference in value of Y's output vs Z's output. To me, those seem like things that the \"proposer\" should be doing, rather than the \"relay\" or the \"builder\".\n\nWould it be plausible to make the \"mevpool marketplace\" operate solely on packages of transactions, that is:\n\n```mermaid height=148,auto\n flowchart LR\n    Extractor1 --tx pkg--> Marketplace\n    Extractor2 --tx pkg--> Marketplace\n    Marketplace --{tx pkgs}--> Miner1\n    Marketplace --{tx pkgs}--> Miner2\n    Miner2 --block--> Network\n```\n\nSo that extractors who want their tx Y to be first monitor the mempool for other txs that interact with smart contract Z, setup a tx pkg that does that and submits it to the marketplace. Other extractors might submit competing packages, bidding fees up, and the marketplace sends the proposed packages to miners who build block templates, etc.\n\nFor sealed bids, I think you could reveal with utxos the package spends, the txids and wtids, and the total sigops, weight, and fee, and then either rely on trusting the marketplace to reveal the tx contents or a trusted execution environment in a similar way.\n\nThis assumes miners can do package RBF in a fairly optimal manner, and that we can add \"sealed txs\" to the mempool, but otherwise seems to keep things fairly simple on the miner/marketplace side.\n\nRevealing the utxos that sealed txs are spending might be something of a give away to competitors, but seems unavoidable if you want miners to be building the block templates.",
  "actions_summary": [],
  "moderator": true,
  "admin": true,
  "staff": true,
  "user_id": 3,
  "hidden": false,
  "trust_level": 4,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
{
  "id": 4272,
  "name": "Carla Kirk-Cohen",
  "username": "carla",
  "avatar_template": "/user_avatar/delvingbitcoin.org/carla/{size}/119_2.png",
  "created_at": "2025-02-10T18:49:24.867Z",
  "cooked": "<p>We have run a few simulations to get a better understanding of how outgoing reputation defends nodes from a \u201csink\u201d attack. Apologies for the delayed response!</p>\n<details>\n  <summary>See here for a full outline of how we ran the attack. </summary>\n  <ul>\n    <li>Create a graph centered on the target node by:\n      <ul>\n        <li>Randomly selecting 5 neighbors with the target</li>\n        <li>Randomly selecting 10 neighbors for each of the 5 target\u2019s neighbors</li>\n      </ul>\n    </li>\n    <li>Add the attacking node to the graph:\n      <ul>\n        <li>Connect the target to the attacker</li>\n        <li>Connect the attacker to the 15 largest nodes in the network not already connected to the target</li>\n      </ul>\n    </li>\n    <li>Generate traffic in the network to bootstrap reputation:\n      <ul>\n        <li>Honest nodes are bootstrapped for 6 months</li>\n        <li>The attacking node is bootstrapped for the period defined by the simulation</li>\n      </ul>\n    </li>\n    <li>Start the attack:\n      <ul>\n        <li>General jam all of the target's peers</li>\n        <li>Attacking node slow-jams any endorsed payments it receives from the target</li>\n      </ul>\n    </li>\n    <li>Stop the simulation when:\n      <ul>\n        <li>The attacker has lost all of its reputation with the target (won\u2019t get any endorsed HTLCs to slow-jam anymore)</li>\n        <li>The target\u2019s revenue has dropped below what its revenue would be during times of peace</li>\n      </ul>\n    </li>\n  </ul>\n</details>\n<p>Our results were pretty consistent across simulation runs. As the attacker holds endorsed payments, their reputation drops and the target node will stop forwarding them endorsed payments. In all simulations the attacker loses its reputation with the target quickly, and the target\u2019s reputation does not drop below peacetime projections</p>\n<p>The graph below shows the attacker\u2019s reputation with the target node in a sink attack against a graph centered on the acinq node where the attacker bootstraps their reputation for 90 days before starting an attack. The target will forward endorsed payments to the attacker when the reputation delta is &gt; 0 and drop them otherwise.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://delvingbitcoin.org/uploads/default/original/2X/d/d146042e469c3983ed2bbb75ace3be332d6f7158.png\" data-download-href=\"https://delvingbitcoin.org/uploads/default/d146042e469c3983ed2bbb75ace3be332d6f7158\" title=\"Figure1: Sink Attack Results\"><img src=\"https://delvingbitcoin.org/uploads/default/optimized/2X/d/d146042e469c3983ed2bbb75ace3be332d6f7158_2_690x413.png\" alt=\"Figure1: Sink Attack Results\" data-base62-sha1=\"tRjNDAvcwWzpBXqTrFKxbBOZAJa\" width=\"690\" height=\"413\" srcset=\"https://delvingbitcoin.org/uploads/default/optimized/2X/d/d146042e469c3983ed2bbb75ace3be332d6f7158_2_690x413.png, https://delvingbitcoin.org/uploads/default/original/2X/d/d146042e469c3983ed2bbb75ace3be332d6f7158.png 1.5x, https://delvingbitcoin.org/uploads/default/original/2X/d/d146042e469c3983ed2bbb75ace3be332d6f7158.png 2x\" data-dominant-color=\"FAF9F9\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Figure1: Sink Attack Results</span><span class=\"informations\">1000\u00d7600 35.5 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<details>\n <summary>There are of course some shortcomings in these simulations.</summary>\n<ul>\n<li>They depend on the traffic patterns produced by sim-ln.</li>\n<li>The strategy taken to bootstrap by the attacker is relatively simple. This could undoubtedly be enhanced with smarter channel placement and/or more strategic channel jamming.</li>\n<li>This is a topology-dependent attack, so our graph selection strategy will impact the results.</li>\n</ul>\n</details>\n<p>Open to suggestions here if there\u2019s any particular scenario that you\u2019d like to see! Our current plan is to come up with some manufactured \u201cworst case\u201d topologies where the attacker is at a great advantage, with the reasoning that if the solution works there then it\u2019ll work in less ideal scenarios as well.</p>\n<h2><a name=\"p-4272-bi-directional-reputation-1\" class=\"anchor\" href=\"#p-4272-bi-directional-reputation-1\"></a>Bi-Directional Reputation?</h2>\n<p>(terminology recap available <a href=\"https://gist.github.com/carlaKC/6762d88903d1cc27339859816ed80d43\" rel=\"noopener nofollow ugc\">here</a>).</p>\n<p>We began to look at outgoing reputation after the observation from <a class=\"mention\" href=\"/u/proofofkeags\">@ProofOfKeags</a> and <a class=\"mention\" href=\"/u/morehouse\">@morehouse</a> that a slow jamming attack requires a malicious downstream node, but not necessarily a malicious upstream node. Fast jamming attacks are perpetrated by upstream nodes, but we have unconditional fees to protect against this type of spam so perhaps we don\u2019t need to worry about incoming reputation.</p>\n<p>Our aim has been to design a reputation system where the cost of acquiring reputation is comparable to the damage that can be done by abusing it. When we look at reputation in only one direction, we\u2019re only able to enforce this compensation promise in one direction. This is okay when we\u2019re only thinking on an individual channel basis, but when we holistically consider all of a node\u2019s channels we run into some issues.</p>\n<p>Take the example of a network implementing outgoing reputation only, with malicious nodes <code>M0</code> and <code>M1</code> aiming to channel jam target node <code>T</code>:</p>\n<ul>\n<li>We assume that <code>A</code>, <code>B</code> and <code>C</code> have good outgoing reputation with <code>T</code>.</li>\n<li>M0 does not need to build any reputation to send endorsed payments to <code>T</code>.</li>\n<li>M1 will need to build good reputation with <code>A</code>, <code>B</code> and <code>C</code> for endorsed payments to be sent to it as an outgoing link.</li>\n</ul>\n<p>To build good reputation, <code>M1</code> will send payments over <code>M1 -&gt; {A / B / C} -&gt; M1</code> to build outgoing reputation for endorsed payments forwarded over <code>{A / B / C} -&gt; M1</code>. The malicious nodes can then go ahead and send and hold endorsed payments from <code>M0 -&gt; .. -&gt; M1</code> to channel jam <code>T -&gt; A</code>, <code>T -&gt; B</code> and <code>T -&gt; C</code> without making any payments to <code>T</code> itself.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://delvingbitcoin.org/uploads/default/original/2X/b/b14f56a7a823778db27e29dd42250fd0cae92e09.png\" data-download-href=\"https://delvingbitcoin.org/uploads/default/b14f56a7a823778db27e29dd42250fd0cae92e09\" title=\"Outgoing Reputation\"><img src=\"https://delvingbitcoin.org/uploads/default/optimized/2X/b/b14f56a7a823778db27e29dd42250fd0cae92e09_2_690x412.png\" alt=\"Outgoing Reputation\" data-base62-sha1=\"piyuDKIgiMoMXPexiLcuYL1xClP\" width=\"690\" height=\"412\" srcset=\"https://delvingbitcoin.org/uploads/default/optimized/2X/b/b14f56a7a823778db27e29dd42250fd0cae92e09_2_690x412.png, https://delvingbitcoin.org/uploads/default/optimized/2X/b/b14f56a7a823778db27e29dd42250fd0cae92e09_2_1035x618.png 1.5x, https://delvingbitcoin.org/uploads/default/optimized/2X/b/b14f56a7a823778db27e29dd42250fd0cae92e09_2_1380x824.png 2x\" data-dominant-color=\"F6F1DB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Outgoing Reputation</span><span class=\"informations\">1472\u00d7880 39.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>In the outgoing reputation case, we compensate the node receiving the HLTCs that are used for jamming, but not the node offering them.</p>\n<p>The same applies for incoming reputation, just in reverse. We compensate the node offering the HTLCs that are used for jamming but not the node receiving them.</p>\n<details>\n <summary>A walkthrough of the incoming case is available here, minimized for brevity.\n</summary>\n<p>The same single-sided issue can happen with incoming reputation only. Flipping the network around:</p>\n<ul>\n<li>We assume that <code>A</code>, <code>B</code> and <code>C</code> have good incoming reputation with <code>T</code>.</li>\n<li><code>M0</code> will have to build reputation with <code>A</code>, <code>B</code> and <code>C</code> to send endorsed payments with <code>T</code>.</li>\n<li><code>M1</code> does not have to build good reputation with <code>T</code> to receive endorsed payments from <code>T</code>.</li>\n</ul>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://delvingbitcoin.org/uploads/default/original/2X/2/2c25553b9deebd66504f93eae73241eace250e19.png\" data-download-href=\"https://delvingbitcoin.org/uploads/default/2c25553b9deebd66504f93eae73241eace250e19\" title=\"Incoming Reputation\"><img src=\"https://delvingbitcoin.org/uploads/default/optimized/2X/2/2c25553b9deebd66504f93eae73241eace250e19_2_690x426.png\" alt=\"Incoming Reputation\" data-base62-sha1=\"6iwZDxp9Ad8MKNtZDFWM1kX48Qh\" width=\"690\" height=\"426\" srcset=\"https://delvingbitcoin.org/uploads/default/optimized/2X/2/2c25553b9deebd66504f93eae73241eace250e19_2_690x426.png, https://delvingbitcoin.org/uploads/default/optimized/2X/2/2c25553b9deebd66504f93eae73241eace250e19_2_1035x639.png 1.5x, https://delvingbitcoin.org/uploads/default/optimized/2X/2/2c25553b9deebd66504f93eae73241eace250e19_2_1380x852.png 2x\" data-dominant-color=\"F5F0D8\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Incoming Reputation</span><span class=\"informations\">1386\u00d7856 38.8 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>To build good reputation, <code>M0</code> will send payments over <code>M0 -&gt; {A / B / C} -&gt; M0</code> to build incoming reputation for for endorsed payments sent over <code>{A / B / C} -&gt; T</code>. As before, the malicious nodes can send and endorse payments from <code>M0 -&gt; \u2026 -&gt; M1</code> to channel jam <code>A -&gt; T</code>, <code>B -&gt; T</code>, <code>C -&gt; T</code> without making any payments to <code>T</code> itself.</p>\n</details>\n<p>In a system with bi-directional reputation, we\u2019re able to enforce that both ends of the channel are compensated (either directly through the attacker\u2019s payments or transitively because they\u2019ll have to build up reputation on both ends). In the original example, <code>M0</code> will need to build incoming reputation with <code>T</code> in addition to <code>M1</code> building outgoing reputation with <code>T</code>\u2019s peers to achieve the same attack. We\u2019ve got some thoughts on how to address the UX drawbacks that come along with bidirectional reputation, but will share those in another post!</p>",
  "post_number": 7,
  "post_type": 1,
  "updated_at": "2025-02-10T18:50:00.597Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 0,
  "incoming_link_count": 11,
  "reads": 16,
  "readers_count": 15,
  "score": 73.2,
  "yours": false,
  "topic_id": 1147,
  "topic_slug": "hybrid-jamming-mitigation-results-and-updates",
  "topic_title": "Hybrid Jamming Mitigation: Results and Updates",
  "topic_html_title": "Hybrid Jamming Mitigation: Results and Updates",
  "category_id": 7,
  "display_username": "Carla Kirk-Cohen",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": "",
  "bookmarked": false,
  "raw": "We have run a few simulations to get a better understanding of how outgoing reputation defends nodes from a \u201csink\u201d attack. Apologies for the delayed response!\n\n<details>\n  <summary>See here for a full outline of how we ran the attack. </summary>\n  <ul>\n    <li>Create a graph centered on the target node by:\n      <ul>\n        <li>Randomly selecting 5 neighbors with the target</li>\n        <li>Randomly selecting 10 neighbors for each of the 5 target\u2019s neighbors</li>\n      </ul>\n    </li>\n    <li>Add the attacking node to the graph:\n      <ul>\n        <li>Connect the target to the attacker</li>\n        <li>Connect the attacker to the 15 largest nodes in the network not already connected to the target</li>\n      </ul>\n    </li>\n    <li>Generate traffic in the network to bootstrap reputation:\n      <ul>\n        <li>Honest nodes are bootstrapped for 6 months</li>\n        <li>The attacking node is bootstrapped for the period defined by the simulation</li>\n      </ul>\n    </li>\n    <li>Start the attack:\n      <ul>\n        <li>General jam all of the target's peers</li>\n        <li>Attacking node slow-jams any endorsed payments it receives from the target</li>\n      </ul>\n    </li>\n    <li>Stop the simulation when:\n      <ul>\n        <li>The attacker has lost all of its reputation with the target (won\u2019t get any endorsed HTLCs to slow-jam anymore)</li>\n        <li>The target\u2019s revenue has dropped below what its revenue would be during times of peace</li>\n      </ul>\n    </li>\n  </ul>\n</details>\n\n\nOur results were pretty consistent across simulation runs. As the attacker holds endorsed payments, their reputation drops and the target node will stop forwarding them endorsed payments. In all simulations the attacker loses its reputation with the target quickly, and the target\u2019s reputation does not drop below peacetime projections\n\nThe graph below shows the attacker\u2019s reputation with the target node in a sink attack against a graph centered on the acinq node where the attacker bootstraps their reputation for 90 days before starting an attack. The target will forward endorsed payments to the attacker when the reputation delta is > 0 and drop them otherwise.\n\n![Figure1: Sink Attack Results](upload://tRjNDAvcwWzpBXqTrFKxbBOZAJa.png)\n\n\n<details>\n <summary>There are of course some shortcomings in these simulations.</summary>\n\n* They depend on the traffic patterns produced by sim-ln.\n* The strategy taken to bootstrap by the attacker is relatively simple. This could undoubtedly be enhanced with smarter channel placement and/or more strategic channel jamming.\n* This is a topology-dependent attack, so our graph selection strategy will impact the results.\n\n</details>\n\nOpen to suggestions here if there\u2019s any particular scenario that you\u2019d like to see! Our current plan is to come up with some manufactured \u201cworst case\u201d topologies where the attacker is at a great advantage, with the reasoning that if the solution works there then it\u2019ll work in less ideal scenarios as well.\n\n## Bi-Directional Reputation?\n\n(terminology recap available [here](https://gist.github.com/carlaKC/6762d88903d1cc27339859816ed80d43)).\n\nWe began to look at outgoing reputation after the observation from @ProofOfKeags and @morehouse that a slow jamming attack requires a malicious downstream node, but not necessarily a malicious upstream node. Fast jamming attacks are perpetrated by upstream nodes, but we have unconditional fees to protect against this type of spam so perhaps we don\u2019t need to worry about incoming reputation.\n\nOur aim has been to design a reputation system where the cost of acquiring reputation is comparable to the damage that can be done by abusing it. When we look at reputation in only one direction, we\u2019re only able to enforce this compensation promise in one direction. This is okay when we\u2019re only thinking on an individual channel basis, but when we holistically consider all of a node\u2019s channels we run into some issues.\n\nTake the example of a network implementing outgoing reputation only, with malicious nodes `M0` and `M1` aiming to channel jam target node `T`:\n\n* We assume that `A`, `B` and `C` have good outgoing reputation with `T`.\n* M0 does not need to build any reputation to send endorsed payments to `T`.\n* M1 will need to build good reputation with `A`, `B` and `C` for endorsed payments to be sent to it as an outgoing link.\n\nTo build good reputation, `M1` will send payments over `M1 -> {A / B / C} -> M1` to build outgoing reputation for endorsed payments forwarded over `{A / B / C} -> M1`. The malicious nodes can then go ahead and send and hold endorsed payments from `M0 -> .. -> M1` to channel jam `T -> A`, `T -> B` and `T -> C` without making any payments to `T` itself.\n\n![Outgoing Reputation](upload://piyuDKIgiMoMXPexiLcuYL1xClP.png)\n\nIn the outgoing reputation case, we compensate the node receiving the HLTCs that are used for jamming, but not the node offering them. \n\nThe same applies for incoming reputation, just in reverse. We compensate the node offering the HTLCs that are used for jamming but not the node receiving them.\n\n<details>\n <summary>A walkthrough of the incoming case is available here, minimized for brevity.\n</summary>\n\nThe same single-sided issue can happen with incoming reputation only. Flipping the network around:\n\n* We assume that `A`, `B` and `C` have good incoming reputation with `T`.\n* `M0` will have to build reputation with `A`, `B` and `C` to send endorsed payments with `T`.\n* `M1` does not have to build good reputation with `T` to receive endorsed payments from `T`.\n\n![Incoming Reputation](upload://6iwZDxp9Ad8MKNtZDFWM1kX48Qh.png)\n\nTo build good reputation, `M0` will send payments over `M0 -> {A / B / C} -> M0` to build incoming reputation for for endorsed payments sent over `{A / B / C} -> T`. As before, the malicious nodes can send and endorse payments from `M0 -> \u2026 -> M1` to channel jam `A -> T`, `B -> T`, `C -> T` without making any payments to `T` itself.\n\n</details>\n\nIn a system with bi-directional reputation, we\u2019re able to enforce that both ends of the channel are compensated (either directly through the attacker\u2019s payments or transitively because they\u2019ll have to build up reputation on both ends). In the original example, `M0` will need to build incoming reputation with `T` in addition to `M1` building outgoing reputation with `T`\u2019s peers to achieve the same attack. We\u2019ve got some thoughts on how to address the UX drawbacks that come along with bidirectional reputation, but will share those in another post!",
  "actions_summary": [
    {
      "id": 2,
      "count": 1
    }
  ],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 124,
  "hidden": false,
  "trust_level": 1,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [
    {
      "id": "eyes",
      "type": "emoji",
      "count": 1
    }
  ],
  "current_user_reaction": null,
  "reaction_users_count": 1,
  "current_user_used_main_reaction": false
}
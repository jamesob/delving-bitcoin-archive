{
  "id": 4175,
  "name": "David A. Harding",
  "username": "harding",
  "avatar_template": "/user_avatar/delvingbitcoin.org/harding/{size}/925_2.png",
  "created_at": "2025-02-04T15:12:03.917Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"t-bast\" data-post=\"6\" data-topic=\"1412\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/t-bast/48/98_2.png\" class=\"avatar\"> t-bast:</div>\n<blockquote>\n<p>HTLC delays should always be large enough to ensure that reorgs aren\u2019t an issue (e.g. <code>cltv_expiry_delta = 144 blocks</code>) so this shouldn\u2019t put funds at risk?</p>\n</blockquote>\n</aside>\n<p>Sure, but if you think all of your channels are closed, you may take your node offline after (say) just 6 confirmations.  Again, I\u2019m not claiming this is a strong criticism; it just seems more conservative to prevent your counterparty from being able to use money you paid to create transactions that are less likely to persist through a reorg.</p>\n<aside class=\"quote no-group\" data-username=\"t-bast\" data-post=\"6\" data-topic=\"1412\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/t-bast/48/98_2.png\" class=\"avatar\"> t-bast:</div>\n<blockquote>\n<p>While this may apply to small nodes (who probably aren\u2019t a meaningful target since they\u2019re small), I don\u2019t think this applies to serious nodes (our node never has a 10 minutes downtime)</p>\n</blockquote>\n</aside>\n<p>I don\u2019t like safety tradeoffs that optimize for \u201cserious nodes\u201d.  I\u2019d prefer a network that\u2019s reasonably safe even for non-experts.</p>\n<p>In addition, the risk is probabilistic.  If an attacker can guess when your node will be offline for 1 minute, they have a ~10% chance of being able to get their transaction mined uncontested.  The cost is the onchain fee they paid to open the channel (if any) and the cost to unilaterally close.  Opening a single-funded channel at 1 s/vb costs ~150 sats and closing with just a keyed anchor is (I\u2019m guessing) ~300 sats at 1 s/vb; so with Eclair\u2019s default dust tolerance of 50,000 sat, the attack reaches breakeven profitability if the attacker can predict when your node will be offline for at least 6 seconds (<code>600 seconds / (50_000 sats dust tolerance / 450 sats costs)</code>).</p>\n<p>Six seconds is probably below propagation time to your node and back to miners if your counterparty is able to initially relay the transaction directly to large miners, meaning a clever attacker doesn\u2019t even need to wait for your node to go offline.</p>",
  "post_number": 7,
  "post_type": 1,
  "updated_at": "2025-02-04T15:12:03.917Z",
  "reply_count": 0,
  "reply_to_post_number": 6,
  "quote_count": 1,
  "incoming_link_count": 0,
  "reads": 14,
  "readers_count": 13,
  "score": 17.8,
  "yours": false,
  "topic_id": 1412,
  "topic_slug": "which-ephemeral-anchor-script-should-lightning-use",
  "topic_title": "Which ephemeral anchor script should lightning use?",
  "topic_html_title": "Which ephemeral anchor script should lightning use?",
  "category_id": 7,
  "display_username": "David A. Harding",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"t-bast, post:6, topic:1412\"]\nHTLC delays should always be large enough to ensure that reorgs aren\u2019t an issue (e.g. `cltv_expiry_delta = 144 blocks`) so this shouldn\u2019t put funds at risk?\n[/quote]\n\nSure, but if you think all of your channels are closed, you may take your node offline after (say) just 6 confirmations.  Again, I'm not claiming this is a strong criticism; it just seems more conservative to prevent your counterparty from being able to use money you paid to create transactions that are less likely to persist through a reorg.\n\n[quote=\"t-bast, post:6, topic:1412\"]\nWhile this may apply to small nodes (who probably aren\u2019t a meaningful target since they\u2019re small), I don\u2019t think this applies to serious nodes (our node never has a 10 minutes downtime)\n[/quote]\n\nI don't like safety tradeoffs that optimize for \"serious nodes\".  I'd prefer a network that's reasonably safe even for non-experts.\n\nIn addition, the risk is probabilistic.  If an attacker can guess when your node will be offline for 1 minute, they have a ~10% chance of being able to get their transaction mined uncontested.  The cost is the onchain fee they paid to open the channel (if any) and the cost to unilaterally close.  Opening a single-funded channel at 1 s/vb costs ~150 sats and closing with just a keyed anchor is (I'm guessing) ~300 sats at 1 s/vb; so with Eclair's default dust tolerance of 50,000 sat, the attack reaches breakeven profitability if the attacker can predict when your node will be offline for at least 6 seconds (`600 seconds / (50_000 sats dust tolerance / 450 sats costs)`).\n\nSix seconds is probably below propagation time to your node and back to miners if your counterparty is able to initially relay the transaction directly to large miners, meaning a clever attacker doesn't even need to wait for your node to go offline.",
  "actions_summary": [
    {
      "id": 2,
      "count": 1
    }
  ],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 6,
  "hidden": false,
  "trust_level": 3,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [
    {
      "id": "eyes",
      "type": "emoji",
      "count": 1
    }
  ],
  "current_user_reaction": null,
  "reaction_users_count": 1,
  "current_user_used_main_reaction": false
}
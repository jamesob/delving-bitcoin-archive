{
  "id": 4331,
  "name": "Matt Morehouse",
  "username": "morehouse",
  "avatar_template": "/letter_avatar_proxy/v4/letter/m/df705f/{size}.png",
  "created_at": "2025-02-19T16:11:27.993Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"t-bast\" data-post=\"6\" data-topic=\"1453\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/t-bast/48/98_2.png\" class=\"avatar\"> t-bast:</div>\n<blockquote>\n<p>I proposed also signing a second version of that HTLC-success transaction:</p>\n<ul>\n<li>one input (the corresponding 20 000 sat HTLC output from the commitment transaction)</li>\n<li>one output with amount 17 500 sat (or a different value based on the feerate chosen)</li>\n<li>it is still signed with <code>SIGHASH_SINGLE | SIGHASH_ANYONECANPAY</code></li>\n</ul>\n</blockquote>\n</aside>\n<p>We would want to sign this new variant with <code>SIGHASH_ALL</code>.</p>\n<p>The only reason to do <code>SIGHASH_SINGLE | SIGHASH_ANYONECANPAY</code> is so the mobile user can add their own input and output to pay fees, which we\u2019re trying to avoid here.  And allowing the user to add their own outputs means that they can claim any excess mining fees for <em>themselves</em> when broadcasting a revoked commitment+HTLC package.</p>\n<p>In the above example, the wallet user could broadcast the revoked package and claim some portion of the 2500 sat intended for fees.  Depending on the size of the channel and whether the LSP allows zero-reserve, it shouldn\u2019t be difficult for the user to profit from this.</p>",
  "post_number": 8,
  "post_type": 1,
  "updated_at": "2025-02-19T16:11:27.993Z",
  "reply_count": 1,
  "reply_to_post_number": 6,
  "quote_count": 1,
  "incoming_link_count": 0,
  "reads": 8,
  "readers_count": 7,
  "score": 21.4,
  "yours": false,
  "topic_id": 1453,
  "topic_slug": "zero-fee-commitments-for-mobile-wallets",
  "topic_title": "Zero-fee commitments for mobile wallets",
  "topic_html_title": "Zero-fee commitments for mobile wallets",
  "category_id": 7,
  "display_username": "Matt Morehouse",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"t-bast, post:6, topic:1453\"]\nI proposed also signing a second version of that HTLC-success transaction:\n\n* one input (the corresponding 20 000 sat HTLC output from the commitment transaction)\n* one output with amount 17 500 sat (or a different value based on the feerate chosen)\n* it is still signed with `SIGHASH_SINGLE | SIGHASH_ANYONECANPAY`\n[/quote]\n\nWe would want to sign this new variant with `SIGHASH_ALL`.\n\nThe only reason to do `SIGHASH_SINGLE | SIGHASH_ANYONECANPAY` is so the mobile user can add their own input and output to pay fees, which we're trying to avoid here.  And allowing the user to add their own outputs means that they can claim any excess mining fees for *themselves* when broadcasting a revoked commitment+HTLC package.\n\nIn the above example, the wallet user could broadcast the revoked package and claim some portion of the 2500 sat intended for fees.  Depending on the size of the channel and whether the LSP allows zero-reserve, it shouldn't be difficult for the user to profit from this.",
  "actions_summary": [
    {
      "id": 2,
      "count": 1
    }
  ],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 47,
  "hidden": false,
  "trust_level": 2,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [
    {
      "id": "clap",
      "type": "emoji",
      "count": 1
    }
  ],
  "current_user_reaction": null,
  "reaction_users_count": 1,
  "current_user_used_main_reaction": false
}
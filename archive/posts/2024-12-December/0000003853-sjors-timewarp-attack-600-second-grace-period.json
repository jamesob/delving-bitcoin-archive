{
  "id": 3853,
  "name": "Sjors Provoost",
  "username": "sjors",
  "avatar_template": "/user_avatar/delvingbitcoin.org/sjors/{size}/59_2.png",
  "created_at": "2024-12-24T08:02:50.751Z",
  "cooked": "<p>I would turn that round. We shouldn\u2019t introduce a soft fork rule that can be broken by accident, unless there\u2019s a really good reason to. The original motivation for the timewarp attack was to prevent a very destructive attack that could happen in a matter of weeks. That doesn\u2019t require a 600 second limit.</p>\n<p>If the timewarp attack had been fixed with a 24 hour limit,  I don\u2019t think anyone would have proposed a subsequent soft fork to lower it to 600 seconds.</p>\n<p>Above I linked to two actual mining pool software bugs that caused invalid blocks on testnet4 because they were using the system clock instead of the block template <code>nTime</code>. Bitcoin Core itself (briefly) had a bug where it could accidentally violate the timewarp rule. So that\u2019s three real bugs found with minimal testing. We have no idea how much (closed source, unmaintained) mining software is out there, and we can\u2019t expect every pool, individual mining farm and solo operator to thoroughly test their entire infrastructure on testnet4.</p>\n<p>Most modern soft forks have used standardness to protect miners against accidentally producing an invalid block if they don\u2019t upgrade their node. They also need to upgrade their node to not accidentally mine on top of an invalid block. And as a community we rely on a very large majority to upgrade their node in order to safely deploy the soft fork network wide.</p>\n<p>The timewarp fix with a 600 second limit deviates from that because it requires miners to also check their entire stack of mining software. Whereas a 150 minute threshold only requires them to upgrade their node.</p>\n<p>Miners should of course, regardless of the soft fork, check their mining software for the above bugs (they only became visible because on testnet4 the 20-minute-difficulty-1 rule is exploited more aggressively than on testnet3, pushing MTP structurally past wall clock time). But that\u2019s an orthogonal issue.</p>",
  "post_number": 14,
  "post_type": 1,
  "posts_count": 43,
  "updated_at": "2024-12-24T08:03:59.635Z",
  "reply_count": 4,
  "reply_to_post_number": 13,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 30,
  "readers_count": 29,
  "score": 26.0,
  "yours": false,
  "topic_id": 1326,
  "topic_slug": "timewarp-attack-600-second-grace-period",
  "topic_title": "Timewarp attack 600 second grace period",
  "topic_html_title": "Timewarp attack 600 second grace period",
  "category_id": 7,
  "display_username": "Sjors Provoost",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "reply_to_user": {
    "id": 12,
    "username": "AntoineP",
    "name": "Antoine Poinsot",
    "avatar_template": "/user_avatar/delvingbitcoin.org/antoinep/{size}/483_2.png"
  },
  "bookmarked": false,
  "raw": "I would turn that round. We shouldn't introduce a soft fork rule that can be broken by accident, unless there's a really good reason to. The original motivation for the timewarp attack was to prevent a very destructive attack that could happen in a matter of weeks. That doesn't require a 600 second limit.\n\nIf the timewarp attack had been fixed with a 24 hour limit,  I don't think anyone would have proposed a subsequent soft fork to lower it to 600 seconds.\n\nAbove I linked to two actual mining pool software bugs that caused invalid blocks on testnet4 because they were using the system clock instead of the block template `nTime`. Bitcoin Core itself (briefly) had a bug where it could accidentally violate the timewarp rule. So that's three real bugs found with minimal testing. We have no idea how much (closed source, unmaintained) mining software is out there, and we can't expect every pool, individual mining farm and solo operator to thoroughly test their entire infrastructure on testnet4.\n\nMost modern soft forks have used standardness to protect miners against accidentally producing an invalid block if they don't upgrade their node. They also need to upgrade their node to not accidentally mine on top of an invalid block. And as a community we rely on a very large majority to upgrade their node in order to safely deploy the soft fork network wide.\n\nThe timewarp fix with a 600 second limit deviates from that because it requires miners to also check their entire stack of mining software. Whereas a 150 minute threshold only requires them to upgrade their node.\n\nMiners should of course, regardless of the soft fork, check their mining software for the above bugs (they only became visible because on testnet4 the 20-minute-difficulty-1 rule is exploited more aggressively than on testnet3, pushing MTP structurally past wall clock time). But that's an orthogonal issue.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 71,
  "hidden": false,
  "trust_level": 3,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "I would turn that round. We shouldn\u2019t introduce a soft fork rule that can be broken by accident, unless there\u2019s a really good reason to. The original motivation for the timewarp attack was to prevent a very destructive attack that could happen in a matter of weeks. That doesn\u2019t require a 600 second &hellip;",
  "truncated": true,
  "post_url": "/t/timewarp-attack-600-second-grace-period/1326/14",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
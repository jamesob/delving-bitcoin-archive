{
  "id": 3828,
  "name": "Chris Stewart",
  "username": "Chris_Stewart_5",
  "avatar_template": "/user_avatar/delvingbitcoin.org/chris_stewart_5/{size}/296_2.png",
  "created_at": "2024-12-18T17:43:35.458Z",
  "cooked": "<p>I think its useful to think of soft forks in 3 categories</p>\n<ul>\n<li>Feature soft forks</li>\n<li>Security soft forks</li>\n<li>Both Security and Feature Soft Forks</li>\n</ul>\n<h3><a name=\"p-3828-feature-soft-forks-1\" class=\"anchor\" href=\"#p-3828-feature-soft-forks-1\"></a>Feature soft forks</h3>\n<p>Here are examples of feature soft forks.</p>\n<ul>\n<li><a href=\"https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0016.mediawiki\" rel=\"noopener nofollow ugc\">BIP16</a></li>\n<li><a href=\"https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0065.mediawiki\" rel=\"noopener nofollow ugc\">BIP65</a></li>\n<li><a href=\"https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0066.mediawiki\" rel=\"noopener nofollow ugc\">BIP66</a></li>\n</ul>\n<p>When people mention risk associated with soft forks. They usually mean chainsplit risk associated with deploying a new feature. Potentially non-upgraded node and an upgraded node could disagree with the validity of a given transaction mined in a block. We don\u2019t want chainsplits - thus we require widespread consensus for deploying feature soft forks</p>\n<h3><a name=\"p-3828-security-soft-forks-2\" class=\"anchor\" href=\"#p-3828-security-soft-forks-2\"></a>Security soft forks</h3>\n<p>Here are some examples of what I call \u201csecurity soft forks\u201d</p>\n<ul>\n<li><a href=\"https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0042.mediawiki\" rel=\"noopener nofollow ugc\">BIP42</a></li>\n<li><a href=\"https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0143.mediawiki\" rel=\"noopener nofollow ugc\">BIP143</a></li>\n<li>Worst case block validation time (part of GCC)</li>\n<li>64 byte txs (part of GCC)</li>\n<li>Time warp attacks (part of GCC).</li>\n</ul>\n<h3><a name=\"p-3828-both-security-and-feature-enhancement-soft-forks-3\" class=\"anchor\" href=\"#p-3828-both-security-and-feature-enhancement-soft-forks-3\"></a>Both security and feature enhancement soft forks</h3>\n<ul>\n<li><a href=\"https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0141.mediawiki\" rel=\"noopener nofollow ugc\">BIP141</a></li>\n<li><a href=\"https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0143.mediawiki\" rel=\"noopener nofollow ugc\">BIP143</a></li>\n<li><a href=\"https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0341.mediawiki\" rel=\"noopener nofollow ugc\">BIP341</a></li>\n</ul>\n<p>These BIPs were used to fix some sighash vulnerabilities that existed before bitcoin. To fix these security issues, we required allocating a new witness version. This introduced deployment risk because we were enabling new features (v0,v1 segwit).</p>\n<h3><a name=\"p-3828-the-takeaway-4\" class=\"anchor\" href=\"#p-3828-the-takeaway-4\"></a>The takeaway</h3>\n<p>Security soft forks do not have much chainsplit risk as feature and bundled (\u2018Both security and feature\u2019) soft forks.</p>\n<p>If someone was to try to trigger a chainsplit while a security soft fork is being deployed, by definition they are participating in behavior that is hostile to the network. The key insight here is <strong>we want to fork people exploiting the protocol off the network</strong></p>\n<p>Lets look at the Timewarp attack. This means the miner is attempting to increase block velocity and claim more rewards for themselves. If someone is actively attempting to exploit this, we want to fork them off the network via soft fork. If no one is exploiting the timewarp vuln, then we wont have a chain split. I.e. there is no risk to deploying this.</p>\n<p>The only deployment risk I can think of related to security soft forks is implementation risk (i.e. a bug in the implementation).</p>\n<p>Maybe this is self evident to other developers, but it was a realization I had this morning when reading through the <a href=\"https://delvingbitcoin.org/t/great-consensus-cleanup-revival/710/63\">Great Consensus Cleanup</a>.</p>\n<p>I think we should encourage deploying security soft forks independent of feature soft forks whenever possible to encourage deployment of security fixes as soon as the fix can properly be reviewed.</p>\n<p>Am I missing something?</p>",
  "post_number": 1,
  "post_type": 1,
  "updated_at": "2024-12-18T17:48:38.857Z",
  "reply_count": 1,
  "reply_to_post_number": null,
  "quote_count": 0,
  "incoming_link_count": 11,
  "reads": 12,
  "readers_count": 11,
  "score": 62.4,
  "yours": false,
  "topic_id": 1328,
  "topic_slug": "security-soft-fork-deployments-arent-risky",
  "topic_title": "Security soft fork deployments arent risky",
  "topic_html_title": "Security soft fork deployments arent risky",
  "category_id": 5,
  "display_username": "Chris Stewart",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 2,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "I think its useful to think of soft forks in 3 categories\n\n- Feature soft forks\n- Security soft forks\n- Both Security and Feature Soft Forks\n\n### Feature soft forks\n\nHere are examples of feature soft forks.\n\n- [BIP16](https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0016.mediawiki)\n- [BIP65](https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0065.mediawiki)\n- [BIP66](https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0066.mediawiki)\n\nWhen people mention risk associated with soft forks. They usually mean chainsplit risk associated with deploying a new feature. Potentially non-upgraded node and an upgraded node could disagree with the validity of a given transaction mined in a block. We don't want chainsplits - thus we require widespread consensus for deploying feature soft forks\n\n### Security soft forks\n\nHere are some examples of what I call \"security soft forks\"\n\n- [BIP42](https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0042.mediawiki)\n- [BIP143](https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0143.mediawiki)\n- Worst case block validation time (part of GCC)\n- 64 byte txs (part of GCC)\n- Time warp attacks (part of GCC).\n\n### Both security and feature enhancement soft forks\n\n- [BIP141](https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0141.mediawiki)\n- [BIP143](https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0143.mediawiki)\n- [BIP341](https://github.com/bitcoin/bips/blob/8e59f7414bef6203809deaad972a3d7a3a0c2f7a/bip-0341.mediawiki)\n\nThese BIPs were used to fix some sighash vulnerabilities that existed before bitcoin. To fix these security issues, we required allocating a new witness version. This introduced deployment risk because we were enabling new features (v0,v1 segwit).\n\n### The takeaway\n\nSecurity soft forks do not have much chainsplit risk as feature and bundled ('Both security and feature') soft forks. \n\nIf someone was to try to trigger a chainsplit while a security soft fork is being deployed, by definition they are participating in behavior that is hostile to the network. The key insight here is **we want to fork people exploiting the protocol off the network**\n\nLets look at the Timewarp attack. This means the miner is attempting to increase block velocity and claim more rewards for themselves. If someone is actively attempting to exploit this, we want to fork them off the network via soft fork. If no one is exploiting the timewarp vuln, then we wont have a chain split. I.e. there is no risk to deploying this.\n\nThe only deployment risk I can think of related to security soft forks is implementation risk (i.e. a bug in the implementation). \n\nMaybe this is self evident to other developers, but it was a realization I had this morning when reading through the [Great Consensus Cleanup](https://delvingbitcoin.org/t/great-consensus-cleanup-revival/710/63).\n\nI think we should encourage deploying security soft forks independent of feature soft forks whenever possible to encourage deployment of security fixes as soon as the fix can properly be reviewed.\n\nAm I missing something?",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 193,
  "hidden": false,
  "trust_level": 2,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": "Github link was replaced with a permanent link",
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
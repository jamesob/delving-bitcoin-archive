{
  "id": 3837,
  "name": "Sjors Provoost",
  "username": "sjors",
  "avatar_template": "/user_avatar/delvingbitcoin.org/sjors/{size}/59_2.png",
  "created_at": "2024-12-20T06:11:48.294Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"MattCorallo\" data-post=\"8\" data-topic=\"1326\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/m/e47c2d/48.png\" class=\"avatar\"> MattCorallo:</div>\n<blockquote>\n<p>The StratumV2 spec explicitly (I thought?) only allows a miner to roll nTime once per second</p>\n</blockquote>\n</aside>\n<p>If that\u2019s the intention, then the spec should be clarified. Currently there\u2019s only an ambiguous statement buried in the discussion section. See <a href=\"https://github.com/stratum-mining/sv2-spec/blob/52e1fa22f68c343a3d25a2b1a04f93f8e701eced/10-Discussion.md#102-rolling-ntime\" class=\"inline-onebox\">sv2-spec/10-Discussion.md at 52e1fa22f68c343a3d25a2b1a04f93f8e701eced \u00b7 stratum-mining/sv2-spec \u00b7 GitHub</a> and the header-only-mining (HOM) discussion here: <a href=\"https://github.com/stratum-mining/sv2-spec/pull/98/files#r1746795461\" class=\"inline-onebox\">cleanup and update Mining Protocol specs by plebhash \u00b7 Pull Request #98 \u00b7 stratum-mining/sv2-spec \u00b7 GitHub</a></p>\n<blockquote>\n<p>make sure that no miners are broken by the limitation,</p>\n</blockquote>\n<p>Unfortunately this bug could exist for years without detection, only revealing itself in the distant future when chips are fast enough to cause a problem.</p>\n<aside class=\"quote no-group\" data-username=\"ajtowns\" data-post=\"9\" data-topic=\"1326\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/ajtowns/48/417_2.png\" class=\"avatar\"> ajtowns:</div>\n<blockquote>\n<p>If our block\u2019s timestamp is invalid, then the malicious block\u2019s timestamp will also have been to be too far in the future, so any node that would have rejected our block due to the timestamp would also reject it due to its parent</p>\n</blockquote>\n</aside>\n<p>If the sv2 spec explicitly disallows accelerated nTime rolling then indeed the attacker would take the same risk as their victim.</p>\n<p>But otherwise the malicious miner could use <code>extra_nonce</code> rolling to give themselves a bigger safety margin than their accelerated nTime rolling competitor.</p>\n<aside class=\"quote no-group\" data-username=\"MattCorallo\" data-post=\"8\" data-topic=\"1326\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/m/e47c2d/48.png\" class=\"avatar\"> MattCorallo:</div>\n<blockquote>\n<p>I further don\u2019t buy that we need to make inferior protocol design decisions</p>\n</blockquote>\n</aside>\n<p>I\u2019m not convinced (yet) that we need to make these numbers so tight. It seems that having a few hours of padding, instead of 10 minutes, avoids some actual bugs (pool software ignoring nTime) and theoretical future bugs. While the only downside is a minuscule increase in worst case inflation.</p>",
  "post_number": 10,
  "post_type": 1,
  "updated_at": "2024-12-20T06:18:13.171Z",
  "reply_count": 1,
  "reply_to_post_number": null,
  "quote_count": 2,
  "incoming_link_count": 0,
  "reads": 9,
  "readers_count": 8,
  "score": 6.8,
  "yours": false,
  "topic_id": 1326,
  "topic_slug": "timewarp-attack-600-second-grace-period",
  "topic_title": "Timewarp attack 600 second grace period",
  "topic_html_title": "Timewarp attack 600 second grace period",
  "category_id": 7,
  "display_username": "Sjors Provoost",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 2,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"MattCorallo, post:8, topic:1326\"]\nThe StratumV2 spec explicitly (I thought?) only allows a miner to roll nTime once per second\n[/quote]\n\nIf that's the intention, then the spec should be clarified. Currently there's only an ambiguous statement buried in the discussion section. See https://github.com/stratum-mining/sv2-spec/blob/52e1fa22f68c343a3d25a2b1a04f93f8e701eced/10-Discussion.md#102-rolling-ntime and the header-only-mining (HOM) discussion here: https://github.com/stratum-mining/sv2-spec/pull/98/files#r1746795461\n\n> make sure that no miners are broken by the limitation,\n\nUnfortunately this bug could exist for years without detection, only revealing itself in the distant future when chips are fast enough to cause a problem.\n\n[quote=\"ajtowns, post:9, topic:1326\"]\nIf our block\u2019s timestamp is invalid, then the malicious block\u2019s timestamp will also have been to be too far in the future, so any node that would have rejected our block due to the timestamp would also reject it due to its parent\n[/quote]\n\nIf the sv2 spec explicitly disallows accelerated nTime rolling then indeed the attacker would take the same risk as their victim.\n\nBut otherwise the malicious miner could use `extra_nonce` rolling to give themselves a bigger safety margin than their accelerated nTime rolling competitor.\n\n[quote=\"MattCorallo, post:8, topic:1326\"]\nI further don\u2019t buy that we need to make inferior protocol design decisions\n[/quote]\n\nI'm not convinced (yet) that we need to make these numbers so tight. It seems that having a few hours of padding, instead of 10 minutes, avoids some actual bugs (pool software ignoring nTime) and theoretical future bugs. While the only downside is a minuscule increase in worst case inflation.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 71,
  "hidden": false,
  "trust_level": 3,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": "Github link was replaced with a permanent link",
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
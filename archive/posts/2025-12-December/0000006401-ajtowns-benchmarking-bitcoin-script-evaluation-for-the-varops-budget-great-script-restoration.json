{
  "id": 6401,
  "name": "Anthony Towns",
  "username": "ajtowns",
  "avatar_template": "/user_avatar/delvingbitcoin.org/ajtowns/{size}/417_2.png",
  "created_at": "2025-12-09T18:18:23.785Z",
  "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"instagibbs\" data-post=\"9\" data-topic=\"2094\" data-full=\"true\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/instagibbs/48/28_2.png\" class=\"avatar\"> instagibbs:</div>\n<blockquote>\n<aside class=\"quote no-group\" data-username=\"Julian\" data-post=\"8\" data-topic=\"2094\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/j/74df32/48.png\" class=\"avatar\"> Julian:</div>\n<blockquote>\n<p>If 80,000 sig ops is too slow, why was it preserved in Taproot/BIP340-342?</p>\n</blockquote>\n</aside>\n<p>All else aside I don\u2019t think we\u2019re bound to make the same decisions going forward.</p>\n</blockquote>\n</aside>\n<p>As I understand it, the <a href=\"https://github.com/bitcoin/bips/blob/6ce21f4eaeb4a73373688e99d7ea74a6c0413f22/bip-0342.mediawiki#cite_note-11\">logic for tapscript</a> was just \u201ckeep it roughly the same as segwit\u201d, <a href=\"https://github.com/bitcoin/bips/blob/6ce21f4eaeb4a73373688e99d7ea74a6c0413f22/bip-0141.mediawiki#user-content-Sigops\">the logic for segwit</a> was \u201cwe\u2019re expanding the blocksize by a factor of up to 4, and that should apply to both the bytes and sigop limits\u201d, and that brings us back to the <a href=\"https://github.com/bitcoin/bitcoin/commit/f1e1fb4bdef878c8fc1564fa418d44e7541a7e83#diff-608d8de3fba954c50110b6d7386988f27295de845e9d7174e40095ba5efcf1bbR1419-R1427\">original block size limit introduction</a>:</p>\n<pre><code class=\"lang-auto\">+    // Check size\n+    if (nHeight &gt; 79400 &amp;&amp; ::GetSerializeSize(*this, SER_NETWORK) &gt; MAX_BLOCK_SIZE)\n+        return error(\"AcceptBlock() : over size limit\");\n+\n+    // Check that it's not full of nonstandard transactions\n+    if (nHeight &gt; 79400 &amp;&amp; GetSigOpCount() &gt; MAX_BLOCK_SIGOPS)\n+        return error(\"AcceptBlock() : too many nonstandard transactions\");\n</code></pre>\n<p>which seems to have just been limiting the DoS surface.</p>\n<p>So I think there\u2019s plenty of potential for making a more informed decision now, rather than just assuming what we\u2019ve already got is sensible.</p>",
  "post_number": 12,
  "post_type": 1,
  "posts_count": 14,
  "updated_at": "2025-12-09T18:23:55.376Z",
  "reply_count": 1,
  "reply_to_post_number": 9,
  "quote_count": 2,
  "incoming_link_count": 1,
  "reads": 16,
  "readers_count": 15,
  "score": 28.2,
  "yours": false,
  "topic_id": 2094,
  "topic_slug": "benchmarking-bitcoin-script-evaluation-for-the-varops-budget-great-script-restoration",
  "topic_title": "Benchmarking Bitcoin Script Evaluation for the Varops Budget (Great Script Restoration)",
  "topic_html_title": "Benchmarking Bitcoin Script Evaluation for the Varops Budget (Great Script Restoration)",
  "category_id": 7,
  "display_username": "Anthony Towns",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 2,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"instagibbs, post:9, topic:2094, full:true\"]\n[quote=\"Julian, post:8, topic:2094\"]\nIf 80,000 sig ops is too slow, why was it preserved in Taproot/BIP340-342?\n[/quote]\n\nAll else aside I don\u2019t think we\u2019re bound to make the same decisions going forward.\n[/quote]\n\nAs I understand it, the [logic for tapscript](https://github.com/bitcoin/bips/blob/6ce21f4eaeb4a73373688e99d7ea74a6c0413f22/bip-0342.mediawiki#cite_note-11) was just \"keep it roughly the same as segwit\", [the logic for segwit](https://github.com/bitcoin/bips/blob/6ce21f4eaeb4a73373688e99d7ea74a6c0413f22/bip-0141.mediawiki#user-content-Sigops) was \"we're expanding the blocksize by a factor of up to 4, and that should apply to both the bytes and sigop limits\", and that brings us back to the [original block size limit introduction](https://github.com/bitcoin/bitcoin/commit/f1e1fb4bdef878c8fc1564fa418d44e7541a7e83#diff-608d8de3fba954c50110b6d7386988f27295de845e9d7174e40095ba5efcf1bbR1419-R1427):\n\n```\n+    // Check size\n+    if (nHeight > 79400 && ::GetSerializeSize(*this, SER_NETWORK) > MAX_BLOCK_SIZE)\n+        return error(\"AcceptBlock() : over size limit\");\n+\n+    // Check that it's not full of nonstandard transactions\n+    if (nHeight > 79400 && GetSigOpCount() > MAX_BLOCK_SIGOPS)\n+        return error(\"AcceptBlock() : too many nonstandard transactions\");\n```\n\nwhich seems to have just been limiting the DoS surface.\n\nSo I think there's plenty of potential for making a more informed decision now, rather than just assuming what we've already got is sensible.",
  "actions_summary": [
    {
      "id": 2,
      "count": 1
    }
  ],
  "moderator": true,
  "admin": true,
  "staff": true,
  "user_id": 3,
  "hidden": false,
  "trust_level": 4,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": "Github link was replaced with a permanent link",
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "All else aside I don\u2019t think we\u2019re bound to make the same decisions going forward. \n\n\nAs I understand it, the <a href=\"https://github.com/bitcoin/bips/blob/6ce21f4eaeb4a73373688e99d7ea74a6c0413f22/bip-0342.mediawiki#cite_note-11\">logic for tapscript</a> was just \u201ckeep it roughly the same as segwit\u201d, <a href=\"https://github.com/bitcoin/bips/blob/6ce21f4eaeb4a73373688e99d7ea74a6c0413f22/bip-0141.mediawiki#user-content-Sigops\">the logic for segwit</a> was \u201cwe\u2019re expanding the blocksize by a factor of up to 4, and that should apply to both the bytes an&hellip;",
  "truncated": true,
  "post_url": "/t/benchmarking-bitcoin-script-evaluation-for-the-varops-budget-great-script-restoration/2094/12",
  "reactions": [
    {
      "id": "+1",
      "type": "emoji",
      "count": 1
    }
  ],
  "current_user_reaction": null,
  "reaction_users_count": 1,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
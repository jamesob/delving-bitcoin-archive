{
  "id": 6500,
  "name": "salvatoshi",
  "username": "salvatoshi",
  "avatar_template": "/user_avatar/delvingbitcoin.org/salvatoshi/{size}/72_2.png",
  "created_at": "2025-12-31T16:45:52.694Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"billymcbip\" data-post=\"5\" data-topic=\"2177\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/billymcbip/48/1696_2.png\" class=\"avatar\"> billymcbip:</div>\n<blockquote>\n<p>The problem is that the consolidation transaction can only roll value forward into the same contract.</p>\n</blockquote>\n</aside>\n<p>I think that\u2019s what people usually call a \u2018consolidation\u2019 transaction, so perhaps <code>OP_CHECKCONSOLIDATION</code> might be confusing for readers if the goal is more like a \u2018delegation\u2019 (that is: one UTXO delegate the authorization for spending to other UTXOs)</p>\n<aside class=\"quote no-group\" data-username=\"billymcbip\" data-post=\"5\" data-topic=\"2177\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/billymcbip/48/1696_2.png\" class=\"avatar\"> billymcbip:</div>\n<blockquote>\n<p>To pay a third party (new SPK), you need a second transaction spending the consolidated output.</p>\n</blockquote>\n</aside>\n<p>You can have a scriptPubKey-based delegations with a script like:</p>\n<pre data-code-wrap=\"python\"><code class=\"lang-python\">  CCV_MODE_CHECK_INPUT\n  -1  # no taptweak\n  &lt;delegatee_pk&gt;\n  0  # first input\n  &lt;&gt;  # no data tweak\n  CHECKCONTRACTVERIFY\n</code></pre>\n<p>So this says \u201cEverything goes as long as the first input is tr(&lt;delegatee_pk&gt;)\u201d. However, this Script is still 38 bytes, so this kind of delegation with CCV is probably useful to save bytes only if the <code>delegatee_pk</code> is spent with a rather large Script.</p>\n<p>A delegation \u201cto itself\u201d (for example, checking that the first input has the same Script as the current input being spent), while expressible with CCV, would indeed not be safe as it would be tautologically true for the first input. So I think you are correct that OP_CCV does not implement your proposal.</p>",
  "post_number": 6,
  "post_type": 1,
  "posts_count": 14,
  "updated_at": "2025-12-31T22:29:20.555Z",
  "reply_count": 0,
  "reply_to_post_number": 5,
  "quote_count": 1,
  "incoming_link_count": 0,
  "reads": 31,
  "readers_count": 30,
  "score": 6.0,
  "yours": false,
  "topic_id": 2177,
  "topic_slug": "op-cc-a-simple-introspection-opcode-to-enable-cheaper-consolidations",
  "topic_title": "OP_CC: A simple introspection opcode to enable cheaper consolidations",
  "topic_html_title": "OP_CC: A simple introspection opcode to enable cheaper consolidations",
  "category_id": 7,
  "display_username": "salvatoshi",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 2,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"billymcbip, post:5, topic:2177\"]\nThe problem is that the consolidation transaction can only roll value forward into the same contract.\n[/quote]\n\nI think that's what people usually call a 'consolidation' transaction, so perhaps `OP_CHECKCONSOLIDATION` might be confusing for readers if the goal is more like a 'delegation' (that is: one UTXO delegate the authorization for spending to other UTXOs)\n\n[quote=\"billymcbip, post:5, topic:2177\"]\nTo pay a third party (new SPK), you need a second transaction spending the consolidated output.\n[/quote]\n\nYou can have a scriptPubKey-based delegations with a script like:\n\n```python\n  CCV_MODE_CHECK_INPUT\n  -1  # no taptweak\n  <delegatee_pk>\n  0  # first input\n  <>  # no data tweak\n  CHECKCONTRACTVERIFY\n```\nSo this says \"Everything goes as long as the first input is tr(<delegatee_pk>)\". However, this Script is still 38 bytes, so this kind of delegation with CCV is probably useful to save bytes only if the `delegatee_pk` is spent with a rather large Script.\n\nA delegation \"to itself\" (for example, checking that the first input has the same Script as the current input being spent), while expressible with CCV, would indeed not be safe as it would be tautologically true for the first input. So I think you are correct that OP_CCV does not implement your proposal.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 81,
  "hidden": false,
  "trust_level": 2,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "I think that\u2019s what people usually call a \u2018consolidation\u2019 transaction, so perhaps OP_CHECKCONSOLIDATION might be confusing for readers if the goal is more like a \u2018delegation\u2019 (that is: one UTXO delegate the authorization for spending to other UTXOs) \n\nYou can have a scriptPubKey-based delegations w&hellip;",
  "truncated": true,
  "post_url": "/t/op-cc-a-simple-introspection-opcode-to-enable-cheaper-consolidations/2177/6",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
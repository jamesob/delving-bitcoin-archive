{
  "id": 6365,
  "name": "Opt Out",
  "username": "optout",
  "avatar_template": "/user_avatar/delvingbitcoin.org/optout/{size}/1693_2.png",
  "created_at": "2025-12-03T10:41:11.234Z",
  "cooked": "<p>I\u2019d like to get some comments on a mitigation idea for slow block propagation for miners.\nThe topic of how slow block propagation can harm miners has been discussed recently in many places (e.g. <a href=\"https://bitcoinops.org/en/podcast/2025/11/25/\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Bitcoin Optech Newsletter #381 Recap Podcast | Bitcoin Optech</a> ). The topic often came up on the side of compact block propagation delays due to transaction filtering (but that\u2019s not my focus here).</p>\n<p>The straightforward-looking idea is to mine optimistically on a new chain tip while its validation is pending. I wouldn\u2019t be surprised if this has been discussed before, or there are some reasons against it, or if my understanding is incorrect, so any feedback is welcome.</p>\n<p>When I new (compact) block is received from a peer, the phases are:</p>\n<ul>\n<li>validation of the header (hash, proof of work)</li>\n<li>if not all transactions are available, requesting the missing ones (can cause delay)</li>\n<li>validation of all transaction</li>\n<li>accepting as a new tip.</li>\n</ul>\n<p>The idea is to temporarily accept the new tip for mining, while validation is pending.</p>\n<ul>\n<li>After header validation, the block is placed in a special slot for optimistically-accepted-block-pending-validation, let\u2019s call it \u201coptimistic tip\u201d for short.</li>\n<li>If optimistic tip is set, mining template generation considers it</li>\n<li>When validation succeeds, the block becomes the \u2018normal\u2019 tip, the slot can be cleared, everything returns to normal.</li>\n<li>When validation fails, the slot is cleared, thus tip revers to the old.</li>\n<li>If the validation is not finished in a give time, e.g. 20 seconds, the slot is cleared (revert to old tip). Note that validation still continues, and it\u2019s result is processed as normal.</li>\n</ul>\n<p>The difference is that during the validation period mining is directed to the new tip, reducing the risk of orphan blocks.\nThe negative outcome is if for some reason the new tip fails validation, which should be a rare case, and the loss in the case is the wasted mining time for the limited time (e.g. max 20 secs).\nAs the block headers are work-protected, I see no risk of an attack vector (intentionally forcing the node into mining on an invalid block).</p>",
  "post_number": 1,
  "post_type": 1,
  "posts_count": 7,
  "updated_at": "2025-12-03T10:41:11.234Z",
  "reply_count": 1,
  "reply_to_post_number": null,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 36,
  "readers_count": 35,
  "score": 12.2,
  "yours": false,
  "topic_id": 2139,
  "topic_slug": "optimistic-mining-tip-slow-block-propagation",
  "topic_title": "Optimistic mining tip (slow block propagation)",
  "topic_html_title": "Optimistic mining tip (slow block propagation)",
  "category_id": 8,
  "display_username": "Opt Out",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "I\u2019d like to get some comments on a mitigation idea for slow block propagation for miners.\nThe topic of how slow block propagation can harm miners has been discussed recently in many places (e.g. https://bitcoinops.org/en/podcast/2025/11/25/ ). The topic often came up on the side of compact block propagation delays due to transaction filtering (but that\u2019s not my focus here).\n\nThe straightforward-looking idea is to mine optimistically on a new chain tip while its validation is pending. I wouldn\u2019t be surprised if this has been discussed before, or there are some reasons against it, or if my understanding is incorrect, so any feedback is welcome.\n\nWhen I new (compact) block is received from a peer, the phases are:\n\n* validation of the header (hash, proof of work)\n* if not all transactions are available, requesting the missing ones (can cause delay)\n* validation of all transaction\n* accepting as a new tip.\n\nThe idea is to temporarily accept the new tip for mining, while validation is pending.\n\n* After header validation, the block is placed in a special slot for optimistically-accepted-block-pending-validation, let\u2019s call it \u201coptimistic tip\u201d for short.\n* If optimistic tip is set, mining template generation considers it\n* When validation succeeds, the block becomes the \u2018normal\u2019 tip, the slot can be cleared, everything returns to normal.\n* When validation fails, the slot is cleared, thus tip revers to the old.\n* If the validation is not finished in a give time, e.g. 20 seconds, the slot is cleared (revert to old tip). Note that validation still continues, and it\u2019s result is processed as normal.\n\nThe difference is that during the validation period mining is directed to the new tip, reducing the risk of orphan blocks.\nThe negative outcome is if for some reason the new tip fails validation, which should be a rare case, and the loss in the case is the wasted mining time for the limited time (e.g. max 20 secs).\nAs the block headers are work-protected, I see no risk of an attack vector (intentionally forcing the node into mining on an invalid block).",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 1001,
  "hidden": false,
  "trust_level": 1,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "I\u2019d like to get some comments on a mitigation idea for slow block propagation for miners.\nThe topic of how slow block propagation can harm miners has been discussed recently in many places (e.g. <a href=\"https://bitcoinops.org/en/podcast/2025/11/25/\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Bitcoin Optech Newsletter #381 Recap Podcast | Bitcoin Optech</a> ). The topic often came up on the side of c&hellip;",
  "truncated": true,
  "post_url": "/t/optimistic-mining-tip-slow-block-propagation/2139/1",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null,
  "can_vote": false
}
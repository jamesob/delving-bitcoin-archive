{
  "id": 6454,
  "name": "Anthony Towns",
  "username": "ajtowns",
  "avatar_template": "/user_avatar/delvingbitcoin.org/ajtowns/{size}/417_2.png",
  "created_at": "2025-12-18T00:56:31.102Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"Julian\" data-post=\"13\" data-topic=\"2094\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/j/74df32/48.png\" class=\"avatar\"> Julian:</div>\n<blockquote>\n<p>Therefore, it is reasonable to construct a computational budget with parameters, such that the worst case script with GSR activated, is no slower than the current worst case for most or all machines.</p>\n</blockquote>\n</aside>\n<p>That might be reasonable, but I don\u2019t think it\u2019s good enough: there\u2019s a difference between \u201cyou can waste X resources doing this silly pattern that serves no purpose except as an attack\u201d and \u201cyou can now waste X resources with arbitrary logic\u201d. In the former case, you\u2019re only vulnerable to deliberate attackers; the latter case you\u2019re vulnerable to everyone who comes up with new logic they want to deploy. It was easy to make 4MB blocks as soon as segwit was active; but until inscriptions came along, there was no real reason to do that. We don\u2019t want to have GSR result in a similar state change from \u201cit\u2019s possible to make slow blocks\u201d to \u201cit\u2019s profitable to make slow blocks\u201d, if you see what I mean.</p>\n<p>Limiting the worst case GSR execution costs to the equivalent of a block full of fairly normal transactions would be very safe, by contrast. I think that would be something on the order of ~13k signature operations per block rather than 80k (based on filling a block with ~3300 2-in, 2-out 2-of-3 multisig p2wsh transactions).</p>\n<p>Targeting a validation time of perhaps one or two microseconds per vbyte (so one or two seconds per block) or so would be a better target, I think, though obviously that would require picking some baseline hardware as a minimum standard.</p>\n<aside class=\"quote no-group\" data-username=\"Julian\" data-post=\"13\" data-topic=\"2094\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/j/74df32/48.png\" class=\"avatar\"> Julian:</div>\n<blockquote>\n<p>Maybe you are arguing that the varops budget should also be added to the existing sigversions? That would be a completely different discussion imo.</p>\n</blockquote>\n</aside>\n<p>Restricting existing script functionality is a different discussion, definitely, because it potentially confiscates coins. It can still be worth having that discussion, either because we might be able to design restrictions that are only likely to restrict attacks (cf BIP 54), or because we might be able to figure out other improvements to avoid the need to restrict things at all (eg <a href=\"https://github.com/bitcoin/bitcoin/pull/16902\">PR#16902</a> or <a href=\"https://bitcoincore.org/en/2025/10/24/disclose-cve-2025-46598/\">CVS-2025-46598</a>).</p>\n<p>But the easiest chance we have to do better is when introducing new functionality, so if we\u2019ve got a better means of analysing the potential costs (which the varops budgets is!) then also thinking about the limits from a fundamental perspective rather than just cargo culting what we\u2019ve had in the past.</p>",
  "post_number": 14,
  "post_type": 1,
  "posts_count": 14,
  "updated_at": "2025-12-18T00:56:31.102Z",
  "reply_count": 0,
  "reply_to_post_number": 13,
  "quote_count": 1,
  "incoming_link_count": 0,
  "reads": 12,
  "readers_count": 11,
  "score": 17.4,
  "yours": false,
  "topic_id": 2094,
  "topic_slug": "benchmarking-bitcoin-script-evaluation-for-the-varops-budget-great-script-restoration",
  "topic_title": "Benchmarking Bitcoin Script Evaluation for the Varops Budget (Great Script Restoration)",
  "topic_html_title": "Benchmarking Bitcoin Script Evaluation for the Varops Budget (Great Script Restoration)",
  "category_id": 7,
  "display_username": "Anthony Towns",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"Julian, post:13, topic:2094\"]\nTherefore, it is reasonable to construct a computational budget with parameters, such that the worst case script with GSR activated, is no slower than the current worst case for most or all machines.\n[/quote]\n\nThat might be reasonable, but I don't think it's good enough: there's a difference between \"you can waste X resources doing this silly pattern that serves no purpose except as an attack\" and \"you can now waste X resources with arbitrary logic\". In the former case, you're only vulnerable to deliberate attackers; the latter case you're vulnerable to everyone who comes up with new logic they want to deploy. It was easy to make 4MB blocks as soon as segwit was active; but until inscriptions came along, there was no real reason to do that. We don't want to have GSR result in a similar state change from \"it's possible to make slow blocks\" to \"it's profitable to make slow blocks\", if you see what I mean.\n\nLimiting the worst case GSR execution costs to the equivalent of a block full of fairly normal transactions would be very safe, by contrast. I think that would be something on the order of ~13k signature operations per block rather than 80k (based on filling a block with ~3300 2-in, 2-out 2-of-3 multisig p2wsh transactions).\n\nTargeting a validation time of perhaps one or two microseconds per vbyte (so one or two seconds per block) or so would be a better target, I think, though obviously that would require picking some baseline hardware as a minimum standard.\n\n[quote=\"Julian, post:13, topic:2094\"]\nMaybe you are arguing that the varops budget should also be added to the existing sigversions? That would be a completely different discussion imo.\n[/quote]\n\nRestricting existing script functionality is a different discussion, definitely, because it potentially confiscates coins. It can still be worth having that discussion, either because we might be able to design restrictions that are only likely to restrict attacks (cf BIP 54), or because we might be able to figure out other improvements to avoid the need to restrict things at all (eg [PR#16902](https://github.com/bitcoin/bitcoin/pull/16902) or [CVS-2025-46598](https://bitcoincore.org/en/2025/10/24/disclose-cve-2025-46598/)).\n\nBut the easiest chance we have to do better is when introducing new functionality, so if we've got a better means of analysing the potential costs (which the varops budgets is!) then also thinking about the limits from a fundamental perspective rather than just cargo culting what we've had in the past.",
  "actions_summary": [
    {
      "id": 2,
      "count": 1
    }
  ],
  "moderator": true,
  "admin": true,
  "staff": true,
  "user_id": 3,
  "hidden": false,
  "trust_level": 4,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "That might be reasonable, but I don\u2019t think it\u2019s good enough: there\u2019s a difference between \u201cyou can waste X resources doing this silly pattern that serves no purpose except as an attack\u201d and \u201cyou can now waste X resources with arbitrary logic\u201d. In the former case, you\u2019re only vulnerable to delibera&hellip;",
  "truncated": true,
  "post_url": "/t/benchmarking-bitcoin-script-evaluation-for-the-varops-budget-great-script-restoration/2094/14",
  "reactions": [
    {
      "id": "heart",
      "type": "emoji",
      "count": 1
    }
  ],
  "current_user_reaction": null,
  "reaction_users_count": 1,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
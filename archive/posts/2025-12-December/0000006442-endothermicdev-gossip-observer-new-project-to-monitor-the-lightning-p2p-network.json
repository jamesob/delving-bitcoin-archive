{
  "id": 6442,
  "name": "Alex",
  "username": "endothermicdev",
  "avatar_template": "/user_avatar/delvingbitcoin.org/endothermicdev/{size}/1720_2.png",
  "created_at": "2025-12-16T18:33:26.624Z",
  "cooked": "<blockquote>\n<p>For example, if 2 of my 5 peers have a message that I\u2019m missing, and I send both peers a sketch built from a set missing that message, they would both end up sending me the missing message, and we\u2019ve wasted some bandwidth. If I have to request the message data, I can choose the peer to request from, and request exactly once.</p>\n</blockquote>\n<p>I\u2019m assuming if you have 5 peers, you\u2019ll send your sketch to them at roughly even intervals - in this case, 12s.  That keeps the diff of each set smaller, which means a smaller sketch capacity needs to be encoded and the decoding time is faster. In this case, you should have your sketch updated with your previous peer\u2019s responses before the next round starts.  With a sufficient number of gossip peers, that may not hold true, but than would require a large number of peers and it\u2019s still a vast improvement over naive flood propagation.</p>\n<p>If I did have to add another round of communication to retrieve the missing messages, I might want to update my sketch so that the next peer\u2019s reconciliation round wouldn\u2019t return the same missing message - that becomes wasted sketch capacity.  If you can encode the gossip message into the sketch element (without hashing it) this becomes easier because you can update your sketch with the message you\u2019re already in the process of retrieving.  If the message is encoded into the sketch with SCID + blockheight, this becomes easy.</p>\n<p>As a side note, there are a bunch of tradeoffs in any design here, and we have implicit assumptions about number of gossip peers, and the relative availability of sketch encoding compute vs bandwidth. It might be worthwhile to state some design goals and hardware limitations.  As a starting point, I would assume a similar number of channels and updates as are broadcast today, and that the sketch encoding/decoding could be accomplished by a Raspberry Pi 5 with 10 peers (CLN current gossiper default) each getting a single round per minute.</p>",
  "post_number": 20,
  "post_type": 1,
  "posts_count": 20,
  "updated_at": "2025-12-16T18:33:26.624Z",
  "reply_count": 0,
  "reply_to_post_number": 19,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 17,
  "readers_count": 16,
  "score": 3.4,
  "yours": false,
  "topic_id": 2105,
  "topic_slug": "gossip-observer-new-project-to-monitor-the-lightning-p2p-network",
  "topic_title": "Gossip Observer: New project to monitor the Lightning P2P network",
  "topic_html_title": "Gossip Observer: New project to monitor the Lightning P2P network",
  "category_id": 7,
  "display_username": "Alex",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "reply_to_user": {
    "id": 982,
    "username": "jonhbit",
    "name": "Jonathan Harvey-Buschel",
    "avatar_template": "/user_avatar/delvingbitcoin.org/jonhbit/{size}/1661_2.png"
  },
  "bookmarked": false,
  "raw": "> For example, if 2 of my 5 peers have a message that I\u2019m missing, and I send both peers a sketch built from a set missing that message, they would both end up sending me the missing message, and we\u2019ve wasted some bandwidth. If I have to request the message data, I can choose the peer to request from, and request exactly once.\n\nI\u2019m assuming if you have 5 peers, you\u2019ll send your sketch to them at roughly even intervals - in this case, 12s.  That keeps the diff of each set smaller, which means a smaller sketch capacity needs to be encoded and the decoding time is faster. In this case, you should have your sketch updated with your previous peer\u2019s responses before the next round starts.  With a sufficient number of gossip peers, that may not hold true, but than would require a large number of peers and it\u2019s still a vast improvement over naive flood propagation.\n\nIf I did have to add another round of communication to retrieve the missing messages, I might want to update my sketch so that the next peer\u2019s reconciliation round wouldn\u2019t return the same missing message - that becomes wasted sketch capacity.  If you can encode the gossip message into the sketch element (without hashing it) this becomes easier because you can update your sketch with the message you\u2019re already in the process of retrieving.  If the message is encoded into the sketch with SCID + blockheight, this becomes easy.\n\nAs a side note, there are a bunch of tradeoffs in any design here, and we have implicit assumptions about number of gossip peers, and the relative availability of sketch encoding compute vs bandwidth. It might be worthwhile to state some design goals and hardware limitations.  As a starting point, I would assume a similar number of channels and updates as are broadcast today, and that the sketch encoding/decoding could be accomplished by a Raspberry Pi 5 with 10 peers (CLN current gossiper default) each getting a single round per minute.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 141,
  "hidden": false,
  "trust_level": 1,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "For example, if 2 of my 5 peers have a message that I\u2019m missing, and I send both peers a sketch built from a set missing that message, they would both end up sending me the missing message, and we\u2019ve wasted some bandwidth. If I have to request the message data, I can choose the peer to request from&hellip;",
  "truncated": true,
  "post_url": "/t/gossip-observer-new-project-to-monitor-the-lightning-p2p-network/2105/20",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
{
  "id": 368,
  "name": "Anthony Towns",
  "username": "ajtowns",
  "avatar_template": "/user_avatar/delvingbitcoin.org/ajtowns/{size}/417_2.png",
  "created_at": "2023-11-09T20:20:31.205Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"sipa\" data-post=\"4\" data-topic=\"173\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/sipa/48/1100_2.png\" class=\"avatar\"> sipa:</div>\n<blockquote>\n<p>I\u2019d rather not get into a discussion of what approaches to consider without knowing what <em>good enough</em> is.</p>\n</blockquote>\n</aside>\n<p>\u201cThere are levels of [good enough] that we are prepared to accept\u201d</p>\n<p>Something that works moderately better than what we have today, that only changes the edge cases would be \u201cgood enough\u201d in one sense \u2013 it doesn\u2019t even have to support package RBF at all to achieve that, eg?</p>\n<p>I\u2019d would <strong>like</strong> to end up with something that can offer some level of an anti-pinning guarantee; like:</p>\n<ul>\n<li>If you have a package of txs, with total size <span class=\"math\">s</span> paying feerate <span class=\"math\">f</span>; and</li>\n<li>The package is \u201csmall\u201d and \u201csimple\u201d according to some set of rules; and</li>\n<li>There does not currently exist more than <span class=\"math\">X</span> vB of valid txs that pay more than <span class=\"math\">X(f-d)</span> in fees in total for some <span class=\"math\">X</span>, <span class=\"math\">d</span>; and</li>\n<li>You are a required co-signer of all the txouts spent by a package; and</li>\n<li>You will refuse to sign various potential double-spends of those txouts per some set of rules that still allows for some RBF, and without necessarily be a co-signer of all the outputs you\u2019re creating;</li>\n<li>Then you can be sure your package of txs will propagate widely, and either it or one of the double-spends will have been mined already, or be included in block templates once the block min fee drops below <span class=\"math\">f</span></li>\n</ul>\n<aside class=\"quote no-group\" data-username=\"sipa\" data-post=\"4\" data-topic=\"173\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/sipa/48/1100_2.png\" class=\"avatar\"> sipa:</div>\n<blockquote>\n<p>Note that if the peer is malicious, it\u2019s ok to do something suboptimal as long as it doesn\u2019t prevent us from accepting the \u201cright\u201d solution later from an honest peer.</p>\n</blockquote>\n</aside>\n<p>That requires that an honest peer actually knows enough to even try relaying the right solution. Are we assuming we\u2019re reconciling the top of the mempool, or rebroadcasting txs when we notice conflicts or something? I don\u2019t really think relying on a good samaritan running custom software is really good enough there\u2026</p>\n<aside class=\"quote no-group\" data-username=\"sipa\" data-post=\"4\" data-topic=\"173\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/sipa/48/1100_2.png\" class=\"avatar\"> sipa:</div>\n<blockquote>\n<p>And if it\u2019s not good enough, then patching only the simple cases likely still leaves other cases that are still not enough.</p>\n</blockquote>\n</aside>\n<p>Depends \u2013 if it\u2019s possible to define what the simple cases are, and design your wallet/protocol so you only hit the simple cases, then I think that could be \u201cgood enough\u201d.</p>",
  "post_number": 7,
  "post_type": 1,
  "posts_count": 11,
  "updated_at": "2023-11-09T20:20:31.205Z",
  "reply_count": 1,
  "reply_to_post_number": 4,
  "quote_count": 1,
  "incoming_link_count": 0,
  "reads": 12,
  "readers_count": 11,
  "score": 7.4,
  "yours": false,
  "topic_id": 173,
  "topic_slug": "defunct-post-clustermempool-package-rbf",
  "topic_title": "[DEFUNCT] Post-clustermempool Package RBF",
  "topic_html_title": "[DEFUNCT] Post-clustermempool Package RBF",
  "category_id": 8,
  "display_username": "Anthony Towns",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"sipa, post:4, topic:173\"]\nI\u2019d rather not get into a discussion of what approaches to consider without knowing what *good enough* is.\n[/quote]\n\n\"There are levels of [good enough] that we are prepared to accept\"\n\nSomething that works moderately better than what we have today, that only changes the edge cases would be \"good enough\" in one sense -- it doesn't even have to support package RBF at all to achieve that, eg?\n\nI'd would **like** to end up with something that can offer some level of an anti-pinning guarantee; like:\n\n * If you have a package of txs, with total size $s$ paying feerate $f$; and\n * The package is \"small\" and \"simple\" according to some set of rules; and\n * There does not currently exist more than $X$ vB of valid txs that pay more than $X(f-d)$ in fees in total for some $X$, $d$; and\n * You are a required co-signer of all the txouts spent by a package; and\n * You will refuse to sign various potential double-spends of those txouts per some set of rules that still allows for some RBF, and without necessarily be a co-signer of all the outputs you're creating;\n * Then you can be sure your package of txs will propagate widely, and either it or one of the double-spends will have been mined already, or be included in block templates once the block min fee drops below $f$\n\n[quote=\"sipa, post:4, topic:173\"]\nNote that if the peer is malicious, it\u2019s ok to do something suboptimal as long as it doesn\u2019t prevent us from accepting the \u201cright\u201d solution later from an honest peer.\n[/quote]\n\nThat requires that an honest peer actually knows enough to even try relaying the right solution. Are we assuming we're reconciling the top of the mempool, or rebroadcasting txs when we notice conflicts or something? I don't really think relying on a good samaritan running custom software is really good enough there...\n\n[quote=\"sipa, post:4, topic:173\"]\nAnd if it\u2019s not good enough, then patching only the simple cases likely still leaves other cases that are still not enough.\n[/quote]\n\nDepends -- if it's possible to define what the simple cases are, and design your wallet/protocol so you only hit the simple cases, then I think that could be \"good enough\".",
  "actions_summary": [],
  "moderator": true,
  "admin": true,
  "staff": true,
  "user_id": 3,
  "hidden": false,
  "trust_level": 4,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "\u201cThere are levels of [good enough] that we are prepared to accept\u201d \nSomething that works moderately better than what we have today, that only changes the edge cases would be \u201cgood enough\u201d in one sense \u2013 it doesn\u2019t even have to support package RBF at all to achieve that, eg? \nI\u2019d would like to end u&hellip;",
  "truncated": true,
  "post_url": "/t/defunct-post-clustermempool-package-rbf/173/7",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
{
  "id": 5045,
  "name": "Robin Linus",
  "username": "RobinLinus",
  "avatar_template": "/user_avatar/delvingbitcoin.org/robinlinus/{size}/130_2.png",
  "created_at": "2025-05-20T06:41:26.940Z",
  "cooked": "<p>Why do you think this isn\u2019t reorg safe?</p>\n<p>The format of locations is <code>block_height/TX_index/output_index</code>.\nSo if you experience a reorg back to block_height H you simply delete all locations which\u2019s <code>block_height &gt; H</code> from the expired UTXO set, and you add all locations which were spent in blocks that were reorged out.</p>\n<hr>\n<p>However, I like your idea that you can replace expired UTXOs with, e.g., a 20-byte hash. That simplifies the scheme significantly, makes it cheaper to spend expired UTXOs, and still prunes about 75% of all spam.</p>\n<hr>\n<p><strong>Edit:</strong> Oh, now I see your point. There could be a UTXO which expired on the previous fork, but was spent on the reorging fork shortly before it expired. Then you would have already deleted it from your utxo set and can\u2019t simply restore it to verify that valid block.</p>\n<p>However, you can restore that deleted UTXO from its \u2018location\u2019 as long as you still have the block at <code>block_height</code>, in which that UTXO was created. And if you don\u2019t have that block you can request it from your peers.</p>",
  "post_number": 9,
  "post_type": 1,
  "posts_count": 32,
  "updated_at": "2025-05-20T07:11:24.650Z",
  "reply_count": 1,
  "reply_to_post_number": 8,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 55,
  "readers_count": 54,
  "score": 31.0,
  "yours": false,
  "topic_id": 1707,
  "topic_slug": "dust-expiry-clean-the-utxo-set-from-spam",
  "topic_title": "Dust Expiry: Clean the UTXO set from spam",
  "topic_html_title": "Dust Expiry: Clean the UTXO set from spam",
  "category_id": 7,
  "display_username": "Robin Linus",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 4,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "reply_to_user": {
    "id": 372,
    "username": "garlonicon",
    "name": "Garlo Nicon",
    "avatar_template": "/letter_avatar_proxy/v4/letter/g/278dde/{size}.png"
  },
  "bookmarked": false,
  "raw": "Why do you think this isn't reorg safe? \n\nThe format of locations is `block_height/TX_index/output_index`. \nSo if you experience a reorg back to block_height H you simply delete all locations which's `block_height > H` from the expired UTXO set, and you add all locations which were spent in blocks that were reorged out.\n\n------\n\nHowever, I like your idea that you can replace expired UTXOs with, e.g., a 20-byte hash. That simplifies the scheme significantly, makes it cheaper to spend expired UTXOs, and still prunes about 75% of all spam.\n\n------\n\n**Edit:** Oh, now I see your point. There could be a UTXO which expired on the previous fork, but was spent on the reorging fork shortly before it expired. Then you would have already deleted it from your utxo set and can't simply restore it to verify that valid block.\n\nHowever, you can restore that deleted UTXO from its 'location' as long as you still have the block at `block_height`, in which that UTXO was created. And if you don't have that block you can request it from your peers.",
  "actions_summary": [
    {
      "id": 2,
      "count": 1
    }
  ],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 131,
  "hidden": false,
  "trust_level": 2,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "Why do you think this isn\u2019t reorg safe? \nThe format of locations is block_height/TX_index/output_index.\nSo if you experience a reorg back to block_height H you simply delete all locations which\u2019s block_height &gt; H from the expired UTXO set, and you add all locations which were spent in blocks that we&hellip;",
  "truncated": true,
  "post_url": "/t/dust-expiry-clean-the-utxo-set-from-spam/1707/9",
  "reactions": [
    {
      "id": "+1",
      "type": "emoji",
      "count": 1
    }
  ],
  "current_user_reaction": null,
  "reaction_users_count": 1,
  "current_user_used_main_reaction": false
}
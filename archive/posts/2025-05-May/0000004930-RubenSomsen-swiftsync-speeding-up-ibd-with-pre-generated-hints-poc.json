{
  "id": 4930,
  "name": "Ruben Somsen",
  "username": "RubenSomsen",
  "avatar_template": "/user_avatar/delvingbitcoin.org/rubensomsen/{size}/188_2.png",
  "created_at": "2025-05-03T14:06:12.027Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"gmaxwell\" data-post=\"15\" data-topic=\"1562\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/g/fbc32d/48.png\" class=\"avatar\"> gmaxwell:</div>\n<blockquote>\n<p>Use xor as the aggregator</p>\n</blockquote>\n</aside>\n<p>I pointed out my reluctance to do this <a href=\"https://gnusha.org/pi/bitcoindev/CAPv7TjaM0tfbcBTRa0_713Bk6Y9jr+ShOC1KZi2V3V2zooTXyg@mail.gmail.com/T/#m42c4a511e2ef912b9d19860e83cc2823b0c92e27\">on the mailing list</a>.</p>\n<aside class=\"quote no-group\" data-username=\"gmaxwell\" data-post=\"15\" data-topic=\"1562\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/g/fbc32d/48.png\" class=\"avatar\"> gmaxwell:</div>\n<blockquote>\n<p>To be the most tidy and paranoid the user\u2019s seed should be a secret function of the blockhash at the AV height (or whatever height the hints are at, if it\u2019s not the AV height.).</p>\n</blockquote>\n</aside>\n<p>Makes sense. I have even been wondering if using that block hash as a salt is enough, given that it is essentially a commitment to the two sets (inputs and spent outputs) you\u2019re comparing against each other, but that\u2019s difficult to reason through.</p>\n<aside class=\"quote no-group\" data-username=\"gmaxwell\" data-post=\"15\" data-topic=\"1562\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/g/fbc32d/48.png\" class=\"avatar\"> gmaxwell:</div>\n<blockquote>\n<p>I would suggest that you have some per node random number (maybe there is one saved with the address database already? I forget) and just hash that with the AV blockhash to get your seed.</p>\n<p>This kind of paranoia isn\u2019t necessary for sha256, but I think it\u2019s free to design it that way and would make it safer if deployed with a weaker hash function.</p>\n</blockquote>\n</aside>\n<p>All good points.</p>\n<aside class=\"quote no-group\" data-username=\"gmaxwell\" data-post=\"15\" data-topic=\"1562\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/g/fbc32d/48.png\" class=\"avatar\"> gmaxwell:</div>\n<blockquote>\n<p>There are probably a number of tests that are still free to perform that might be getting skipped in your changes without some refactoring, probably worth going and rescuing them. Like nLocktime can be checked against the block height</p>\n</blockquote>\n</aside>\n<p>Agree.</p>\n<aside class=\"quote no-group\" data-username=\"gmaxwell\" data-post=\"15\" data-topic=\"1562\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/g/fbc32d/48.png\" class=\"avatar\"> gmaxwell:</div>\n<blockquote>\n<p>There is still a significant portion of validation past the AV point, like six months to a year of chain. So even with AV signature validation is in important part of IBD esp if the AV part is made much faster. Keeping that part fast is also good for avoiding any pressure to set AV closer to the tip.</p>\n</blockquote>\n</aside>\n<p>Right, optimization beyond the AV point is certainly important as well. In theory SwiftSync could also help you sync beyond the AV point if you accept hints from a third party. The worst they could do is waste your time.</p>",
  "post_number": 16,
  "post_type": 1,
  "posts_count": 18,
  "updated_at": "2025-05-03T14:06:12.027Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 1,
  "incoming_link_count": 5,
  "reads": 67,
  "readers_count": 66,
  "score": 38.4,
  "yours": false,
  "topic_id": 1562,
  "topic_slug": "swiftsync-speeding-up-ibd-with-pre-generated-hints-poc",
  "topic_title": "SwiftSync -- Speeding up IBD with pre-generated hints (PoC)",
  "topic_html_title": "SwiftSync &ndash; Speeding up IBD with pre-generated hints (PoC)",
  "category_id": 8,
  "display_username": "Ruben Somsen",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": "",
  "bookmarked": false,
  "raw": "[quote=\"gmaxwell, post:15, topic:1562\"]\nUse xor as the aggregator\n[/quote]\n\nI pointed out my reluctance to do this [on the mailing list](https://gnusha.org/pi/bitcoindev/CAPv7TjaM0tfbcBTRa0_713Bk6Y9jr+ShOC1KZi2V3V2zooTXyg@mail.gmail.com/T/#m42c4a511e2ef912b9d19860e83cc2823b0c92e27).\n\n[quote=\"gmaxwell, post:15, topic:1562\"]\nTo be the most tidy and paranoid the user\u2019s seed should be a secret function of the blockhash at the AV height (or whatever height the hints are at, if it\u2019s not the AV height.).\n[/quote]\n\nMakes sense. I have even been wondering if using that block hash as a salt is enough, given that it is essentially a commitment to the two sets (inputs and spent outputs) you're comparing against each other, but that's difficult to reason through.\n\n[quote=\"gmaxwell, post:15, topic:1562\"]\nI would suggest that you have some per node random number (maybe there is one saved with the address database already? I forget) and just hash that with the AV blockhash to get your seed.\n\nThis kind of paranoia isn\u2019t necessary for sha256, but I think it\u2019s free to design it that way and would make it safer if deployed with a weaker hash function.\n[/quote]\n\nAll good points.\n\n[quote=\"gmaxwell, post:15, topic:1562\"]\nThere are probably a number of tests that are still free to perform that might be getting skipped in your changes without some refactoring, probably worth going and rescuing them. Like nLocktime can be checked against the block height\n[/quote]\n\nAgree.\n\n[quote=\"gmaxwell, post:15, topic:1562\"]\nThere is still a significant portion of validation past the AV point, like six months to a year of chain. So even with AV signature validation is in important part of IBD esp if the AV part is made much faster. Keeping that part fast is also good for avoiding any pressure to set AV closer to the tip.\n[/quote]\n\nRight, optimization beyond the AV point is certainly important as well. In theory SwiftSync could also help you sync beyond the AV point if you accept hints from a third party. The worst they could do is waste your time.",
  "actions_summary": [],
  "moderator": true,
  "admin": true,
  "staff": true,
  "user_id": 2,
  "hidden": false,
  "trust_level": 3,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "I pointed out my reluctance to do this <a href=\"https://gnusha.org/pi/bitcoindev/CAPv7TjaM0tfbcBTRa0_713Bk6Y9jr+ShOC1KZi2V3V2zooTXyg@mail.gmail.com/T/#m42c4a511e2ef912b9d19860e83cc2823b0c92e27\">on the mailing list</a>. \n\nMakes sense. I have even been wondering if using that block hash as a salt is enough, given that it is essentially a commitment to the two sets (inputs and spent outputs) you\u2019re comparing against each other, but that\u2019s difficult to reaso&hellip;",
  "truncated": true,
  "post_url": "/t/swiftsync-speeding-up-ibd-with-pre-generated-hints-poc/1562/16",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
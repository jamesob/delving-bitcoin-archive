{
  "id": 5164,
  "name": "Eugene",
  "username": "Crypt-iQ",
  "avatar_template": "/user_avatar/delvingbitcoin.org/crypt-iq/{size}/306_2.png",
  "created_at": "2025-05-30T12:32:41.723Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"davidgumberg\" data-post=\"29\" data-topic=\"1052\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/davidgumberg/48/378_2.png\" class=\"avatar\"> davidgumberg:</div>\n<blockquote>\n<p>I am not very knowledgeable about TCP, but as I understand <a href=\"https://datatracker.ietf.org/doc/html/rfc5681\" rel=\"noopener nofollow ugc\">RFC 5681</a>, the issue is not a message growing to a size where it has to be split across multiple packets/segments, but a message that grows too big to fit in the receiver-advertised message window (rwnd) and the RFC 5681 (or other congestion control algorithm) specified congestion window. (cwnd). The smallest of these two (cwnd and rwnd) is the largest amount of data that can be transmitted in a single TCP round trip</p>\n</blockquote>\n</aside>\n<p>I am not sure whether the comment in PR 27086 I linked is referring to congestion issues or IPv4 fragmentation issues. I don\u2019t have hard data, but I believe both contribute to latency issues here and sending data &gt;&gt; MTU (~1500 bytes) is going to lead to lots of fragmentation. Two links if you have the time:</p>\n<ul>\n<li><a href=\"https://datatracker.ietf.org/doc/html/rfc8900#name-ip-fragmentation\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">RFC 8900 - IP Fragmentation Considered Fragile</a></li>\n<li><a href=\"https://datatracker.ietf.org/doc/html/rfc4963\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">RFC 4963 - IPv4 Reassembly Errors at High Data Rates</a></li>\n</ul>\n<p>I\u2019m not really sure that pre-filling above MTU is worth it after reading the two above RFCs, but curious to hear thoughts.</p>\n<p>EDIT: Sorry to cross-post, but I\u2019ve TLDR\u2019d the above two RFC\u2019s in a related Lightning conversation here: <a href=\"https://delvingbitcoin.org/t/latency-and-privacy-in-lightning/1723/13\" class=\"inline-onebox\">Latency and Privacy in Lightning - #13 by Crypt-iQ</a></p>\n<p>I think I\u2019ve actually conflated IP reassembly with TCP reassembly. I think maybe hard data would be nice to have here?</p>",
  "post_number": 32,
  "post_type": 1,
  "posts_count": 42,
  "updated_at": "2025-05-30T16:05:05.715Z",
  "reply_count": 1,
  "reply_to_post_number": 29,
  "quote_count": 1,
  "incoming_link_count": 4,
  "reads": 60,
  "readers_count": 59,
  "score": 37.0,
  "yours": false,
  "topic_id": 1052,
  "topic_slug": "stats-on-compact-block-reconstructions",
  "topic_title": "Stats on compact block reconstructions",
  "topic_html_title": "Stats on compact block reconstructions",
  "category_id": 7,
  "display_username": "Eugene",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 4,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"davidgumberg, post:29, topic:1052\"]\nI am not very knowledgeable about TCP, but as I understand [RFC 5681](https://datatracker.ietf.org/doc/html/rfc5681), the issue is not a message growing to a size where it has to be split across multiple packets/segments, but a message that grows too big to fit in the receiver-advertised message window (rwnd) and the RFC 5681 (or other congestion control algorithm) specified congestion window. (cwnd). The smallest of these two (cwnd and rwnd) is the largest amount of data that can be transmitted in a single TCP round trip\n[/quote]\n\nI am not sure whether the comment in PR 27086 I linked is referring to congestion issues or IPv4 fragmentation issues. I don't have hard data, but I believe both contribute to latency issues here and sending data >> MTU (~1500 bytes) is going to lead to lots of fragmentation. Two links if you have the time:\n- https://datatracker.ietf.org/doc/html/rfc8900#name-ip-fragmentation\n- https://datatracker.ietf.org/doc/html/rfc4963\n\nI'm not really sure that pre-filling above MTU is worth it after reading the two above RFCs, but curious to hear thoughts.\n\nEDIT: Sorry to cross-post, but I've TLDR'd the above two RFC's in a related Lightning conversation here: https://delvingbitcoin.org/t/latency-and-privacy-in-lightning/1723/13?u=crypt-iq\n\nI think I've actually conflated IP reassembly with TCP reassembly. I think maybe hard data would be nice to have here?",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 253,
  "hidden": false,
  "trust_level": 2,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "I am not sure whether the comment in PR 27086 I linked is referring to congestion issues or IPv4 fragmentation issues. I don\u2019t have hard data, but I believe both contribute to latency issues here and sending data &gt;&gt; MTU (~1500 bytes) is going to lead to lots of fragmentation. Two links if you have &hellip;",
  "truncated": true,
  "post_url": "/t/stats-on-compact-block-reconstructions/1052/32",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
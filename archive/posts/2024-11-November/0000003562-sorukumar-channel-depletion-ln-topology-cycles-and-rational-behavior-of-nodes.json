{
  "id": 3562,
  "name": "Saurabh Kumar",
  "username": "sorukumar",
  "avatar_template": "/user_avatar/delvingbitcoin.org/sorukumar/{size}/332_2.png",
  "created_at": "2024-11-19T22:54:24.930Z",
  "cooked": "<p>Thank you for this comprehensive work. Had an amazing last couple of days going through notebooks, linked papers and discussions</p>\n<p>While I am in awe of the scope of the work, my comment is more around being conservative on making conclusions. While it is tempting, let\u2019s not get carried away by sexy maths and good looking charts.</p>\n<p>We are thoughtful on listing out the limitation of the model, but underestimating how critical they are. More so, because, we don\u2019t have good grasp or theory on how they can \u2018change\u2019 the conclusions.</p>\n<p>Of course some of the conclusions will continue to make sense. I\u2019ll go on to add that number of insights tell us more about the constraints of the model rather than the lightning network. (This applies to Guidi\u2019s otherwise excellent work as well).</p>\n<p>To illustrate this, I\u2019ll focus on a \u2018part\u2019 of the one of the listed limitation.</p>\n<aside class=\"quote no-group\" data-username=\"renepickhardt\" data-post=\"1\" data-topic=\"1259\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/renepickhardt/48/7_2.png\" class=\"avatar\"> renepickhardt:</div>\n<blockquote>\n<ul>\n<li>While payment dynamics are part of the model the network topology and fees are assumed to be static.</li>\n</ul>\n</blockquote>\n</aside>\n<p>Fee:</p>\n<p>Fee is one of the most effective levers for node operators to manage balance of the channel.</p>\n<p>Currently Fee potential defined as</p>\n<aside class=\"quote no-group quote-modified\" data-username=\"renepickhardt\" data-post=\"1\" data-topic=\"1259\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/renepickhardt/48/7_2.png\" class=\"avatar\"> renepickhardt:</div>\n<blockquote>\n<p>\u03d5v=\u2211e\u2208E:v\u2208E(\u03bb(v,e)\u22c5ppm(v,e))</p>\n</blockquote>\n</aside>\n<p>Modeling liquidity and channel depletion with static fees is like evaluating a baseball pitcher with their throwing arm tied. it might lead us in wrong direction if we\u2019re not careful.</p>\n<p>A rational node operator optimizes for \u2018lifetime fee value\u2019 (LTF) of a channel. The levers of LTF: Channel Capacity, Channels own fee policy, Fee policies of adjacent channels (same node)</p>\n<p>Potential input for the fee part of the fee potential:</p>\n<ol>\n<li>\n<p>Liquidity level and/or liquidity share of the channel</p>\n</li>\n<li>\n<p>Peer\u2019s fee policy for the channel</p>\n</li>\n<li>\n<p>Fee &amp; liquidity share of node\u2019s other channels preceding and following in potential paths</p>\n</li>\n</ol>\n<p>Of course, incorporating all these factors may make the model too complicated for initial work, but at least we should have dynamic fee.</p>\n<p>I\u2019ll argue that no channel will ever get depleted if a we have rational/smart node runners.</p>\n<ul>\n<li>In liquidity-share aware fee models, fee rates approach infinity as the channel\u2019s liquidity is getting towards depletion on one side. Consequently, channel unusability is triggered by prohibitive fees rather than absolute liquidity exhaustion</li>\n<li>Why do we have depleted channels now? It is because only few nodes are professionally run, and we don\u2019t have good fee management algo/tools yet.</li>\n</ul>\n<p>by the way, happy that fee is already in the scope of work now:</p>\n<aside class=\"quote no-group\" data-username=\"renepickhardt\" data-post=\"3\" data-topic=\"1259\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/renepickhardt/48/7_2.png\" class=\"avatar\"> renepickhardt:</div>\n<blockquote>\n<p>Instead of focusing on such a mixed model wouldn\u2019t it be more interesting to focus on how node operators should adjust their fees to help with flow control and adjust to channel depletion?</p>\n</blockquote>\n</aside>\n<p>Given the depth and breadth of ideas presented, I\u2019ll tackle only open questions and conclusion with quick responses, and go deeper if there is interest.</p>\n<p><strong>Open Questions:</strong></p>\n<aside class=\"quote no-group\" data-username=\"renepickhardt\" data-post=\"1\" data-topic=\"1259\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/renepickhardt/48/7_2.png\" class=\"avatar\"> renepickhardt:</div>\n<blockquote>\n<p>Is this evidence enough to conclude that drain on channels and depletion does not come from the existence of sink / and source nodes but would also emerge in a circular economy?</p>\n</blockquote>\n</aside>\n<p>Is this evidence enough: No, not at all. Will channel depletion will emerge w/o channel management. Yes, it will.</p>\n<aside class=\"quote no-group\" data-username=\"renepickhardt\" data-post=\"1\" data-topic=\"1259\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/renepickhardt/48/7_2.png\" class=\"avatar\"> renepickhardt:</div>\n<blockquote>\n<p>Can one derive strategies for node operators to adopt fees in their liquidity management strategies?</p>\n</blockquote>\n</aside>\n<p>Yes, an area that is as important as any other work.</p>\n<aside class=\"quote no-group\" data-username=\"renepickhardt\" data-post=\"1\" data-topic=\"1259\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/renepickhardt/48/7_2.png\" class=\"avatar\"> renepickhardt:</div>\n<blockquote>\n<p>Are more channels than a spanning tree useful? I mean obviously they provide redundancy but also depeletion and have on chain cost.</p>\n</blockquote>\n</aside>\n<p>Pls don\u2019t ask this. We are asking this cuz we are going too far with a simple model with number of constraints. In real world it does not make sense.</p>\n<aside class=\"quote no-group\" data-username=\"renepickhardt\" data-post=\"1\" data-topic=\"1259\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/renepickhardt/48/7_2.png\" class=\"avatar\"> renepickhardt:</div>\n<blockquote>\n<p>Has anyone a good data set to test how accurate the prediction is in comparison to the actual network?</p>\n</blockquote>\n</aside>\n<p>Not sure what you are looking for. But, I may have some data</p>\n<p><strong>Conclusions</strong></p>\n<p>Most likely much less probing will be necessary to estimate where the liquidity is located.</p>\n<p><em>Yes, may be. But other factors would also have play on it.</em></p>\n<p>A spanning tree of non depleted channels remains. This is pretty much a hub and spoke topology 3.</p>\n<p><em>This is very loaded question and conclusion, and may need \u2018qualifications\u2019.</em></p>\n<p>The direction of the drain off a particular channel depends on the topology and fees within the entire network (and payment flows). In particular it the ratio of ppms in both directions may be less indicative.</p>\n<p><em>Yes, true. However, On the ratio of PPM in both direction, it may not be indicative now, cuz most of the nodes are run as hobby projects. For professionally managed nodes when they get smarter, it will be even more indicative than it is now.</em></p>",
  "post_number": 5,
  "post_type": 1,
  "updated_at": "2024-11-19T22:54:24.930Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 2,
  "incoming_link_count": 1,
  "reads": 2,
  "readers_count": 1,
  "score": 5.4,
  "yours": false,
  "topic_id": 1259,
  "topic_slug": "channel-depletion-ln-topology-cycles-and-rational-behavior-of-nodes",
  "topic_title": "Channel depletion, LN Topology, Cycles and rational behavior of nodes",
  "topic_html_title": "Channel depletion, LN Topology, Cycles and rational behavior of nodes",
  "category_id": 7,
  "display_username": "Saurabh Kumar",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "Thank you for this comprehensive work. Had an amazing last couple of days going through notebooks, linked papers and discussions\n\nWhile I am in awe of the scope of the work, my comment is more around being conservative on making conclusions. While it is tempting, let\u2019s not get carried away by sexy maths and good looking charts.\n\nWe are thoughtful on listing out the limitation of the model, but underestimating how critical they are. More so, because, we don\u2019t have good grasp or theory on how they can \u2018change\u2019 the conclusions. \n\nOf course some of the conclusions will continue to make sense. I\u2019ll go on to add that number of insights tell us more about the constraints of the model rather than the lightning network. (This applies to Guidi's otherwise excellent work as well).\n\nTo illustrate this, I'll focus on a 'part' of the one of the listed limitation.\n\n[quote=\"renepickhardt, post:1, topic:1259\"]\n\n* While payment dynamics are part of the model the network topology and fees are assumed to be static.\n\n[/quote]\n\n\nFee:\n\nFee is one of the most effective levers for node operators to manage balance of the channel.\n\nCurrently Fee potential defined as\n\n[quote=\"renepickhardt, post:1, topic:1259\"]\n\u03d5v=\u2211e\u2208E:v\u2208E(\u03bb(v,e)\u22c5ppm(v,e))\n[/quote]\n\nModeling liquidity and channel depletion with static fees is like evaluating a baseball pitcher with their throwing arm tied. it might lead us in wrong direction if we're not careful.\n\nA rational node operator optimizes for 'lifetime fee value' (LTF) of a channel. The levers of LTF: Channel Capacity, Channels own fee policy, Fee policies of adjacent channels (same node)\n\nPotential input for the fee part of the fee potential:\n\n1. Liquidity level and/or liquidity share of the channel\n\n2. Peer's fee policy for the channel\n\n3. Fee & liquidity share of node's other channels preceding and following in potential paths\n\nOf course, incorporating all these factors may make the model too complicated for initial work, but at least we should have dynamic fee.\n\nI\u2019ll argue that no channel will ever get depleted if a we have rational/smart node runners.\n\n* In liquidity-share aware fee models, fee rates approach infinity as the channel's liquidity is getting towards depletion on one side. Consequently, channel unusability is triggered by prohibitive fees rather than absolute liquidity exhaustion\n* Why do we have depleted channels now? It is because only few nodes are professionally run, and we don\u2019t have good fee management algo/tools yet.\n\nby the way, happy that fee is already in the scope of work now:\n[quote=\"renepickhardt, post:3, topic:1259\"]\nInstead of focusing on such a mixed model wouldn\u2019t it be more interesting to focus on how node operators should adjust their fees to help with flow control and adjust to channel depletion?\n[/quote]\n\n\n\nGiven the depth and breadth of ideas presented, I\u2019ll tackle only open questions and conclusion with quick responses, and go deeper if there is interest.\n\n**Open Questions:**\n\n[quote=\"renepickhardt, post:1, topic:1259\"]\nIs this evidence enough to conclude that drain on channels and depletion does not come from the existence of sink / and source nodes but would also emerge in a circular economy?\n[/quote]\n\n\nIs this evidence enough: No, not at all. Will channel depletion will emerge w/o channel management. Yes, it will.\n\n\n[quote=\"renepickhardt, post:1, topic:1259\"]\nCan one derive strategies for node operators to adopt fees in their liquidity management strategies?\n[/quote]\n\n\nYes, an area that is as important as any other work.\n\n[quote=\"renepickhardt, post:1, topic:1259\"]\nAre more channels than a spanning tree useful? I mean obviously they provide redundancy but also depeletion and have on chain cost.\n[/quote]\n\n\nPls don\u2019t ask this. We are asking this cuz we are going too far with a simple model with number of constraints. In real world it does not make sense.\n\n[quote=\"renepickhardt, post:1, topic:1259\"]\nHas anyone a good data set to test how accurate the prediction is in comparison to the actual network?\n[/quote]\n\nNot sure what you are looking for. But, I may have some data\n\n**Conclusions**\n\nMost likely much less probing will be necessary to estimate where the liquidity is located. \n\n*Yes, may be. But other factors would also have play on it.*\n\nA spanning tree of non depleted channels remains. This is pretty much a hub and spoke topology 3. \n\n*This is very loaded question and conclusion, and may need \u2018qualifications\u2019.*\n\nThe direction of the drain off a particular channel depends on the topology and fees within the entire network (and payment flows). In particular it the ratio of ppms in both directions may be less indicative.\n\n*Yes, true. However, On the ratio of PPM in both direction, it may not be indicative now, cuz most of the nodes are run as hobby projects. For professionally managed nodes when they get smarter, it will be even more indicative than it is now.*",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 270,
  "hidden": false,
  "trust_level": 1,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
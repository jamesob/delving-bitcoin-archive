{
  "id": 6231,
  "name": "",
  "username": "craigraw",
  "avatar_template": "/user_avatar/delvingbitcoin.org/craigraw/{size}/1660_2.png",
  "created_at": "2025-11-13T09:06:49.270Z",
  "cooked": "<blockquote>\n<p>Thoughts on birthday and maxlabel?</p>\n</blockquote>\n<p>While no doubt useful for scanning, I think it may be disturbing for users to see their \u201cxpub\u201d or output descriptor change if they change their wallet birthday. The same is true for adding a label. That said, I believe the the use case of labels (publishing multiple SP addresses that differentiate incoming payments but trivially identify as the same entity) is limited to specialised applications like exchanges. Wallets should in general rather use SP keys derived from different BIP32 accounts.</p>\n<blockquote>\n<p>Thoughts on encoding scan+spend into one unit while leaving birthday and maxlabel as ints?</p>\n</blockquote>\n<p>I think there is merit to the idea of encoding the sp_version+scan_key+spend_key into a single unit. While it would have been possible to list a chaincode and key separately, xpubs have proven to be a useful convenience, and they eliminate \u201cswapping\u201d of keys as you suggest. As to leaving birthday and maxlabel as ints in an output descriptor format, I think these would be useful but suggest making them optional, where reasonable defaults (block height 842579 and one change label) are assumed if not supplied.</p>\n<blockquote>\n<p>I think we can reasonably assume that scanning with default quite hight value (100? 1000? 10_000?) cames at with nearly no noticeable performance cost</p>\n</blockquote>\n<p>I don\u2019t believe this is true. Each additional label means at minimum an EC point addition and comparison against all eligible outputs for each transaction scanned. Here is are some benchmarking figures using <a href=\"https://github.com/sparrowwallet/frigate\" rel=\"noopener nofollow ugc\">Frigate</a> on an 8x RTX 3060 GPU machine testing over a 64 week period:</p>\n<div class=\"md-table\">\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Time (ms)</th>\n<th>Tx/sec</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>No label</td>\n<td>16,949</td>\n<td>4,199,074</td>\n</tr>\n<tr>\n<td>Change label</td>\n<td>17,042</td>\n<td>4,176,159</td>\n</tr>\n<tr>\n<td>10 labels</td>\n<td>19,334</td>\n<td>3,681,086</td>\n</tr>\n<tr>\n<td>30 labels</td>\n<td>25,109</td>\n<td>2,834,446</td>\n</tr>\n</tbody>\n</table>\n</div>",
  "post_number": 11,
  "post_type": 1,
  "posts_count": 10,
  "updated_at": "2025-11-13T09:06:49.270Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 8,
  "readers_count": 7,
  "score": 1.4,
  "yours": false,
  "topic_id": 2080,
  "topic_slug": "bip352-private-key-formats",
  "topic_title": "BIP352 private key formats",
  "topic_html_title": "BIP352 private key formats",
  "category_id": 8,
  "display_username": "",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "> Thoughts on birthday and maxlabel?\n\nWhile no doubt useful for scanning, I think it may be disturbing for users to see their \u201cxpub\u201d or output descriptor change if they change their wallet birthday. The same is true for adding a label. That said, I believe the the use case of labels (publishing multiple SP addresses that differentiate incoming payments but trivially identify as the same entity) is limited to specialised applications like exchanges. Wallets should in general rather use SP keys derived from different BIP32 accounts.\n\n> Thoughts on encoding scan+spend into one unit while leaving birthday and maxlabel as ints?\n\nI think there is merit to the idea of encoding the sp_version+scan_key+spend_key into a single unit. While it would have been possible to list a chaincode and key separately, xpubs have proven to be a useful convenience, and they eliminate \u201cswapping\u201d of keys as you suggest. As to leaving birthday and maxlabel as ints in an output descriptor format, I think these would be useful but suggest making them optional, where reasonable defaults (block height 842579 and one change label) are assumed if not supplied.\n\n> I think we can reasonably assume that scanning with default quite hight value (100? 1000? 10_000?) cames at with nearly no noticeable performance cost\n\nI don\u2019t believe this is true. Each additional label means at minimum an EC point addition and comparison against all eligible outputs for each transaction scanned. Here is are some benchmarking figures using [Frigate](https://github.com/sparrowwallet/frigate) on an 8x RTX 3060 GPU machine testing over a 64 week period:\n\n|  | Time (ms) | Tx/sec |\n|----|----|----|\n| No label | 16,949 | 4,199,074 |\n| Change label | 17,042 | 4,176,159 |\n| 10 labels | 19,334 | 3,681,086 |\n| 30 labels | 25,109 | 2,834,446 |",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 981,
  "hidden": false,
  "trust_level": 0,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "Thoughts on birthday and maxlabel? \n\nWhile no doubt useful for scanning, I think it may be disturbing for users to see their \u201cxpub\u201d or output descriptor change if they change their wallet birthday. The same is true for adding a label. That said, I believe the the use case of labels (publishing mult&hellip;",
  "truncated": true,
  "post_url": "/t/bip352-private-key-formats/2080/11",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
{
  "id": 1108,
  "name": "Anthony Towns",
  "username": "ajtowns",
  "avatar_template": "/user_avatar/delvingbitcoin.org/ajtowns/{size}/3_2.png",
  "created_at": "2024-01-14T06:13:17.355Z",
  "cooked": "<p>I had a go at trying this out and failed pretty miserably. Some problems:</p>\n<ul>\n<li>the feature bit used for eltoo was 50 which overlaps with zeroconf channels. should perhaps be 0xcc32? (ie the two byte ascii string \u2018L2\u2019, plus 32768 to put it into the experimental feature bits range) of course, if you do that, cln listpeers decides to put 13000 \u201c0\u201d characters in the \u201cfeatures\u201d field, which gets pretty annoying</li>\n<li>trying to create non-eltoo channels is just broken anyway, so connecting to normal peers isn\u2019t useful</li>\n<li>creating a channel between two nodes does seem to work</li>\n<li>paying an invoice doesn\u2019t seem to work: it couldn\u2019t find a path to its peer somehow</li>\n<li>cooperative shutdown doesn\u2019t seem to work; the closing node thinks its closing, the other node doesn\u2019t (<code>eltoo_channeld-chan#1: billboard perm: Bad shutdown</code> maybe?).</li>\n<li>unilateral shutdown also doesn\u2019t seem to work; segfault/nullptr deref? after sending the unilateral shutdown when trying to resolve txid</li>\n<li>restarting nodes after stopping/crashing doesn\u2019t work \u2013 the <code>per_commit_remote</code> value stored in the db isn\u2019t a valid secp point, so loading it fails</li>\n</ul>\n<p>I did manage to broadcast my <a href=\"https://mempool.space/signet/tx/babe14326bf9ca2a180247e0e46970095403451c0b3b2b4c684aa353b419e9b7\">update</a> and <a href=\"https://mempool.space/signet/tx/21f854714debb0db46adc9d446a242e9a1d502dfe9761ac490ae8862fc0254b1#vin=0\">settlement</a> txs and pay for them with ephemeral anchors manually (the update tx was in the logs, and the settlement tx was able to be reconstructed just by dropping in the update tx\u2019s txid).</p>\n<p>I then got stuck trying to figure out the private keys in order to actually reclaim those funds, and that\u2019s where I\u2019m at for now.</p>",
  "post_number": 8,
  "post_type": 1,
  "updated_at": "2024-01-14T06:13:17.355Z",
  "reply_count": 1,
  "reply_to_post_number": null,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 5,
  "readers_count": 4,
  "score": 6.0,
  "yours": false,
  "topic_id": 359,
  "topic_slug": "ln-symmetry-project-recap",
  "topic_title": "LN-Symmetry Project Recap",
  "topic_html_title": "LN-Symmetry Project Recap",
  "category_id": 7,
  "display_username": "Anthony Towns",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "I had a go at trying this out and failed pretty miserably. Some problems:\n\n * the feature bit used for eltoo was 50 which overlaps with zeroconf channels. should perhaps be 0xcc32? (ie the two byte ascii string 'L2', plus 32768 to put it into the experimental feature bits range) of course, if you do that, cln listpeers decides to put 13000 \"0\" characters in the \"features\" field, which gets pretty annoying\n * trying to create non-eltoo channels is just broken anyway, so connecting to normal peers isn't useful\n * creating a channel between two nodes does seem to work\n * paying an invoice doesn't seem to work: it couldn't find a path to its peer somehow\n * cooperative shutdown doesn't seem to work; the closing node thinks its closing, the other node doesn't (`eltoo_channeld-chan#1: billboard perm: Bad shutdown` maybe?).\n * unilateral shutdown also doesn't seem to work; segfault/nullptr deref? after sending the unilateral shutdown when trying to resolve txid\n * restarting nodes after stopping/crashing doesn't work -- the `per_commit_remote` value stored in the db isn't a valid secp point, so loading it fails\n\nI did manage to broadcast my [update](https://mempool.space/signet/tx/babe14326bf9ca2a180247e0e46970095403451c0b3b2b4c684aa353b419e9b7) and [settlement](https://mempool.space/signet/tx/21f854714debb0db46adc9d446a242e9a1d502dfe9761ac490ae8862fc0254b1#vin=0) txs and pay for them with ephemeral anchors manually (the update tx was in the logs, and the settlement tx was able to be reconstructed just by dropping in the update tx's txid).\n\nI then got stuck trying to figure out the private keys in order to actually reclaim those funds, and that's where I'm at for now.",
  "actions_summary": [],
  "moderator": true,
  "admin": true,
  "staff": true,
  "user_id": 3,
  "hidden": false,
  "trust_level": 4,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
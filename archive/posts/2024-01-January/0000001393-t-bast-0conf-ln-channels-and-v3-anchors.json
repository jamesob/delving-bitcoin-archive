{
  "id": 1393,
  "name": "Bastien Teinturier",
  "username": "t-bast",
  "avatar_template": "/user_avatar/delvingbitcoin.org/t-bast/{size}/98_2.png",
  "created_at": "2024-01-31T07:30:44.084Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"MattCorallo\" data-post=\"3\" data-topic=\"494\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/m/e47c2d/48.png\" class=\"avatar\"> MattCorallo:</div>\n<blockquote>\n<p>Mmm, that\u2019s a good point, though that is still a relatively simpler chain that we could still analyze assuming no additional unconfirmed inputs, no?</p>\n</blockquote>\n</aside>\n<p>I\u2019m not sure it is, because each splice may have a change output, so you end up with arbitrary trees of transactions\u2026</p>\n<aside class=\"quote no-group\" data-username=\"MattCorallo\" data-post=\"3\" data-topic=\"494\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/m/e47c2d/48.png\" class=\"avatar\"> MattCorallo:</div>\n<blockquote>\n<p>All of the v3 discussion assumes cluster mempool <img src=\"https://delvingbitcoin.org/images/emoji/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n</blockquote>\n</aside>\n<p>That\u2019s not the way I understood it, the plan is currently to deploy v3 before cluster mempool to have a good enough solution to mitigate most pinning vectors. And then v3 can become more powerful once cluster mempool happens.</p>\n<aside class=\"quote no-group\" data-username=\"MattCorallo\" data-post=\"3\" data-topic=\"494\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/m/e47c2d/48.png\" class=\"avatar\"> MattCorallo:</div>\n<blockquote>\n<p>I think we should strive, if at all possible, to have splice bumps be RBF, not CPFP. Seems nuts to prefer CPFP, no?</p>\n</blockquote>\n</aside>\n<p>But we don\u2019t have a choice, if we use 0-conf, we just can\u2019t use RBF safely, we have to use CPFP unfortunately. Otherwise there are trivial attacks that lets the other peer steal funds.</p>\n<aside class=\"quote no-group\" data-username=\"MattCorallo\" data-post=\"3\" data-topic=\"494\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/m/e47c2d/48.png\" class=\"avatar\"> MattCorallo:</div>\n<blockquote>\n<p>Sure, but if we\u2019re rethinking how we do mempool policy, we should probably think through these things so that we try to get as close as possible and don\u2019t end up with a v4 <img src=\"https://delvingbitcoin.org/images/emoji/twitter/slight_smile.png?v=12\" title=\":slight_smile:\" class=\"emoji\" alt=\":slight_smile:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n</blockquote>\n</aside>\n<p>That\u2019s true! But I don\u2019t think we\u2019d need any kind of v4, if v3 starts with a restrictive package topology and later relaxes it (while still using v3), that\u2019s ok? That\u2019s why I\u2019d lean towards a first deployment of v3 for very simple packages that makes our lives easier sooner rather than later, and gets even better over time.</p>\n<aside class=\"quote no-group\" data-username=\"morehouse\" data-post=\"4\" data-topic=\"494\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/letter_avatar_proxy/v4/letter/m/df705f/48.png\" class=\"avatar\"> morehouse:</div>\n<blockquote>\n<p>Without complicating the current v3 proposal, we could achieve similar results by making 0-conf funding transactions v3 and adding a shared anchor to them. Then either party can CPFP in an emergency.</p>\n</blockquote>\n</aside>\n<p>The issue with this is that we cannot create chains of unconfirmed splices anymore (because v3 can have only one unconfirmed child right now), which in practice is quite limiting.</p>",
  "post_number": 6,
  "post_type": 1,
  "updated_at": "2024-01-31T07:30:44.084Z",
  "reply_count": 0,
  "reply_to_post_number": 3,
  "quote_count": 2,
  "incoming_link_count": 0,
  "reads": 7,
  "readers_count": 6,
  "score": 1.2,
  "yours": false,
  "topic_id": 494,
  "topic_slug": "0conf-ln-channels-and-v3-anchors",
  "topic_title": "0conf LN channels and v3 anchors",
  "topic_html_title": "0conf LN channels and v3 anchors",
  "category_id": 7,
  "display_username": "Bastien Teinturier",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"MattCorallo, post:3, topic:494\"]\nMmm, that\u2019s a good point, though that is still a relatively simpler chain that we could still analyze assuming no additional unconfirmed inputs, no?\n[/quote]\n\nI'm not sure it is, because each splice may have a change output, so you end up with arbitrary trees of transactions...\n\n[quote=\"MattCorallo, post:3, topic:494\"]\nAll of the v3 discussion assumes cluster mempool :slight_smile:\n[/quote]\n\nThat's not the way I understood it, the plan is currently to deploy v3 before cluster mempool to have a good enough solution to mitigate most pinning vectors. And then v3 can become more powerful once cluster mempool happens.\n\n[quote=\"MattCorallo, post:3, topic:494\"]\nI think we should strive, if at all possible, to have splice bumps be RBF, not CPFP. Seems nuts to prefer CPFP, no?\n[/quote]\n\nBut we don't have a choice, if we use 0-conf, we just can't use RBF safely, we have to use CPFP unfortunately. Otherwise there are trivial attacks that lets the other peer steal funds.\n\n[quote=\"MattCorallo, post:3, topic:494\"]\nSure, but if we\u2019re rethinking how we do mempool policy, we should probably think through these things so that we try to get as close as possible and don\u2019t end up with a v4 :slight_smile:\n[/quote]\n\nThat's true! But I don't think we'd need any kind of v4, if v3 starts with a restrictive package topology and later relaxes it (while still using v3), that's ok? That's why I'd lean towards a first deployment of v3 for very simple packages that makes our lives easier sooner rather than later, and gets even better over time.\n\n[quote=\"morehouse, post:4, topic:494\"]\nWithout complicating the current v3 proposal, we could achieve similar results by making 0-conf funding transactions v3 and adding a shared anchor to them. Then either party can CPFP in an emergency.\n[/quote]\n\nThe issue with this is that we cannot create chains of unconfirmed splices anymore (because v3 can have only one unconfirmed child right now), which in practice is quite limiting.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 101,
  "hidden": false,
  "trust_level": 3,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
{
  "id": 3975,
  "name": "Sjors Provoost",
  "username": "sjors",
  "avatar_template": "/user_avatar/delvingbitcoin.org/sjors/{size}/59_2.png",
  "created_at": "2025-01-06T12:18:44.137Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"AntoineP\" data-post=\"22\" data-topic=\"1326\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/antoinep/48/483_2.png\" class=\"avatar\"> AntoineP:</div>\n<blockquote>\n<p>without adapting the block creation logic</p>\n</blockquote>\n</aside>\n<p>Which is a bug in Bitcoin Core. It was caught before release. The second bug wasn\u2019t, it\u2019s fixed by 31600. It just illustrates how easy it is to screw things up when the grace period is only 600 seconds.</p>\n<p>Update: it was a known omission before the original PR was merged, so maybe shouldn\u2019t count as a bug: <a href=\"https://github.com/bitcoin/bitcoin/pull/30647#issuecomment-2291734952\" class=\"inline-onebox\">Move maximum timewarp attack threshold back to 600s from 7200s by TheBlueMatt \u00b7 Pull Request #30647 \u00b7 bitcoin/bitcoin \u00b7 GitHub</a></p>\n<aside class=\"quote no-group\" data-username=\"AntoineP\" data-post=\"22\" data-topic=\"1326\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/antoinep/48/483_2.png\" class=\"avatar\"> AntoineP:</div>\n<blockquote>\n<p>Are you asking if in theory it\u2019s possible to extremely increase the block rate with any grace period value if the attack persists long enough? If so then yes.</p>\n</blockquote>\n</aside>\n<p>Exactly. I\u2019m not really worried about a one-off 10% increase in block speed. But compounded over time it\u2019s more worrying.</p>\n<aside class=\"quote no-group\" data-username=\"AntoineP\" data-post=\"22\" data-topic=\"1326\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/antoinep/48/483_2.png\" class=\"avatar\"> AntoineP:</div>\n<blockquote>\n<p>with a 600 seconds grace period it would take hundreds of years to bring the difficulty down to 1</p>\n</blockquote>\n</aside>\n<p>Hundreds of years is enough time to come up with a plan, but serious problems could happen long before difficulty reaches 1. E.g. deep reorgs would be easier to execute.</p>\n<p>If we take a difficulty reduction of 10x as the (arbitrary) definition of \u201cbad\u201d, and if assume a 10% difficulty decrease every ~10 retarget periods, it takes 240 retarget periods to reduce to reach this \u201cbad\u201d situation. That\u2019s several years, probably enough to discuss and deploy a soft-fork to make it stricter. But not super comfortable either.</p>\n<p>Whereas with a grace period of 600 reaching \u201cbad\u201d takes 20 times longer, which seems very safe.</p>\n<p>So this may be a good argument for keeping the number at 600 and to insist that pools either use the <code>min_time</code> field provided by Bitcoin Core, or implement their own code for the minimum time that takes both MTP and the new timewarp rule into account.</p>",
  "post_number": 23,
  "post_type": 1,
  "updated_at": "2025-01-06T12:29:30.527Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 1,
  "incoming_link_count": 0,
  "reads": 9,
  "readers_count": 8,
  "score": 1.8,
  "yours": false,
  "topic_id": 1326,
  "topic_slug": "timewarp-attack-600-second-grace-period",
  "topic_title": "Timewarp attack 600 second grace period",
  "topic_html_title": "Timewarp attack 600 second grace period",
  "category_id": 7,
  "display_username": "Sjors Provoost",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 2,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"AntoineP, post:22, topic:1326\"]\nwithout adapting the block creation logic\n[/quote]\n\nWhich is a bug in Bitcoin Core. It was caught before release. The second bug wasn't, it's fixed by 31600. It just illustrates how easy it is to screw things up when the grace period is only 600 seconds.\n\nUpdate: it was a known omission before the original PR was merged, so maybe shouldn't count as a bug: https://github.com/bitcoin/bitcoin/pull/30647#issuecomment-2291734952\n\n[quote=\"AntoineP, post:22, topic:1326\"]\nAre you asking if in theory it\u2019s possible to extremely increase the block rate with any grace period value if the attack persists long enough? If so then yes.\n[/quote]\n\nExactly. I'm not really worried about a one-off 10% increase in block speed. But compounded over time it's more worrying.\n\n[quote=\"AntoineP, post:22, topic:1326\"]\nwith a 600 seconds grace period it would take hundreds of years to bring the difficulty down to 1\n[/quote]\n\nHundreds of years is enough time to come up with a plan, but serious problems could happen long before difficulty reaches 1. E.g. deep reorgs would be easier to execute.\n\nIf we take a difficulty reduction of 10x as the (arbitrary) definition of \"bad\", and if assume a 10% difficulty decrease every ~10 retarget periods, it takes 240 retarget periods to reduce to reach this \"bad\" situation. That's several years, probably enough to discuss and deploy a soft-fork to make it stricter. But not super comfortable either.  \n\nWhereas with a grace period of 600 reaching \"bad\" takes 20 times longer, which seems very safe.\n\nSo this may be a good argument for keeping the number at 600 and to insist that pools either use the `min_time` field provided by Bitcoin Core, or implement their own code for the minimum time that takes both MTP and the new timewarp rule into account.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 71,
  "hidden": false,
  "trust_level": 3,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
{
  "id": 2717,
  "name": "Ava Chow",
  "username": "achow101",
  "avatar_template": "/user_avatar/delvingbitcoin.org/achow101/{size}/200_2.png",
  "created_at": "2024-06-14T18:38:31.635Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"andrewtoth\" data-post=\"14\" data-topic=\"877\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/andrewtoth/48/576_2.png\" class=\"avatar\"> andrewtoth:</div>\n<blockquote>\n<p>Can we combine these into having one proof for each scan key and set of inputs? Perhaps a global field where key data is 33 bytes scan followed by set of indexes?</p>\n</blockquote>\n</aside>\n<p>Inputs can be added and removed if Inputs Modifiable is set, so I don\u2019t think it\u2019s a good idea to have anything that relies on the ordering of inputs to be consistent. Having any field that includes a list of indexes could become messed up by an unaware constructor that adds an input in the wrong place.</p>\n<aside class=\"quote no-group\" data-username=\"andrewtoth\" data-post=\"14\" data-topic=\"877\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/andrewtoth/48/576_2.png\" class=\"avatar\"> andrewtoth:</div>\n<blockquote>\n<p>Constructors also need to check if there are any ANYONECANPAY sighashes on any inputs before adding a silent payment, and updaters need to check as well, but I suppose that can be done without modifying <code>PSBT_GLOBAL_TX_MODIFIABLE</code>. The reason I added a Has Silent Payments flag to it is for the same reason there is a Has Sighash Single flag.</p>\n</blockquote>\n</aside>\n<p>I remember discussing this with <a class=\"mention\" href=\"/u/josibake\">@josibake</a> on the call, but don\u2019t fully remember the conclusion. I think it was something like it wasn\u2019t necessary to make any special consideration for ANYONECANPAY if we require that silent payments outputs can only be added if there are no inputs yet, or inputs with no signatures, or Inputs Modifiable is not set.</p>\n<p>As long as an input uses SIGHASH_ALL, I don\u2019t think an input with ANYONECANPAY is actually an issue.</p>",
  "post_number": 15,
  "post_type": 1,
  "updated_at": "2024-06-14T18:38:31.635Z",
  "reply_count": 3,
  "reply_to_post_number": 14,
  "quote_count": 1,
  "incoming_link_count": 0,
  "reads": 5,
  "readers_count": 4,
  "score": 16.0,
  "yours": false,
  "topic_id": 877,
  "topic_slug": "bip352-psbt-support",
  "topic_title": "BIP352: PSBT support",
  "topic_html_title": "BIP352: PSBT support",
  "category_id": 12,
  "display_username": "Ava Chow",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"andrewtoth, post:14, topic:877\"]\nCan we combine these into having one proof for each scan key and set of inputs? Perhaps a global field where key data is 33 bytes scan followed by set of indexes?\n[/quote]\nInputs can be added and removed if Inputs Modifiable is set, so I don't think it's a good idea to have anything that relies on the ordering of inputs to be consistent. Having any field that includes a list of indexes could become messed up by an unaware constructor that adds an input in the wrong place.\n\n[quote=\"andrewtoth, post:14, topic:877\"]\nConstructors also need to check if there are any ANYONECANPAY sighashes on any inputs before adding a silent payment, and updaters need to check as well, but I suppose that can be done without modifying `PSBT_GLOBAL_TX_MODIFIABLE`. The reason I added a Has Silent Payments flag to it is for the same reason there is a Has Sighash Single flag.\n[/quote]\nI remember discussing this with @josibake on the call, but don't fully remember the conclusion. I think it was something like it wasn't necessary to make any special consideration for ANYONECANPAY if we require that silent payments outputs can only be added if there are no inputs yet, or inputs with no signatures, or Inputs Modifiable is not set.\n\nAs long as an input uses SIGHASH_ALL, I don't think an input with ANYONECANPAY is actually an issue.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 165,
  "hidden": false,
  "trust_level": 2,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
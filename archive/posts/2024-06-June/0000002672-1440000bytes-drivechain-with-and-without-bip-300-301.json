{
  "id": 2672,
  "name": "/dev/fd0",
  "username": "1440000bytes",
  "avatar_template": "/user_avatar/delvingbitcoin.org/1440000bytes/{size}/301_2.png",
  "created_at": "2024-06-10T00:15:20.027Z",
  "cooked": "<h2><a name=\"what-is-drivechain-1\" class=\"anchor\" href=\"#what-is-drivechain-1\"></a>What is Drivechain?</h2>\n<p>Drivechain allows you to create different types of sidechains in which withdrawals are approved by miners. Users have the freedom to experiment with different features by sending bitcoin from main chain to sidechain and withdraw from it later.</p>\n<p>Since changing consensus rules on bitcoin will become difficult with time, sidechains seems to be the best way possible to scale, improve privacy, user experience etc.</p>\n<p><img src=\"https://delvingbitcoin.org/uploads/default/original/1X/ee5907e257477ecfb90b82e48f9edb744314ca75.jpeg\" alt=\"8taiv5\" data-base62-sha1=\"y0wnU8hKdB8PcpwbFjzDxkrKyXz\" width=\"658\" height=\"379\"></p>\n<h2><a name=\"is-drivechain-possible-without-bip-300-and-301-2\" class=\"anchor\" href=\"#is-drivechain-possible-without-bip-300-and-301-2\"></a>Is Drivechain possible without BIP 300 and 301?</h2>\n<p>Yes, it is possible. A <a href=\"https://sha-gate-demo.netlify.app/\" rel=\"noopener nofollow ugc\">proof of concept</a> that uses OP_CAT and some introspection opcodes to achieve this: <a href=\"https://github.com/mr-zwets/upgraded-SHA-gate\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">GitHub - mr-zwets/upgraded-SHA-gate</a></p>\n<p>Bytecode generated by the compiler has these opcodes:</p>\n<pre data-code-wrap=\"plaintext\"><code class=\"lang-plaintext\">OP_4 OP_PICK \nOP_0 OP_NUMEQUAL \nOP_IF \n    OP_INPUTINDEX OP_0 OP_NUMEQUALVERIFY \n    OP_0 OP_OUTPUTVALUE \n    OP_0 OP_UTXOVALUE OP_SUB 1027 OP_GREATERTHAN OP_VERIFY \n    OP_0 OP_OUTPUTBYTECODE OP_0 OP_UTXOBYTECODE OP_EQUALVERIFY \n    OP_2DROP OP_2DROP OP_DROP \n    OP_1 \nOP_ELSE \n    OP_4 OP_PICK \n    OP_1 OP_NUMEQUAL \n    OP_IF \n        OP_8 OP_PICK \n        OP_10 OP_PICK OP_CAT \n        OP_11 OP_PICK OP_CAT \n        OP_12 OP_PICK OP_CAT \n        OP_13 OP_PICK OP_CAT \n        OP_HASH160 OP_EQUALVERIFY \n        OP_0 OP_2ROT OP_SWAP OP_6 OP_ROLL \n        OP_3 OP_8 OP_ROLL \n        OP_9 OP_ROLL \n        OP_10 OP_ROLL \n        OP_11 OP_ROLL \n        OP_12 OP_ROLL \n        OP_5 OP_CHECKMULTISIGVERIFY \n        OP_BIN2NUM 2808 OP_ADD \n        OP_CHECKLOCKTIMEVERIFY OP_DROP \n        OP_3 OP_PICK OP_SIZE OP_NIP 0x1f OP_NUMEQUALVERIFY 0x0200001f \n        OP_4 OP_ROLL OP_CAT OP_8 OP_CAT \n        OP_TXLOCKTIME OP_8 OP_NUM2BIN OP_CAT \n        OP_ACTIVEBYTECODE 0x2c OP_SPLIT OP_NIP OP_CAT \n        OP_INPUTINDEX OP_0 OP_NUMEQUALVERIFY \n        OP_0 OP_UTXOVALUE 0xe803 OP_SUB \n        OP_0 OP_OUTPUTVALUE OP_NUMEQUALVERIFY \n        0xa914 OP_SWAP OP_HASH160 OP_CAT \n        0x87 OP_CAT \n        OP_0 OP_OUTPUTBYTECODE OP_EQUAL \n        OP_NIP OP_NIP OP_NIP \n</code></pre>\n<pre data-code-wrap=\"plaintext\"><code class=\"lang-plaintext\">    OP_ELSE \n        OP_4 OP_PICK \n        OP_2 OP_NUMEQUAL \n        OP_IF \n            OP_1 OP_OUTPOINTTXHASH \n            OP_6 OP_PICK OP_HASH256 OP_EQUALVERIFY \n            OP_0 0x20 OP_NUM2BIN OP_6 OP_PICK \n            0x29 OP_SPLIT OP_DROP 0x0100000001 \n            OP_ROT OP_CAT 0xffffffff OP_CAT OP_EQUALVERIFY \n            OP_1 OP_OUTPOINTINDEX OP_0 OP_NUMEQUALVERIFY \n            OP_5 OP_ROLL 0x2b OP_SPLIT OP_NIP \n            OP_3 OP_SPLIT OP_DROP OP_BIN2NUM \n            OP_ROT OP_BIN2NUM OP_GREATERTHAN OP_VERIFY \n            OP_ROT OP_BIN2NUM \n            OP_4 OP_ROLL \n            OP_IF \n                OP_DUP OP_1ADD OP_NIP \n            OP_ELSE \n                OP_DUP OP_2 OP_SUB OP_NIP \n            OP_ENDIF \n            OP_2 OP_NUM2BIN \n            OP_2 OP_SWAP OP_CAT \n            OP_ACTIVEBYTECODE OP_3 OP_SPLIT OP_NIP OP_CAT \n            OP_INPUTINDEX OP_0 OP_NUMEQUALVERIFY \n            OP_0 OP_UTXOVALUE 0xe803 OP_SUB \n            OP_0 OP_OUTPUTVALUE OP_NUMEQUALVERIFY \n            0xa914 OP_SWAP OP_HASH160 OP_CAT \n            0x87 OP_CAT \n            OP_0 OP_OUTPUTBYTECODE OP_EQUAL \n            OP_NIP OP_NIP OP_NIP \n        OP_ELSE \n            OP_4 OP_ROLL \n            OP_3 OP_NUMEQUALVERIFY \n            OP_ROT 0x17 OP_SPLIT OP_BIN2NUM \n            OP_1 OP_OUTPUTVALUE OP_OVER OP_NUMEQUALVERIFY \n            OP_1 OP_OUTPUTBYTECODE \n            OP_ROT OP_EQUALVERIFY \n            OP_ROT OP_BIN2NUM 0xe007 OP_ADD \n            OP_CHECKLOCKTIMEVERIFY OP_DROP \n            OP_ROT OP_BIN2NUM \n            OP_0 OP_GREATERTHANOREQUAL OP_VERIFY \n            OP_0 0x1f OP_NUM2BIN 0x0200001f OP_SWAP OP_CAT \n            OP_ACTIVEBYTECODE 0x23 OP_SPLIT OP_NIP OP_CAT \n            OP_INPUTINDEX OP_0 OP_NUMEQUALVERIFY \n            OP_0 OP_UTXOVALUE OP_ROT OP_SUB 0xe803 OP_SUB \n            OP_0 OP_OUTPUTVALUE OP_NUMEQUALVERIFY \n            0xa914 OP_SWAP OP_HASH160 OP_CAT \n            0x87 OP_CAT \n            OP_0 OP_OUTPUTBYTECODE OP_EQUAL \n            OP_NIP \n        OP_ENDIF \n    OP_ENDIF \nOP_ENDIF\n</code></pre>\n<p>In this script some introspection opcodes are used:</p>\n<pre><code class=\"lang-auto\">OP_INPUTINDEX\nOP_OUTPUTVALUE\nOP_UTXOVALUE\nOP_OUTPUTBYTECODE\nOP_UTXOBYTECODE\n\nOP_OUTPOINTTXHASH\n</code></pre>\n<p>These can be emulated with <code>OP_CAT</code>, <code>OP_CHECKSIGFROMSTACK</code> and a few other basic opcdoes.</p>\n<h2><a name=\"drivechain-using-bip-300-and-301-3\" class=\"anchor\" href=\"#drivechain-using-bip-300-and-301-3\"></a>Drivechain using BIP 300 and 301</h2>\n<p><a href=\"https://github.com/bitcoin/bips/blob/bc520fade5cc838d5c6e9b72d2fc12b691c80125/bip-0300.mediawiki\" rel=\"noopener nofollow ugc\">BIP 300</a> implmentation introduces an opcode <code>OP_DRIVECHAIN</code> and six new blockchain messages:</p>\n<ul>\n<li>M1. Propose New Sidechain</li>\n<li>M2. ACK Proposal</li>\n<li>M3. Propose Bundle</li>\n<li>M4. ACK Bundle</li>\n<li>M5. Deposit \u2013 a transfer of BTC from-main-to-side</li>\n<li>M6. Withdrawal \u2013 a transfer of BTC from-side-to-main</li>\n</ul>\n<p>Sidechains are first proposed (with M1), and later acked (with M2) for creation. This process resembles Bip9 soft fork activation.</p>\n<p><a href=\"https://github.com/bitcoin/bips/blob/bc520fade5cc838d5c6e9b72d2fc12b691c80125/bip-0301.mediawiki\" rel=\"noopener nofollow ugc\">BIP 301</a> describes bind merged mining and introduces 2 messages:</p>\n<ol>\n<li>BMM Accept \u2013 How h* enters a main:coinbase. When Mary \u201caccepts\u201d a BMM Request, Mary is <em>endorsing a side:block</em>.</li>\n<li>BMM Request \u2013 Simon offering money to Mary, if (and only if) she will Endorse a specific h*. When Simon broadcasts a BMM Request, Simon is <em>attempting a side:block</em>.</li>\n</ol>\n<p>h* : sidechain\u2019s merkle root hash</p>\n<p>Blind Merged Mining (BMM) allows miners to mine a sidechain, without running its node software (ie, without \u201clooking\u201d at it, hence \u201cblind\u201d). Instead, a separate sidechain user runs their node and constructs the block, paying himself the transaction fees. He then uses an equivalent amount of money to \u201cbuy\u201d the right to find this block, from the conventional layer1 Sha256d miners.</p>\n<h2><a name=\"criticism-4\" class=\"anchor\" href=\"#criticism-4\"></a>Criticism</h2>\n<p>Some developers have written about their opinions on Drivechain. Its not possible to cover all of them. I will focus on the <a href=\"https://petertodd.org/2023/drivechains\" rel=\"noopener nofollow ugc\">blog post</a> written by Peter Todd in 2023 and Paul Sztorc\u2019s <a href=\"https://www.drivechain.info/peer-review/peter-todd-2023.png\" rel=\"noopener nofollow ugc\">response</a> to it.</p>\n<p>I agree with Paul\u2019s response and want to add a few points about mining centralization issues shared in the blog post:</p>\n<ul>\n<li>Stratum v2 does not decentralize anything. It could be considered an improvement over v1 but mining pools can still reject block templates.</li>\n<li>Mining is inherently centralized in bitcoin for different reasons and will remain the same until more pools in different countries, more hardware manufacturers and braidpool gains some traction.</li>\n<li>If covenant proposals are activated instead of BIP 300/301, we would end up with MEV issues that affect mining decentralization more than sidechains.</li>\n</ul>\n<h2><a name=\"sidechain-templates-5\" class=\"anchor\" href=\"#sidechain-templates-5\"></a>Sidechain templates</h2>\n<p>There are some <a href=\"https://www.drivechain.info/projects/index.html\" rel=\"noopener nofollow ugc\">sidechains</a> availalble for testing and you can try them using <a href=\"https://www.drivechain.info/releases/index.html\" rel=\"noopener nofollow ugc\">launcher</a>. I tried zcash sidechain and like the privacy, UX etc.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://delvingbitcoin.org/uploads/default/original/1X/0ab4c25b4d6558772290752eb3f344da620ae5ff.jpeg\" data-download-href=\"https://delvingbitcoin.org/uploads/default/0ab4c25b4d6558772290752eb3f344da620ae5ff\" title=\"melt-cast\"><img src=\"https://delvingbitcoin.org/uploads/default/original/1X/0ab4c25b4d6558772290752eb3f344da620ae5ff.jpeg\" alt=\"melt-cast\" data-base62-sha1=\"1wI34laTUL2UNpe596mY2rFEMbB\" width=\"690\" height=\"474\" data-dominant-color=\"BEBCBB\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">melt-cast</span><span class=\"informations\">891\u00d7613 40.1 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p>I got some coins for the main chain using the <a href=\"https://drivechain.live\" rel=\"noopener nofollow ugc\">faucet</a>. Did fake coinjoin spending equal amount inputs to my own addresses. Used one of the UTXO to deposit funds from main chain to sidechain. This could be followed by other users as well to avoid privacy issues with the deposit transaction however it can also be deposited directly. My goal was to try <a href=\"https://www.truthcoin.info/blog/zside-meltcast/\" rel=\"noopener nofollow ugc\">melt-cast</a> feature and compare it with payment pools that could be enabled with covenants.</p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://delvingbitcoin.org/uploads/default/original/1X/990e5bacd175ce58faa24b95c0eb38b94b580b27.jpeg\" data-download-href=\"https://delvingbitcoin.org/uploads/default/990e5bacd175ce58faa24b95c0eb38b94b580b27\" title=\"GPPpUcwaEAAkURp\"><img src=\"https://delvingbitcoin.org/uploads/default/optimized/1X/990e5bacd175ce58faa24b95c0eb38b94b580b27_2_690x389.jpeg\" alt=\"GPPpUcwaEAAkURp\" data-base62-sha1=\"lPZOxa0d8PRReVE412LcwyPR9rN\" width=\"690\" height=\"389\" srcset=\"https://delvingbitcoin.org/uploads/default/optimized/1X/990e5bacd175ce58faa24b95c0eb38b94b580b27_2_690x389.jpeg, https://delvingbitcoin.org/uploads/default/optimized/1X/990e5bacd175ce58faa24b95c0eb38b94b580b27_2_1035x583.jpeg 1.5x, https://delvingbitcoin.org/uploads/default/original/1X/990e5bacd175ce58faa24b95c0eb38b94b580b27.jpeg 2x\" data-dominant-color=\"1C1C25\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">GPPpUcwaEAAkURp</span><span class=\"informations\">1267\u00d7716 37.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://delvingbitcoin.org/uploads/default/original/1X/37a43b9ddb109060bc6d02d22119a302864968cd.jpeg\" data-download-href=\"https://delvingbitcoin.org/uploads/default/37a43b9ddb109060bc6d02d22119a302864968cd\" title=\"GPPpYHXacAEYRlG\"><img src=\"https://delvingbitcoin.org/uploads/default/optimized/1X/37a43b9ddb109060bc6d02d22119a302864968cd_2_690x390.jpeg\" alt=\"GPPpYHXacAEYRlG\" data-base62-sha1=\"7We7WLHi6enAn9wkiCtIdWy0ZMp\" width=\"690\" height=\"390\" srcset=\"https://delvingbitcoin.org/uploads/default/optimized/1X/37a43b9ddb109060bc6d02d22119a302864968cd_2_690x390.jpeg, https://delvingbitcoin.org/uploads/default/optimized/1X/37a43b9ddb109060bc6d02d22119a302864968cd_2_1035x585.jpeg 1.5x, https://delvingbitcoin.org/uploads/default/original/1X/37a43b9ddb109060bc6d02d22119a302864968cd.jpeg 2x\" data-dominant-color=\"22222C\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">GPPpYHXacAEYRlG</span><span class=\"informations\">1267\u00d7717 60.4 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://delvingbitcoin.org/uploads/default/original/1X/1c1c130ab667bd333884b1a38f47a10cc521d151.jpeg\" data-download-href=\"https://delvingbitcoin.org/uploads/default/1c1c130ab667bd333884b1a38f47a10cc521d151\" title=\"GPPplWFawAY_bpG\"><img src=\"https://delvingbitcoin.org/uploads/default/optimized/1X/1c1c130ab667bd333884b1a38f47a10cc521d151_2_689x395.jpeg\" alt=\"GPPplWFawAY_bpG\" data-base62-sha1=\"40Fw8bDUQ14Lkk0hiGxCuXX9eaB\" width=\"689\" height=\"395\" srcset=\"https://delvingbitcoin.org/uploads/default/optimized/1X/1c1c130ab667bd333884b1a38f47a10cc521d151_2_689x395.jpeg, https://delvingbitcoin.org/uploads/default/optimized/1X/1c1c130ab667bd333884b1a38f47a10cc521d151_2_1033x592.jpeg 1.5x, https://delvingbitcoin.org/uploads/default/original/1X/1c1c130ab667bd333884b1a38f47a10cc521d151.jpeg 2x\" data-dominant-color=\"1D1D26\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">GPPplWFawAY_bpG</span><span class=\"informations\">1268\u00d7727 51.9 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<h2><a name=\"conclusion-6\" class=\"anchor\" href=\"#conclusion-6\"></a>Conclusion</h2>\n<p>Drivechain will be possible on bitcoin with or without BIP 300/301 in a few years. We need to do more research and avoid trusting other opinions to decide if they should be activated with BIP 300/301 for evaluating their scaling, privacy etc. benefits.</p>",
  "post_number": 1,
  "post_type": 1,
  "updated_at": "2024-06-10T00:27:35.086Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 0,
  "incoming_link_count": 72,
  "reads": 6,
  "readers_count": 5,
  "score": 361.2,
  "yours": false,
  "topic_id": 958,
  "topic_slug": "drivechain-with-and-without-bip-300-301",
  "topic_title": "Drivechain with and without BIP 300/301",
  "topic_html_title": "Drivechain with and without BIP 300/301",
  "category_id": 7,
  "display_username": "/dev/fd0",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 3,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "## What is Drivechain?\n\nDrivechain allows you to create different types of sidechains in which withdrawals are approved by miners. Users have the freedom to experiment with different features by sending bitcoin from main chain to sidechain and withdraw from it later.\n\nSince changing consensus rules on bitcoin will become difficult with time, sidechains seems to be the best way possible to scale, improve privacy, user experience etc.\n\n![8taiv5|658x379](upload://y0wnU8hKdB8PcpwbFjzDxkrKyXz.jpeg)\n\n## Is Drivechain possible without BIP 300 and 301?\n\nYes, it is possible. A [proof of concept](https://sha-gate-demo.netlify.app/) that uses OP_CAT and some introspection opcodes to achieve this: https://github.com/mr-zwets/upgraded-SHA-gate\n\nBytecode generated by the compiler has these opcodes:\n\n```plaintext\nOP_4 OP_PICK \nOP_0 OP_NUMEQUAL \nOP_IF \n    OP_INPUTINDEX OP_0 OP_NUMEQUALVERIFY \n    OP_0 OP_OUTPUTVALUE \n    OP_0 OP_UTXOVALUE OP_SUB 1027 OP_GREATERTHAN OP_VERIFY \n    OP_0 OP_OUTPUTBYTECODE OP_0 OP_UTXOBYTECODE OP_EQUALVERIFY \n    OP_2DROP OP_2DROP OP_DROP \n    OP_1 \nOP_ELSE \n    OP_4 OP_PICK \n    OP_1 OP_NUMEQUAL \n    OP_IF \n        OP_8 OP_PICK \n        OP_10 OP_PICK OP_CAT \n        OP_11 OP_PICK OP_CAT \n        OP_12 OP_PICK OP_CAT \n        OP_13 OP_PICK OP_CAT \n        OP_HASH160 OP_EQUALVERIFY \n        OP_0 OP_2ROT OP_SWAP OP_6 OP_ROLL \n        OP_3 OP_8 OP_ROLL \n        OP_9 OP_ROLL \n        OP_10 OP_ROLL \n        OP_11 OP_ROLL \n        OP_12 OP_ROLL \n        OP_5 OP_CHECKMULTISIGVERIFY \n        OP_BIN2NUM 2808 OP_ADD \n        OP_CHECKLOCKTIMEVERIFY OP_DROP \n        OP_3 OP_PICK OP_SIZE OP_NIP 0x1f OP_NUMEQUALVERIFY 0x0200001f \n        OP_4 OP_ROLL OP_CAT OP_8 OP_CAT \n        OP_TXLOCKTIME OP_8 OP_NUM2BIN OP_CAT \n        OP_ACTIVEBYTECODE 0x2c OP_SPLIT OP_NIP OP_CAT \n        OP_INPUTINDEX OP_0 OP_NUMEQUALVERIFY \n        OP_0 OP_UTXOVALUE 0xe803 OP_SUB \n        OP_0 OP_OUTPUTVALUE OP_NUMEQUALVERIFY \n        0xa914 OP_SWAP OP_HASH160 OP_CAT \n        0x87 OP_CAT \n        OP_0 OP_OUTPUTBYTECODE OP_EQUAL \n        OP_NIP OP_NIP OP_NIP \n```\n```plaintext\n    OP_ELSE \n        OP_4 OP_PICK \n        OP_2 OP_NUMEQUAL \n        OP_IF \n            OP_1 OP_OUTPOINTTXHASH \n            OP_6 OP_PICK OP_HASH256 OP_EQUALVERIFY \n            OP_0 0x20 OP_NUM2BIN OP_6 OP_PICK \n            0x29 OP_SPLIT OP_DROP 0x0100000001 \n            OP_ROT OP_CAT 0xffffffff OP_CAT OP_EQUALVERIFY \n            OP_1 OP_OUTPOINTINDEX OP_0 OP_NUMEQUALVERIFY \n            OP_5 OP_ROLL 0x2b OP_SPLIT OP_NIP \n            OP_3 OP_SPLIT OP_DROP OP_BIN2NUM \n            OP_ROT OP_BIN2NUM OP_GREATERTHAN OP_VERIFY \n            OP_ROT OP_BIN2NUM \n            OP_4 OP_ROLL \n            OP_IF \n                OP_DUP OP_1ADD OP_NIP \n            OP_ELSE \n                OP_DUP OP_2 OP_SUB OP_NIP \n            OP_ENDIF \n            OP_2 OP_NUM2BIN \n            OP_2 OP_SWAP OP_CAT \n            OP_ACTIVEBYTECODE OP_3 OP_SPLIT OP_NIP OP_CAT \n            OP_INPUTINDEX OP_0 OP_NUMEQUALVERIFY \n            OP_0 OP_UTXOVALUE 0xe803 OP_SUB \n            OP_0 OP_OUTPUTVALUE OP_NUMEQUALVERIFY \n            0xa914 OP_SWAP OP_HASH160 OP_CAT \n            0x87 OP_CAT \n            OP_0 OP_OUTPUTBYTECODE OP_EQUAL \n            OP_NIP OP_NIP OP_NIP \n        OP_ELSE \n            OP_4 OP_ROLL \n            OP_3 OP_NUMEQUALVERIFY \n            OP_ROT 0x17 OP_SPLIT OP_BIN2NUM \n            OP_1 OP_OUTPUTVALUE OP_OVER OP_NUMEQUALVERIFY \n            OP_1 OP_OUTPUTBYTECODE \n            OP_ROT OP_EQUALVERIFY \n            OP_ROT OP_BIN2NUM 0xe007 OP_ADD \n            OP_CHECKLOCKTIMEVERIFY OP_DROP \n            OP_ROT OP_BIN2NUM \n            OP_0 OP_GREATERTHANOREQUAL OP_VERIFY \n            OP_0 0x1f OP_NUM2BIN 0x0200001f OP_SWAP OP_CAT \n            OP_ACTIVEBYTECODE 0x23 OP_SPLIT OP_NIP OP_CAT \n            OP_INPUTINDEX OP_0 OP_NUMEQUALVERIFY \n            OP_0 OP_UTXOVALUE OP_ROT OP_SUB 0xe803 OP_SUB \n            OP_0 OP_OUTPUTVALUE OP_NUMEQUALVERIFY \n            0xa914 OP_SWAP OP_HASH160 OP_CAT \n            0x87 OP_CAT \n            OP_0 OP_OUTPUTBYTECODE OP_EQUAL \n            OP_NIP \n        OP_ENDIF \n    OP_ENDIF \nOP_ENDIF\n```\n\nIn this script some introspection opcodes are used:\n\n```\nOP_INPUTINDEX\nOP_OUTPUTVALUE\nOP_UTXOVALUE\nOP_OUTPUTBYTECODE\nOP_UTXOBYTECODE\n\nOP_OUTPOINTTXHASH\n```\n\nThese can be emulated with `OP_CAT`, `OP_CHECKSIGFROMSTACK` and a few other basic opcdoes.\n\n## Drivechain using BIP 300 and 301\n\n[BIP 300](https://github.com/bitcoin/bips/blob/bc520fade5cc838d5c6e9b72d2fc12b691c80125/bip-0300.mediawiki) implmentation introduces an opcode `OP_DRIVECHAIN` and six new blockchain messages:\n\n* M1. Propose New Sidechain\n* M2. ACK Proposal\n* M3. Propose Bundle\n* M4. ACK Bundle\n* M5. Deposit -- a transfer of BTC from-main-to-side\n* M6. Withdrawal -- a transfer of BTC from-side-to-main\n\nSidechains are first proposed (with M1), and later acked (with M2) for creation. This process resembles Bip9 soft fork activation.\n\n[BIP 301](https://github.com/bitcoin/bips/blob/bc520fade5cc838d5c6e9b72d2fc12b691c80125/bip-0301.mediawiki) describes bind merged mining and introduces 2 messages:\n\n1. BMM Accept -- How h* enters a main:coinbase. When Mary \"accepts\" a BMM Request, Mary is *endorsing a side:block*.\n2. BMM Request -- Simon offering money to Mary, if (and only if) she will Endorse a specific h*. When Simon broadcasts a BMM Request, Simon is *attempting a side:block*.\n\nh* : sidechain's merkle root hash \n\nBlind Merged Mining (BMM) allows miners to mine a sidechain, without running its node software (ie, without \"looking\" at it, hence \"blind\"). Instead, a separate sidechain user runs their node and constructs the block, paying himself the transaction fees. He then uses an equivalent amount of money to \"buy\" the right to find this block, from the conventional layer1 Sha256d miners.\n\n## Criticism\n\nSome developers have written about their opinions on Drivechain. Its not possible to cover all of them. I will focus on the [blog post](https://petertodd.org/2023/drivechains) written by Peter Todd in 2023 and Paul Sztorc's [response](https://www.drivechain.info/peer-review/peter-todd-2023.png) to it.\n\nI agree with Paul's response and want to add a few points about mining centralization issues shared in the blog post:\n\n- Stratum v2 does not decentralize anything. It could be considered an improvement over v1 but mining pools can still reject block templates.\n- Mining is inherently centralized in bitcoin for different reasons and will remain the same until more pools in different countries, more hardware manufacturers and braidpool gains some traction.\n- If covenant proposals are activated instead of BIP 300/301, we would end up with MEV issues that affect mining decentralization more than sidechains.\n\n## Sidechain templates\n\nThere are some [sidechains](https://www.drivechain.info/projects/index.html) availalble for testing and you can try them using [launcher](https://www.drivechain.info/releases/index.html). I tried zcash sidechain and like the privacy, UX etc. \n\n![melt-cast|690x474](upload://1wI34laTUL2UNpe596mY2rFEMbB.jpeg)\n\nI got some coins for the main chain using the [faucet](https://drivechain.live). Did fake coinjoin spending equal amount inputs to my own addresses. Used one of the UTXO to deposit funds from main chain to sidechain. This could be followed by other users as well to avoid privacy issues with the deposit transaction however it can also be deposited directly. My goal was to try [melt-cast](https://www.truthcoin.info/blog/zside-meltcast/) feature and compare it with payment pools that could be enabled with covenants.\n\n![GPPpUcwaEAAkURp|690x389](upload://lPZOxa0d8PRReVE412LcwyPR9rN.jpeg)\n\n![GPPpYHXacAEYRlG|690x390](upload://7We7WLHi6enAn9wkiCtIdWy0ZMp.jpeg)\n\n![GPPplWFawAY_bpG|689x395](upload://40Fw8bDUQ14Lkk0hiGxCuXX9eaB.jpeg)\n\n## Conclusion\n\nDrivechain will be possible on bitcoin with or without BIP 300/301 in a few years. We need to do more research and avoid trusting other opinions to decide if they should be activated with BIP 300/301 for evaluating their scaling, privacy etc. benefits.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 247,
  "hidden": false,
  "trust_level": 2,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
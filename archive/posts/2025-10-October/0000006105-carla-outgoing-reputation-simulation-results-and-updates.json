{
  "id": 6105,
  "name": "Carla Kirk-Cohen",
  "username": "carla",
  "avatar_template": "/user_avatar/delvingbitcoin.org/carla/{size}/119_2.png",
  "created_at": "2025-10-17T18:20:51.972Z",
  "cooked": "<p>This post will report on simulation results for our updated reputation algorithm, based on the discussion in <a href=\"https://delvingbitcoin.org/t/hybrid-jamming-mitigation-results-and-updates/1147\">this post</a>. It assumes understanding of the scheme, so please see the <a href=\"https://github.com/lightning/bolts/pull/1280\" rel=\"noopener nofollow ugc\">BOLT PR</a> for details.</p>\n<h4><a name=\"p-6105-simulation-results-1\" class=\"anchor\" href=\"#p-6105-simulation-results-1\"></a>Simulation Results</h4>\n<p>We have re-run both the <a href=\"https://delvingbitcoin.org/t/hybrid-jamming-mitigation-results-and-updates/1147#p-3212-resource-attacks-3\">resource</a> and <a href=\"https://delvingbitcoin.org/t/hybrid-jamming-mitigation-results-and-updates/1147#p-3212-manipulation-sink-attack-9\">sink</a> attacks outlined in the original post [1], finding that:</p>\n<ul>\n<li>Protection against resource attacks remains intact; the amount paid to build reputation to jam channels compensates the targeted node.</li>\n<li>With outgoing reputation, attacking nodes running a sink attack are quickly cut off when they start to misbehave.</li>\n<li>When a honeypot is created to passively build reputation with a target node, the amount it earns from new traffic is greater than the damage that can be done by abusing the \u201cfreely earned\u201d reputation.</li>\n</ul>\n<details> <summary>Exact numbers for the attacks we ran are available here.</summary>\n<p>The table below shows for each attack the change in the targeted node\u2019s revenue (compared to its revenue in times of peace), and the cost to the attacker.</p>\n<div class=\"md-table\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:right\">Attack</th>\n<th style=\"text-align:right\">Target Peacetime Revenue</th>\n<th style=\"text-align:right\">Target Attacktime Revenue</th>\n<th style=\"text-align:right\">Channel Opens for Attack</th>\n<th style=\"text-align:right\">Attacker Reputation Prepay</th>\n<th style=\"text-align:right\">General Jammed Channels*</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:right\">Resource Attack / Slow Slot Jamming</td>\n<td style=\"text-align:right\">835,448</td>\n<td style=\"text-align:right\">247,946,078</td>\n<td style=\"text-align:right\">3</td>\n<td style=\"text-align:right\">247,269,056</td>\n<td style=\"text-align:right\">1</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">Resource Attack / Slow Liquidity Jamming</td>\n<td style=\"text-align:right\">835,448</td>\n<td style=\"text-align:right\">3,240,062,877</td>\n<td style=\"text-align:right\">3</td>\n<td style=\"text-align:right\">3,240,385,855</td>\n<td style=\"text-align:right\">1</td>\n</tr>\n<tr>\n<td style=\"text-align:right\">Sink Attack</td>\n<td style=\"text-align:right\">8,405,842,914</td>\n<td style=\"text-align:right\">15,453,671,671</td>\n<td style=\"text-align:right\">6</td>\n<td style=\"text-align:right\">No prepay, passive forwarder</td>\n<td style=\"text-align:right\">16</td>\n</tr>\n</tbody>\n</table>\n</div><p>*Our simulation has a helper to general jam channels. In reality, this would require opening in expectation 50 channels or finding 40 unique paths through the network per channel general jammed.</p>\n</details>\n<p>It\u2019s worth pointing out that if an attacker builds reputation then <a href=\"https://delvingbitcoin.org/t/hybrid-jamming-mitigation-results-and-updates/1147/8#p-4312-path-length-attack-multiplier-1\">targets a chain of nodes</a>, only the last is compensated [2]. While compensation isn\u2019t distributed along the chain, there is a significant cost to an attacker to build reputation to attack multiple nodes.</p>\n<h4><a name=\"p-6105-general-bucket-usage-2\" class=\"anchor\" href=\"#p-6105-general-bucket-usage-2\"></a>General Bucket Usage</h4>\n<p>The general bucket limitations introduced prevent trivial, costless attacks that would crowd out honest usage. Inspired by Bitcoin Core\u2019s addrman, we aim to impose restrictions on attackers without hindering honest payments.</p>\n<p>The main concern is whether slot/liquidity allocation suffices for honest traffic lacking reputation. Previous data collected shows slot-count issues are unlikely (few HTLCs typically in flight). We validated liquidity resources by simulating on a mainnet graph snapshot, comparing payment success rates with/without mitigation for mean payment amount of $10 and $100 and found no significant change in payment failure rates.</p>\n<h4><a name=\"p-6105-next-3\" class=\"anchor\" href=\"#p-6105-next-3\"></a>Next</h4>\n<p>We think that this mitigation has reached the stage where it is good enough\u2122\ufe0f. If you disagree, our simulator is <a href=\"https://github.com/carlaKC/jam-ln\" rel=\"noopener nofollow ugc\">here</a> to try out some attacks!</p>\n<p>Our next step is to sanity check the following against real world data:</p>\n<ul>\n<li>Are node peers able to gain reputation?</li>\n<li>Will restrictions on general resources impact payment reliability?</li>\n<li>What are sane defaults for resource bucket sizes?</li>\n</ul>\n<details> <summary>Footnotes.</summary>\n<p>[1] To adjust to the changes in our mitigation, reputation in attacks is not built in the outgoing direction. General resources are also less trivially filled, so we count the requirement to jam them towards the cost of the attack.</p>\n<p>[2] This is an unavoidable characteristic of local-only solutions, as they can\u2019t take a look at the bigger picture.</p>\n</details>\n<p><img src=\"https://delvingbitcoin.org/images/emoji/twitter/heart.png?v=14\" title=\":heart:\" class=\"emoji\" alt=\":heart:\" loading=\"lazy\" width=\"20\" height=\"20\"> in collaboration with <a class=\"mention\" href=\"/u/clarashk\">@ClaraShk</a> and <a class=\"mention\" href=\"/u/elnosh\">@elnosh</a></p>",
  "post_number": 1,
  "post_type": 1,
  "posts_count": 1,
  "updated_at": "2025-10-17T18:20:51.972Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 0,
  "incoming_link_count": 2,
  "reads": 11,
  "readers_count": 10,
  "score": 27.0,
  "yours": false,
  "topic_id": 2069,
  "topic_slug": "outgoing-reputation-simulation-results-and-updates",
  "topic_title": "Outgoing Reputation: Simulation Results and Updates",
  "topic_html_title": "Outgoing Reputation: Simulation Results and Updates",
  "category_id": 7,
  "display_username": "Carla Kirk-Cohen",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": "",
  "bookmarked": false,
  "raw": "This post will report on simulation results for our updated reputation algorithm, based on the discussion in [this post](https://delvingbitcoin.org/t/hybrid-jamming-mitigation-results-and-updates/1147). It assumes understanding of the scheme, so please see the [BOLT PR](https://github.com/lightning/bolts/pull/1280) for details.\n\n#### Simulation Results\n\nWe have re-run both the [resource](https://delvingbitcoin.org/t/hybrid-jamming-mitigation-results-and-updates/1147#p-3212-resource-attacks-3) and [sink](https://delvingbitcoin.org/t/hybrid-jamming-mitigation-results-and-updates/1147#p-3212-manipulation-sink-attack-9) attacks outlined in the original post [1], finding that:\n\n* Protection against resource attacks remains intact; the amount paid to build reputation to jam channels compensates the targeted node.\n* With outgoing reputation, attacking nodes running a sink attack are quickly cut off when they start to misbehave.\n* When a honeypot is created to passively build reputation with a target node, the amount it earns from new traffic is greater than the damage that can be done by abusing the \u201cfreely earned\u201d reputation.\n\n<details> <summary>Exact numbers for the attacks we ran are available here.</summary>\n\nThe table below shows for each attack the change in the targeted node\u2019s revenue (compared to its revenue in times of peace), and the cost to the attacker.\n\n|                                   Attack | Target Peacetime Revenue | Target Attacktime Revenue | Channel Opens for Attack |   Attacker Reputation Prepay | General Jammed Channels\\* |\n| ---------------------------------------: | -----------------------: | ------------------------: | -----------------------: | ---------------------------: | ------------------------: |\n|      Resource Attack / Slow Slot Jamming |                  835,448 |               247,946,078 |                        3 |                  247,269,056 |                         1 |\n| Resource Attack / Slow Liquidity Jamming |                  835,448 |             3,240,062,877 |                        3 |                3,240,385,855 |                         1 |\n|                              Sink Attack |            8,405,842,914 |            15,453,671,671 |                        6 | No prepay, passive forwarder |                        16 |\n\n\n*Our simulation has a helper to general jam channels. In reality, this would require opening in expectation 50 channels or finding 40 unique paths through the network per channel general jammed.\n\n</details>\n\nIt\u2019s worth pointing out that if an attacker builds reputation then [targets a chain of nodes](https://delvingbitcoin.org/t/hybrid-jamming-mitigation-results-and-updates/1147/8#p-4312-path-length-attack-multiplier-1), only the last is compensated [2]. While compensation isn\u2019t distributed along the chain, there is a significant cost to an attacker to build reputation to attack multiple nodes.\n\n#### General Bucket Usage\n\nThe general bucket limitations introduced prevent trivial, costless attacks that would crowd out honest usage. Inspired by Bitcoin Core's addrman, we aim to impose restrictions on attackers without hindering honest payments.\n\nThe main concern is whether slot/liquidity allocation suffices for honest traffic lacking reputation. Previous data collected shows slot-count issues are unlikely (few HTLCs typically in flight). We validated liquidity resources by simulating on a mainnet graph snapshot, comparing payment success rates with/without mitigation for mean payment amount of $10 and $100 and found no significant change in payment failure rates.\n\n#### Next\n\nWe think that this mitigation has reached the stage where it is good enough\u2122\ufe0f. If you disagree, our simulator is [here](https://github.com/carlaKC/jam-ln) to try out some attacks!\n\nOur next step is to sanity check the following against real world data:\n\n* Are node peers able to gain reputation?\n* Will restrictions on general resources impact payment reliability?\n* What are sane defaults for resource bucket sizes?\n\n<details> <summary>Footnotes.</summary>\n\n[1] To adjust to the changes in our mitigation, reputation in attacks is not built in the outgoing direction. General resources are also less trivially filled, so we count the requirement to jam them towards the cost of the attack.\n\n[2] This is an unavoidable characteristic of local-only solutions, as they can\u2019t take a look at the bigger picture.\n\n</details>\n\n:heart: in collaboration with @ClaraShk and @elnosh",
  "actions_summary": [
    {
      "id": 2,
      "count": 1
    }
  ],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 124,
  "hidden": false,
  "trust_level": 1,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "This post will report on simulation results for our updated reputation algorithm, based on the discussion in <a href=\"https://delvingbitcoin.org/t/hybrid-jamming-mitigation-results-and-updates/1147\">this post</a>. It assumes understanding of the scheme, so please see the <a href=\"https://github.com/lightning/bolts/pull/1280\" rel=\"noopener nofollow ugc\">BOLT PR</a> for details. \n<a name=\"p-6105-simulation-results-1\" class=\"anchor\" href=\"#p-6105-simulation-results-1\"></a>Simulation Results\nWe have re-run both the <a href=\"https://delvingbitcoin.org/t/hybrid-jamming-mitigation-results-and-updates/1147#p-3212-resource-attacks-3\">resource</a> and <a href=\"https://delvingbitcoin.org/t/hybrid-jamming-mitigation-results-and-updates/1147#p-3212-manipulation-sink-attack-9\">sink</a> attacks outlined in the original post [&hellip;",
  "truncated": true,
  "post_url": "/t/outgoing-reputation-simulation-results-and-updates/2069/1",
  "reactions": [
    {
      "id": "+1",
      "type": "emoji",
      "count": 1
    }
  ],
  "current_user_reaction": null,
  "reaction_users_count": 1,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null,
  "can_vote": false
}
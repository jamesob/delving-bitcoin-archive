{
  "id": 6032,
  "name": "Anthony Towns",
  "username": "ajtowns",
  "avatar_template": "/user_avatar/delvingbitcoin.org/ajtowns/{size}/417_2.png",
  "created_at": "2025-10-09T06:43:07.676Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"portlandhodl\" data-post=\"2\" data-topic=\"1906\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/portlandhodl/48/1453_2.png\" class=\"avatar\"> portlandhodl:</div>\n<blockquote>\n<p>I love the idea; but combined with GETDATA this would allow for someone to obtain transactions a miner has deemed to valuable enough even with bad prop to be private.</p>\n</blockquote>\n</aside>\n<p>You don\u2019t need GETDATA here; the messages would just be:</p>\n<pre data-code-wrap=\"mermaid\"><code class=\"lang-mermaid\">sequenceDiagram\n    Pleb-&gt;&gt;Miner: GETTEMPLATE\n    Miner-&gt;&gt;Pleb: TEMPLATE [shortids...]\n    Pleb-&gt;&gt;Miner: SENDBLOCKTXNS [missing-tx-indexes...]\n    Miner-&gt;&gt;Pleb: BLOCKTXNS [secret-transactions...]\n</code></pre>\n<p>Probably having a bastion node would be the best way to avoid sharing data, something like:</p>\n<pre data-code-wrap=\"mermaid\"><code class=\"lang-mermaid\">sequenceDiagram\n    Pleb&lt;&lt;-&gt;&gt;Bastion: normal relay\n    Bastion-&gt;&gt;Helper: txs, templates and blocks\n    Helper-&gt;&gt;Miner: txs, templates and blocks\n    Miner-&gt;&gt;Helper: txs and blocks\n    Helper-&gt;&gt;Bastion: blocks only\n    Pleb&lt;&lt;-&gt;&gt;Bastion: normal relay\n</code></pre>\n<p>Having a fake node that only relays txs to the miner, but never relays txs from the miner would probably work pretty well; having it pass on templates generated by the bastion node might help ensure CPFP txs and the like don\u2019t get lost, but if the miner and bastion run the same policy and just have slightly different sets of txs, shouldn\u2019t make a huge difference, I think.</p>\n<p>Presumably you want something like that now, if you want to prevent early relay of secret transactions that don\u2019t violate standardness rules.</p>",
  "post_number": 22,
  "post_type": 1,
  "posts_count": 24,
  "updated_at": "2025-10-09T06:43:07.676Z",
  "reply_count": 0,
  "reply_to_post_number": 2,
  "quote_count": 1,
  "incoming_link_count": 0,
  "reads": 25,
  "readers_count": 24,
  "score": 4.8,
  "yours": false,
  "topic_id": 1906,
  "topic_slug": "sharing-block-templates",
  "topic_title": "Sharing block templates",
  "topic_html_title": "Sharing block templates",
  "category_id": 8,
  "display_username": "Anthony Towns",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"portlandhodl, post:2, topic:1906\"]\nI love the idea; but combined with GETDATA this would allow for someone to obtain transactions a miner has deemed to valuable enough even with bad prop to be private.\n[/quote]\n\nYou don't need GETDATA here; the messages would just be:\n\n```mermaid\nsequenceDiagram\n    Pleb->>Miner: GETTEMPLATE\n    Miner->>Pleb: TEMPLATE [shortids...]\n    Pleb->>Miner: SENDBLOCKTXNS [missing-tx-indexes...]\n    Miner->>Pleb: BLOCKTXNS [secret-transactions...]\n```\n\nProbably having a bastion node would be the best way to avoid sharing data, something like:\n\n```mermaid\nsequenceDiagram\n    Pleb<<->>Bastion: normal relay\n    Bastion->>Helper: txs, templates and blocks\n    Helper->>Miner: txs, templates and blocks\n    Miner->>Helper: txs and blocks\n    Helper->>Bastion: blocks only\n    Pleb<<->>Bastion: normal relay\n```\n\nHaving a fake node that only relays txs to the miner, but never relays txs from the miner would probably work pretty well; having it pass on templates generated by the bastion node might help ensure CPFP txs and the like don't get lost, but if the miner and bastion run the same policy and just have slightly different sets of txs, shouldn't make a huge difference, I think.\n\nPresumably you want something like that now, if you want to prevent early relay of secret transactions that don't violate standardness rules.",
  "actions_summary": [],
  "moderator": true,
  "admin": true,
  "staff": true,
  "user_id": 3,
  "hidden": false,
  "trust_level": 4,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "You don\u2019t need GETDATA here; the messages would just be: \nsequenceDiagram\n    Pleb-&gt;&gt;Miner: GETTEMPLATE\n    Miner-&gt;&gt;Pleb: TEMPLATE [shortids...]\n    Pleb-&gt;&gt;Miner: SENDBLOCKTXNS [missing-tx-indexes...]\n    Miner-&gt;&gt;Pleb: BLOCKTXNS [secret-transactions...]\n\nProbably having a bastion node would be the &hellip;",
  "truncated": true,
  "post_url": "/t/sharing-block-templates/1906/22",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
{
  "id": 1770,
  "name": "Evan Winget",
  "username": "EvanWinget",
  "avatar_template": "/user_avatar/delvingbitcoin.org/evanwinget/{size}/365_2.png",
  "created_at": "2024-03-03T02:16:08.184Z",
  "cooked": "<p>Thanks for the thoughtful response and all of the work you have been doing for so many years to help educate Bitcoiners and improve Bitcoin.</p>\n<blockquote>\n<p>The biggest issue that comes to mind is that such an expiration mechanism would introduce another source of confusion about the finality of a transaction. Especially if a transaction were included in the ultimate permitted block, this could incentivize reorging out that block instead of working on the next block.</p>\n</blockquote>\n<p>I considered this and don\u2019t find it to be super concerning, but I probably need to think about it more. 0x10BC has provided historical reorg data <a href=\"https://github.com/bitcoin-data/stale-blocks\" rel=\"noopener nofollow ugc\">in the stale-blocks repo</a> and I converted block heights to block times and <a href=\"https://github.com/EvanWinget/bips/blob/7d70761da8fe43ae5d4fdd0c18b14765652ccfec/bip-checkmaxtimeverify/Monthly_stale_block_chart.png\" rel=\"noopener nofollow ugc\">plotted the data</a>. I know this is just one node\u2019s view of the network, but based on this data we have only a few stale blocks per month and it would take extremely high fees for expiring transactions to create incentives to reorg compared to working on the next block. If it is possible that fees for expiring transactions would be high enough to create this incentive, it would demonstrate that there may be strong demand for transaction expiration and ironically increases my interest in considering such a feature.</p>\n<blockquote>\n<p>Another issue would be that it would enable attacks to waste bandwidth, e.g. you could publish a transaction that may only be included in the next block, but give it a feerate that is short of the transaction being attractive for the next block.</p>\n</blockquote>\n<p>In the OP_EXPIRE mailing list thread that Peter Todd started, he suggested a solution to this: \u201cOne notable consideration is that\nnodes should require higher minimum relay fees for transactions close to their\nexpiration height to ensure we don\u2019t waste bandwidth on transactions that have\nno potential to be mined. Considering the primary use-case, it is probably\nacceptable to always require a fee rate high enough to be mined in the next\nblock.\u201d [<a href=\"https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-October/022042.html\" rel=\"noopener nofollow ugc\">source</a>]</p>\n<blockquote>\n<p>One way of expiring a transaction in an incentive-compatible manner would be to create a conflicting transaction that is timelocked to the expiration time but pays a higher fee and feerate. When the conflicting transaction becomes valid for block inclusion, it would be more attractive for miners to include the conflict than the original transaction which then makes the original invalid.</p>\n</blockquote>\n<p>While I see no flaw with this logic, it doesn\u2019t enable to the outcome that I find compelling about an op code that allows for transaction expiration (which is reducing on-chain footprint and optimizing economic efficiency of atomic asset swaps).</p>",
  "post_number": 7,
  "post_type": 1,
  "updated_at": "2024-03-03T02:22:15.038Z",
  "reply_count": 0,
  "reply_to_post_number": 6,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 9,
  "readers_count": 8,
  "score": 1.8,
  "yours": false,
  "topic_id": 581,
  "topic_slug": "op-checkmaxtimeverify",
  "topic_title": "Op_checkmaxtimeverify",
  "topic_html_title": "Op_checkmaxtimeverify",
  "category_id": 7,
  "display_username": "Evan Winget",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 2,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "reply_to_user": {
    "username": "murch",
    "name": "Murch",
    "avatar_template": "/user_avatar/delvingbitcoin.org/murch/{size}/139_2.png"
  },
  "bookmarked": false,
  "raw": "Thanks for the thoughtful response and all of the work you have been doing for so many years to help educate Bitcoiners and improve Bitcoin.\n\n> The biggest issue that comes to mind is that such an expiration mechanism would introduce another source of confusion about the finality of a transaction. Especially if a transaction were included in the ultimate permitted block, this could incentivize reorging out that block instead of working on the next block.\n\nI considered this and don't find it to be super concerning, but I probably need to think about it more. 0x10BC has provided historical reorg data [in the stale-blocks repo](https://github.com/bitcoin-data/stale-blocks) and I converted block heights to block times and [plotted the data](https://github.com/EvanWinget/bips/blob/7d70761da8fe43ae5d4fdd0c18b14765652ccfec/bip-checkmaxtimeverify/Monthly_stale_block_chart.png). I know this is just one node's view of the network, but based on this data we have only a few stale blocks per month and it would take extremely high fees for expiring transactions to create incentives to reorg compared to working on the next block. If it is possible that fees for expiring transactions would be high enough to create this incentive, it would demonstrate that there may be strong demand for transaction expiration and ironically increases my interest in considering such a feature.\n\n> Another issue would be that it would enable attacks to waste bandwidth, e.g. you could publish a transaction that may only be included in the next block, but give it a feerate that is short of the transaction being attractive for the next block.\n\nIn the OP_EXPIRE mailing list thread that Peter Todd started, he suggested a solution to this: \"One notable consideration is that\nnodes should require higher minimum relay fees for transactions close to their\nexpiration height to ensure we don't waste bandwidth on transactions that have\nno potential to be mined. Considering the primary use-case, it is probably\nacceptable to always require a fee rate high enough to be mined in the next\nblock.\" [[source](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-October/022042.html)]\n\n> One way of expiring a transaction in an incentive-compatible manner would be to create a conflicting transaction that is timelocked to the expiration time but pays a higher fee and feerate. When the conflicting transaction becomes valid for block inclusion, it would be more attractive for miners to include the conflict than the original transaction which then makes the original invalid.\n\nWhile I see no flaw with this logic, it doesn't enable to the outcome that I find compelling about an op code that allows for transaction expiration (which is reducing on-chain footprint and optimizing economic efficiency of atomic asset swaps).",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 304,
  "hidden": false,
  "trust_level": 1,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": "Github link was replaced with a permanent link",
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
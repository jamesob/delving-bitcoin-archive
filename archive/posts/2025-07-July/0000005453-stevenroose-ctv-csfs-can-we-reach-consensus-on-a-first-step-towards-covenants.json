{
  "id": 5453,
  "name": "Steven Roose",
  "username": "stevenroose",
  "avatar_template": "/user_avatar/delvingbitcoin.org/stevenroose/{size}/1087_2.png",
  "created_at": "2025-07-14T13:08:24.279Z",
  "cooked": "<p>Since I originally started this thread, I suppose it\u2019d make sense to post an update.</p>\n<p>Over the course of the months since this conversation started, I feel like quite some progress has been made. Both in convincing people of the benefits of a consensus upgrade like this (cfr the number of signers of the recent open letter<sup class=\"footnote-ref\"><a href=\"#footnote-5453-1\" id=\"footnote-ref-5453-1\">[1]</a></sup>), and in convincing developers to start doing the work required to get there.</p>\n<p>While the discussion on a right stopping point for the next softfork is not entirely settled<sup class=\"footnote-ref\"><a href=\"#footnote-5453-2\" id=\"footnote-ref-5453-2\">[2]</a></sup><sup class=\"footnote-ref\"><a href=\"#footnote-5453-3\" id=\"footnote-ref-5453-3\">[3]</a></sup>, I feel that more people are coming to agreement that we can leave other interesting proposals like TXHASH, CHECKCONTRACTVERIFY or GSR for consideration of future upgrades.</p>\n<p>The two core capabilities we are enabling with this softfork are \u201cnext tx commitment\u201d and \u201cre-bindable signatures\u201d. The combination of CTV and CSFS supports both, but it is way more efficient for the \u201cnext tx commitment\u201d use-case, while being quite inefficient for the \u201cre-bindable signature\u201d use-case.</p>\n<p>Therefore, during the OP_NEXT conference recently, the idea came up for a slightly tweaked iteration of this bundle that is significantly more optimized for the \u201cre-bindable signature\u201d use-case while only adding a single byte for the \u201cnext tx commitment\u201d one: replacing OP_CTV with a new opcode OP_TEMPLATEHASH to directly push the template hash onto the stack, and adding existing proposed opcode OP_INTERNALKEY<sup class=\"footnote-ref\"><a href=\"#footnote-5453-4\" id=\"footnote-ref-5453-4\">[4]</a></sup> to give access to the internal pubkey from the control block.</p>\n<p>There have been some opposition to activating new features in legacy script contexts, so I see it as beneficial that these opcodes are only possible to be added to the tapscript context (as they need to use OP_SUCCESS upgrade hooks to push to the stack). Additionally, since the new opcode TEMPLATEHASH will only work under taproot, we took the opportunity to revisit a few of the implementation choices that were made for CTV, primarily regarding the commitment to scriptSigs and the taproot annex.</p>\n<p>The result has been posted to the mailing list<sup class=\"footnote-ref\"><a href=\"#footnote-5453-5\" id=\"footnote-ref-5453-5\">[5]</a></sup> and the BIP text for the newly proposed opcode<sup class=\"footnote-ref\"><a href=\"#footnote-5453-6\" id=\"footnote-ref-5453-6\">[6]</a></sup> and bundle<sup class=\"footnote-ref\"><a href=\"#footnote-5453-7\" id=\"footnote-ref-5453-7\">[7]</a></sup> are available for review. Ultimately, this bundle is a technical iteration of the capabilities that are intended with the start of this discussion, based on the feedback it received.</p>\n<p>Hoping for further feedback.</p>\n<hr class=\"footnotes-sep\">\n\n<ol class=\"footnotes-list\">\n<li id=\"footnote-5453-1\" class=\"footnote-item\"><p><a href=\"https://gnusha.org/pi/bitcoindev/CALiT-Zr3KO0fw1_DCpDVvA1Z1aLrvM-HFtvdsyLKhXxWvR=hvA@mail.gmail.com/T/#m931db16bec60fff6d025558138a11a1a511f25df\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">[bitcoindev] CTV + CSFS: a letter</a> <a href=\"#footnote-ref-5453-1\" class=\"footnote-backref\">\u21a9\ufe0e</a></p>\n</li>\n<li id=\"footnote-5453-2\" class=\"footnote-item\"><p><a href=\"https://gnusha.org/pi/bitcoindev/1d42b799-6c99-4d33-98d4-ecd333a63dbdn@googlegroups.com/T/#m99c12036fdb3972632622f472e739cb690fe406a\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">[bitcoindev] What's a good stopping point? Making the case for the capabilities enabled by CTV+CSFS</a> <a href=\"#footnote-ref-5453-2\" class=\"footnote-backref\">\u21a9\ufe0e</a></p>\n</li>\n<li id=\"footnote-5453-3\" class=\"footnote-item\"><p><a href=\"https://delvingbitcoin.org/t/why-ctv-csfs-and-not-txhash/1781\" class=\"inline-onebox\">Why CTV+CSFS and not TXHASH</a> <a href=\"#footnote-ref-5453-3\" class=\"footnote-backref\">\u21a9\ufe0e</a></p>\n</li>\n<li id=\"footnote-5453-4\" class=\"footnote-item\"><p><a href=\"https://github.com/bitcoin/bips/blob/83ac8427e7f81cead035728b9c1d925aceddf0d0/bip-0349.md\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">bips/bip-0349.md at 83ac8427e7f81cead035728b9c1d925aceddf0d0 \u00b7 bitcoin/bips \u00b7 GitHub</a> <a href=\"#footnote-ref-5453-4\" class=\"footnote-backref\">\u21a9\ufe0e</a></p>\n</li>\n<li id=\"footnote-5453-5\" class=\"footnote-item\"><p><a href=\"https://gnusha.org/pi/bitcoindev/2c16b2d0-ac82-4c10-8404-02001bda2658n@googlegroups.com/T/#m33a098d6f38bd6c79f650854f7b40996d8799ede\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">[bitcoindev] A Taproot-native (re-)bindable transaction bundle proposal</a> <a href=\"#footnote-ref-5453-5\" class=\"footnote-backref\">\u21a9\ufe0e</a></p>\n</li>\n<li id=\"footnote-5453-6\" class=\"footnote-item\"><p><a href=\"https://github.com/instagibbs/bips/blob/bf1efa1b675633c79a027ec22f48445ae5bae5b0/bip-templatehash.md\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">bips/bip-templatehash.md at bf1efa1b675633c79a027ec22f48445ae5bae5b0 \u00b7 instagibbs/bips \u00b7 GitHub</a> <a href=\"#footnote-ref-5453-6\" class=\"footnote-backref\">\u21a9\ufe0e</a></p>\n</li>\n<li id=\"footnote-5453-7\" class=\"footnote-item\"><p><a href=\"https://github.com/instagibbs/bips/blob/bf1efa1b675633c79a027ec22f48445ae5bae5b0/bip-templatehash-csfs-ik.md\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">bips/bip-templatehash-csfs-ik.md at bf1efa1b675633c79a027ec22f48445ae5bae5b0 \u00b7 instagibbs/bips \u00b7 GitHub</a> <a href=\"#footnote-ref-5453-7\" class=\"footnote-backref\">\u21a9\ufe0e</a></p>\n</li>\n</ol>",
  "post_number": 85,
  "post_type": 1,
  "posts_count": 81,
  "updated_at": "2025-07-14T13:13:29.086Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 0,
  "incoming_link_count": 6,
  "reads": 36,
  "readers_count": 35,
  "score": 37.2,
  "yours": false,
  "topic_id": 1509,
  "topic_slug": "ctv-csfs-can-we-reach-consensus-on-a-first-step-towards-covenants",
  "topic_title": "CTV+CSFS: Can we reach consensus on a first step towards covenants?",
  "topic_html_title": "CTV+CSFS: Can we reach consensus on a first step towards covenants?",
  "category_id": 7,
  "display_username": "Steven Roose",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 2,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "Since I originally started this thread, I suppose it'd make sense to post an update.\n\nOver the course of the months since this conversation started, I feel like quite some progress has been made. Both in convincing people of the benefits of a consensus upgrade like this (cfr the number of signers of the recent open letter[^letter]), and in convincing developers to start doing the work required to get there.\n\nWhile the discussion on a right stopping point for the next softfork is not entirely settled[^sp1][^sp2], I feel that more people are coming to agreement that we can leave other interesting proposals like TXHASH, CHECKCONTRACTVERIFY or GSR for consideration of future upgrades.\n\nThe two core capabilities we are enabling with this softfork are \"next tx commitment\" and \"re-bindable signatures\". The combination of CTV and CSFS supports both, but it is way more efficient for the \"next tx commitment\" use-case, while being quite inefficient for the \"re-bindable signature\" use-case.\n\nTherefore, during the OP_NEXT conference recently, the idea came up for a slightly tweaked iteration of this bundle that is significantly more optimized for the \"re-bindable signature\" use-case while only adding a single byte for the \"next tx commitment\" one: replacing OP_CTV with a new opcode OP_TEMPLATEHASH to directly push the template hash onto the stack, and adding existing proposed opcode OP_INTERNALKEY[^ikey] to give access to the internal pubkey from the control block.\n\nThere have been some opposition to activating new features in legacy script contexts, so I see it as beneficial that these opcodes are only possible to be added to the tapscript context (as they need to use OP_SUCCESS upgrade hooks to push to the stack). Additionally, since the new opcode TEMPLATEHASH will only work under taproot, we took the opportunity to revisit a few of the implementation choices that were made for CTV, primarily regarding the commitment to scriptSigs and the taproot annex.\n\nThe result has been posted to the mailing list[^ml-bundle] and the BIP text for the newly proposed opcode[^bip-th] and bundle[^bip-bundle] are available for review. Ultimately, this bundle is a technical iteration of the capabilities that are intended with the start of this discussion, based on the feedback it received.\n\nHoping for further feedback.\n\n\n[^letter]: https://gnusha.org/pi/bitcoindev/CALiT-Zr3KO0fw1_DCpDVvA1Z1aLrvM-HFtvdsyLKhXxWvR=hvA@mail.gmail.com/T/#m931db16bec60fff6d025558138a11a1a511f25df\n[^sp1]: https://gnusha.org/pi/bitcoindev/1d42b799-6c99-4d33-98d4-ecd333a63dbdn@googlegroups.com/T/#m99c12036fdb3972632622f472e739cb690fe406a\n[^sp2]: https://delvingbitcoin.org/t/why-ctv-csfs-and-not-txhash/1781\n[^ikey]: https://github.com/bitcoin/bips/blob/83ac8427e7f81cead035728b9c1d925aceddf0d0/bip-0349.md\n[^ml-bundle]: https://gnusha.org/pi/bitcoindev/2c16b2d0-ac82-4c10-8404-02001bda2658n@googlegroups.com/T/#m33a098d6f38bd6c79f650854f7b40996d8799ede\n[^bip-th]: https://github.com/instagibbs/bips/blob/bf1efa1b675633c79a027ec22f48445ae5bae5b0/bip-templatehash.md\n[^bip-bundle]: https://github.com/instagibbs/bips/blob/bf1efa1b675633c79a027ec22f48445ae5bae5b0/bip-templatehash-csfs-ik.md",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 76,
  "hidden": false,
  "trust_level": 2,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": "Github link was replaced with a permanent link",
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "Since I originally started this thread, I suppose it\u2019d make sense to post an update. \nOver the course of the months since this conversation started, I feel like quite some progress has been made. Both in convincing people of the benefits of a consensus upgrade like this (cfr the number of signers of&hellip;",
  "truncated": true,
  "post_url": "/t/ctv-csfs-can-we-reach-consensus-on-a-first-step-towards-covenants/1509/85",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
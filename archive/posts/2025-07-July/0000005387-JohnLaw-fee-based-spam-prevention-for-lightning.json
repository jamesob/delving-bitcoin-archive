{
  "id": 5387,
  "name": null,
  "username": "JohnLaw",
  "avatar_template": "/letter_avatar_proxy/v4/letter/j/58956e/{size}.png",
  "created_at": "2025-07-01T22:03:02.578Z",
  "cooked": "<p>Hi Clara,</p>\n<p>Even if we assume that a router typically routes 10k sat payments, that most HTLCs resolve in 2 minutes, and the router typically charges 1 sat per payment, we can\u2019t just use those numbers to determine that the router\u2019s cost of capital is 1 sat/10k sats per 2 minutes = 10^(-4) per 2 minutes = 3 * 10^(-3) per hour.</p>\n<p>First, there are costs and risks that the router\u2019s 1 sat fee has to cover, including:</p>\n<ul>\n<li>expected cost of on-chain fees to resolve the payment,</li>\n<li>risk of losing the payment\u2019s funds due to a crash or failure,</li>\n<li>computation costs, and</li>\n<li>communication costs.</li>\n</ul>\n<p>These costs and risks are paid for with the Upfront Fee and Success Fee.</p>\n<p>In addition, utilization of the router\u2019s capital isn\u2019t 100%, so we cant\u2019 just assume that a 2-week delay prevents the router from routing 10k other payments.</p>\n<p>In fact, your cost of capital assumption is that 10k sats of capital returns 10k sats of profit every 2 weeks, thus doubling capital 26 times per year, resulting in a factor of 64 million annual return on capital. I don\u2019t believe that is a realistic risk-free rate of return.</p>\n<p>In my example, I assumed a cost of capital of 2 * 10^(-5)/hour, which corresponds to a 19% compounded annual rate of return.  This sounds more realistic to me.</p>\n<p>Finally, I should note that the Hold fee actually has to pay for the cost of capital for all of the capital that is being held. As a result, the 10th downstream node has to stake an amount that covers the maximum cost of capital for all 10 upstream nodes, thus increasing the amount staked by a factor of 10 at that node. All of this is included in my example.</p>\n<p>Please let me know if any of this doesn\u2019t make sense or isn\u2019t clear.</p>",
  "post_number": 14,
  "post_type": 1,
  "posts_count": 19,
  "updated_at": "2025-07-01T22:03:02.578Z",
  "reply_count": 1,
  "reply_to_post_number": 13,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 26,
  "readers_count": 25,
  "score": 10.2,
  "yours": false,
  "topic_id": 1524,
  "topic_slug": "fee-based-spam-prevention-for-lightning",
  "topic_title": "Fee-Based Spam Prevention For Lightning",
  "topic_html_title": "Fee-Based Spam Prevention For Lightning",
  "category_id": 7,
  "display_username": null,
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "badges_granted": [],
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "reply_to_user": {
    "id": 310,
    "username": "ClaraShk",
    "name": "",
    "avatar_template": "/user_avatar/delvingbitcoin.org/clarashk/{size}/370_2.png"
  },
  "bookmarked": false,
  "raw": "Hi Clara,\n\nEven if we assume that a router typically routes 10k sat payments, that most HTLCs resolve in 2 minutes, and the router typically charges 1 sat per payment, we can't just use those numbers to determine that the router's cost of capital is 1 sat/10k sats per 2 minutes = 10^(-4) per 2 minutes = 3 * 10^(-3) per hour.\n\nFirst, there are costs and risks that the router's 1 sat fee has to cover, including:  \n* expected cost of on-chain fees to resolve the payment,  \n* risk of losing the payment's funds due to a crash or failure,  \n* computation costs, and  \n* communication costs.\n\nThese costs and risks are paid for with the Upfront Fee and Success Fee. \n\nIn addition, utilization of the router's capital isn't 100%, so we cant' just assume that a 2-week delay prevents the router from routing 10k other payments.\n\nIn fact, your cost of capital assumption is that 10k sats of capital returns 10k sats of profit every 2 weeks, thus doubling capital 26 times per year, resulting in a factor of 64 million annual return on capital. I don't believe that is a realistic risk-free rate of return.\n\nIn my example, I assumed a cost of capital of 2 * 10^(-5)/hour, which corresponds to a 19% compounded annual rate of return.  This sounds more realistic to me.\n\nFinally, I should note that the Hold fee actually has to pay for the cost of capital for all of the capital that is being held. As a result, the 10th downstream node has to stake an amount that covers the maximum cost of capital for all 10 upstream nodes, thus increasing the amount staked by a factor of 10 at that node. All of this is included in my example.\n\nPlease let me know if any of this doesn't make sense or isn't clear.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 279,
  "hidden": false,
  "trust_level": 1,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "excerpt": "Hi Clara, \nEven if we assume that a router typically routes 10k sat payments, that most HTLCs resolve in 2 minutes, and the router typically charges 1 sat per payment, we can\u2019t just use those numbers to determine that the router\u2019s cost of capital is 1 sat/10k sats per 2 minutes = 10^(-4) per 2 minut&hellip;",
  "truncated": true,
  "post_url": "/t/fee-based-spam-prevention-for-lightning/1524/14",
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false,
  "can_accept_answer": false,
  "can_unaccept_answer": false,
  "accepted_answer": false,
  "topic_accepted_answer": null
}
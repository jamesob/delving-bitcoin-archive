{
  "id": 293,
  "name": "Steven Roose",
  "username": "stevenroose",
  "avatar_template": "/letter_avatar_proxy/v4/letter/s/8edcca/{size}.png",
  "created_at": "2023-10-06T17:21:23.305Z",
  "cooked": "<p>I added a reference implementation to the BIP and also added an example implementation of a caching strategy in rust-bitcoin:</p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/stevenroose/rust-bitcoin/blob/c54a09cb2dd334d6cdeec23dda55c6b6e7154d03/bitcoin/src/blockdata/script/txhash.rs\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/stevenroose/rust-bitcoin/blob/c54a09cb2dd334d6cdeec23dda55c6b6e7154d03/bitcoin/src/blockdata/script/txhash.rs\" target=\"_blank\" rel=\"noopener nofollow ugc\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/stevenroose/rust-bitcoin/blob/c54a09cb2dd334d6cdeec23dda55c6b6e7154d03/bitcoin/src/blockdata/script/txhash.rs\" target=\"_blank\" rel=\"noopener nofollow ugc\">stevenroose/rust-bitcoin/blob/c54a09cb2dd334d6cdeec23dda55c6b6e7154d03/bitcoin/src/blockdata/script/txhash.rs</a></h4>\n\n\n      <pre><code class=\"lang-rs\">\n#![allow(missing_docs)]\n\nuse std::borrow::Borrow;\n\nuse crate::{Transaction, TxOut};\nuse crate::consensus::encode::Encodable;\nuse crate::hashes::{sha256, Hash, HashEngine};\n\npub const TXFS_VERSION: u8 = 1 &lt;&lt; 0;\npub const TXFS_LOCKTIME: u8 = 1 &lt;&lt; 1;\npub const TXFS_NB_INPUTS: u8 = 1 &lt;&lt; 2;\npub const TXFS_NB_OUTPUTS: u8 = 1 &lt;&lt; 3;\npub const TXFS_CURRENT_INPUT_IDX: u8 = 1 &lt;&lt; 4;\npub const TXFS_CURRENT_INPUT_CONTROL_BLOCK: u8 = 1 &lt;&lt; 5;\npub const TXFS_INPUTS: u8 = 1 &lt;&lt; 6;\npub const TXFS_OUTPUTS: u8 = 1 &lt;&lt; 7;\n\npub const TXFS_ALL: u8 = TXFS_VERSION\n    | TXFS_LOCKTIME\n</code></pre>\n\n\n\n  This file has been truncated. <a href=\"https://github.com/stevenroose/rust-bitcoin/blob/c54a09cb2dd334d6cdeec23dda55c6b6e7154d03/bitcoin/src/blockdata/script/txhash.rs\" target=\"_blank\" rel=\"noopener nofollow ugc\">show original</a>\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>All large fields are cached individually and there are caches for the leading caches at intervals and caches for \u201call\u201d. So, like you said, this means that after every large piece of information in the tx has been hashed once, the number of hashed bytes per invocation of TXHASH has clear bounds.</p>",
  "post_number": 7,
  "post_type": 1,
  "updated_at": "2023-10-06T17:26:25.112Z",
  "reply_count": 0,
  "reply_to_post_number": 6,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 1,
  "readers_count": 0,
  "score": 0.2,
  "yours": false,
  "topic_id": 121,
  "topic_slug": "draft-bip-for-op-txhash-and-op-checktxhashverify",
  "topic_title": "Draft BIP for OP_TXHASH and OP_CHECKTXHASHVERIFY",
  "topic_html_title": "Draft BIP for OP_TXHASH and OP_CHECKTXHASHVERIFY",
  "category_id": 7,
  "display_username": "Steven Roose",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 2,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "reply_to_user": {
    "username": "ajtowns",
    "name": "Anthony Towns",
    "avatar_template": "/user_avatar/delvingbitcoin.org/ajtowns/{size}/3_2.png"
  },
  "bookmarked": false,
  "raw": "I added a reference implementation to the BIP and also added an example implementation of a caching strategy in rust-bitcoin:\n\nhttps://github.com/stevenroose/rust-bitcoin/blob/c54a09cb2dd334d6cdeec23dda55c6b6e7154d03/bitcoin/src/blockdata/script/txhash.rs\n\nAll large fields are cached individually and there are caches for the leading caches at intervals and caches for \"all\". So, like you said, this means that after every large piece of information in the tx has been hashed once, the number of hashed bytes per invocation of TXHASH has clear bounds.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 76,
  "hidden": false,
  "trust_level": 1,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": "Github link was replaced with a permanent link",
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
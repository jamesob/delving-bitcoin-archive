{
  "id": 244,
  "name": "Steven Roose",
  "username": "stevenroose",
  "avatar_template": "/letter_avatar_proxy/v4/letter/s/8edcca/{size}.png",
  "created_at": "2023-10-02T00:09:48.459Z",
  "cooked": "<p>Since I just discovered this forum and some interesting conversations are going on here. I definitely saw James\u2019 proposal <a href=\"https://delvingbitcoin.org/t/covenant-tools-softfork/98/5\">here</a>, not trying to undermine that, just trying to give an alternative perspective.</p>\n<p>I\u2019ve been thinking about this idea, which I dub \u201ccovenant all the things\u201d, which I guess could go a few ways. The idea is to not focus on specific use-cases (APO, VAULT), but provide more general tools that</p>\n<p>A very minimal version would be a combination of</p>\n<ul>\n<li>OP_TXHASH\n<ul>\n<li>and OP_CHECKTXHASHVERIFY for templating</li>\n</ul>\n</li>\n<li>OP_CHECKSIGFROMSTACK\n<ul>\n<li>together with TXHASH this is very powerful</li>\n<li>easily emulates APO to build eltoo-style protocols</li>\n</ul>\n</li>\n</ul>\n<p>These two are already very powerful together. It basically introduces a \u201csighash on steroids\u201d that allows signing off on anything you want. Plus a very flexible templating mechanism that supports bring-your-own-fee constructions.</p>\n<p>So, on top of that, to allow real introspection, there are some possibilities:</p>\n<ul>\n<li>\n<p>the full version would be</p>\n<ul>\n<li>OP_CAT\n<ul>\n<li>who doesn\u2019t like CATs?</li>\n</ul>\n</li>\n<li>OP_TX\n<ul>\n<li>for full introspection, this works quite well with OP_TXHASH\u2019s TxFieldSelector</li>\n</ul>\n</li>\n<li>OP_TWEAKADD\n<ul>\n<li>for doing taproot stuff</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>a lesser version</p>\n<ul>\n<li>OP_HASHMULTI (aka OP_CATSHA256) or something</li>\n<li>OP_TWEAKADD (this seems kinda needed in any case)</li>\n</ul>\n</li>\n</ul>\n<p>One of the nice properties of all of this is that almost all of these opcodes already have production implementations in Elements (Liquid), except for the OP_TXHASH and OP_TX which are closely related. I formalized a potential OP_TXHASH BIP <a href=\"https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-September/021975.html\" rel=\"noopener nofollow ugc\">here</a>, and OP_TX could be implemented by re-using the TxFieldSelector specified in that BIP.</p>",
  "post_number": 1,
  "post_type": 1,
  "updated_at": "2023-10-02T00:12:58.008Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 0,
  "incoming_link_count": 0,
  "reads": 1,
  "readers_count": 0,
  "score": 0.2,
  "yours": false,
  "topic_id": 125,
  "topic_slug": "catt-thoughts-about-an-alternative-covenant-softfork-proposal",
  "topic_title": "CATT: thoughts about an alternative covenant softfork proposal",
  "topic_html_title": "CATT: thoughts about an alternative covenant softfork proposal",
  "category_id": 7,
  "display_username": "Steven Roose",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 2,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "Since I just discovered this forum and some interesting conversations are going on here. I definitely saw James' proposal [here](https://delvingbitcoin.org/t/covenant-tools-softfork/98/5), not trying to undermine that, just trying to give an alternative perspective.\n\nI've been thinking about this idea, which I dub \"covenant all the things\", which I guess could go a few ways. The idea is to not focus on specific use-cases (APO, VAULT), but provide more general tools that \n\nA very minimal version would be a combination of \n\n- OP_TXHASH\n  - and OP_CHECKTXHASHVERIFY for templating\n- OP_CHECKSIGFROMSTACK\n  - together with TXHASH this is very powerful\n  - easily emulates APO to build eltoo-style protocols\n\nThese two are already very powerful together. It basically introduces a \"sighash on steroids\" that allows signing off on anything you want. Plus a very flexible templating mechanism that supports bring-your-own-fee constructions.\n\nSo, on top of that, to allow real introspection, there are some possibilities:\n\n- the full version would be\n  - OP_CAT\n    - who doesn't like CATs?\n  - OP_TX\n    - for full introspection, this works quite well with OP_TXHASH's TxFieldSelector\n  - OP_TWEAKADD\n    - for doing taproot stuff\n\n- a lesser version\n  - OP_HASHMULTI (aka OP_CATSHA256) or something\n  - OP_TWEAKADD (this seems kinda needed in any case)\n\nOne of the nice properties of all of this is that almost all of these opcodes already have production implementations in Elements (Liquid), except for the OP_TXHASH and OP_TX which are closely related. I formalized a potential OP_TXHASH BIP [here](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2023-September/021975.html), and OP_TX could be implemented by re-using the TxFieldSelector specified in that BIP.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 76,
  "hidden": false,
  "trust_level": 0,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
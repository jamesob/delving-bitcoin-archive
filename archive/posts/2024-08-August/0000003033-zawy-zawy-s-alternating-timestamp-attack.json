{
  "id": 3033,
  "name": "Zawy",
  "username": "zawy",
  "avatar_template": "/user_avatar/delvingbitcoin.org/zawy/{size}/750_2.png",
  "created_at": "2024-08-21T19:03:50.077Z",
  "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"sjors\" data-post=\"22\" data-topic=\"1062\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/sjors/48/59_2.png\" class=\"avatar\"> sjors:</div>\n<blockquote>\n<aside class=\"quote no-group\" data-username=\"zawy\" data-post=\"5\" data-topic=\"1062\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/zawy/48/750_2.png\" class=\"avatar\"> zawy:</div>\n<blockquote>\n<ol>\n<li>monotonic, +/- 10 sec \u201carrival\u201d rule,</li>\n</ol>\n</blockquote>\n</aside>\n<p>I suspect that would cause a mess. It could potentially introduce new attack vectors by messing with (node connections to) NTP servers. The current two hour margin is so wide you could set your computer clock with a sundial.</p>\n<p>Block propagation throughout the whole network is probably in the order of seconds, but sometimes it seems take half minute:</p>\n</blockquote>\n</aside>\n<p>Miners aren\u2019t supposed to agree on a source of time like NTP. The current FTL could be used in an attack if they did (for example to split the network hashrate).</p>\n<p>I get 380 ms as a delay that\u2019s between the median and mean of the propagation delay.  I used the data from <a href=\"https://sites.cs.ucsb.edu/~rich/class/cs293b-cloud/papers/bitcoin-delay\" rel=\"noopener nofollow ugc\">this paper</a> to see the exponential CDF might serve as the estimate from the orphan rate.   <a href=\"https://forkmonitor.info/feeds/stale_candidates/btc.rss\" rel=\"noopener nofollow ugc\">This page</a> shows about 1 orphan per 1575 blocks in the past year.</p>\n<p>orphan rate = 1/1575 =~ 1-e^(-delay/600)</p>\n<p>delay = - 600 * ln(1 - 1/1575)</p>\n<p>Detecting selfish mining: If there\u2019s a &gt; 33% miner doing a minor selfish mining attack by withholding his found blocks for 1 or 2 seconds, it artificially increases the orphan rate which increases the estimate of the delays. You would have to know the propagation delay from some other method to see if it agrees with the orphan rate to detect the presence of a selfish miner. My +/- 10 s rule wouldn\u2019t help if they\u2019re holding blocks only 1 or 2 seconds.  Another rule to help stop an attacker who\u2019s causing tip races is for miners to choose the tip who\u2019s arrival time is the closest to the timestamp, and change tips if he discovers the majority hashrate chose the other tip.</p>\n<p>The newsletter mentioned monotonic timestamps might cause a problem if a timestamp targets the FTL. That would require finding a block less than 1 second after the \u201cFTL block\u201d and would be ignored for less than 1 second so I\u2019m not sure what they have in mind. Does a block beyond the FTL have a penalty box where miners don\u2019t work on it for some period of time?</p>",
  "post_number": 25,
  "post_type": 1,
  "updated_at": "2024-08-21T19:03:50.077Z",
  "reply_count": 1,
  "reply_to_post_number": null,
  "quote_count": 2,
  "incoming_link_count": 0,
  "reads": 5,
  "readers_count": 4,
  "score": 5.8,
  "yours": false,
  "topic_id": 1062,
  "topic_slug": "zawy-s-alternating-timestamp-attack",
  "topic_title": "Zawy\u2019s Alternating Timestamp Attack",
  "topic_html_title": "Zawy\u2019s Alternating Timestamp Attack",
  "category_id": 7,
  "display_username": "Zawy",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 1,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": null,
  "bookmarked": false,
  "raw": "[quote=\"sjors, post:22, topic:1062\"]\n[quote=\"zawy, post:5, topic:1062\"]\n1. monotonic, +/- 10 sec \u201carrival\u201d rule,\n[/quote]\n\nI suspect that would cause a mess. It could potentially introduce new attack vectors by messing with (node connections to) NTP servers. The current two hour margin is so wide you could set your computer clock with a sundial.\n\nBlock propagation throughout the whole network is probably in the order of seconds, but sometimes it seems take half minute:\n[/quote]\nMiners aren't supposed to agree on a source of time like NTP. The current FTL could be used in an attack if they did (for example to split the network hashrate).\n\nI get 380 ms as a delay that's between the median and mean of the propagation delay.  I used the data from [this paper](https://sites.cs.ucsb.edu/~rich/class/cs293b-cloud/papers/bitcoin-delay) to see the exponential CDF might serve as the estimate from the orphan rate.   [This page](https://forkmonitor.info/feeds/stale_candidates/btc.rss) shows about 1 orphan per 1575 blocks in the past year.\n\norphan rate = 1/1575 =~ 1-e^(-delay/600) \n\ndelay = - 600 * ln(1 - 1/1575)\n\nDetecting selfish mining: If there's a > 33% miner doing a minor selfish mining attack by withholding his found blocks for 1 or 2 seconds, it artificially increases the orphan rate which increases the estimate of the delays. You would have to know the propagation delay from some other method to see if it agrees with the orphan rate to detect the presence of a selfish miner. My +/- 10 s rule wouldn't help if they're holding blocks only 1 or 2 seconds.  Another rule to help stop an attacker who's causing tip races is for miners to choose the tip who's arrival time is the closest to the timestamp, and change tips if he discovers the majority hashrate chose the other tip. \n\nThe newsletter mentioned monotonic timestamps might cause a problem if a timestamp targets the FTL. That would require finding a block less than 1 second after the \"FTL block\" and would be ignored for less than 1 second so I'm not sure what they have in mind. Does a block beyond the FTL have a penalty box where miners don't work on it for some period of time?",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 502,
  "hidden": false,
  "trust_level": 1,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}
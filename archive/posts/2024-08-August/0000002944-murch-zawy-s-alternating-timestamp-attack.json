{
  "id": 2944,
  "name": "Murch",
  "username": "murch",
  "avatar_template": "/user_avatar/delvingbitcoin.org/murch/{size}/139_2.png",
  "created_at": "2024-08-12T15:26:36.513Z",
  "cooked": "<aside class=\"quote no-group\" data-username=\"zawy\" data-post=\"2\" data-topic=\"1062\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/zawy/48/750_2.png\" class=\"avatar\"> zawy:</div>\n<blockquote>\n<p>difficulty would drop to match his hashrate</p>\n</blockquote>\n</aside>\n<p>Right, I forgot to account for the difficulty drop for the honest miners as well.</p>\n<aside class=\"quote no-group\" data-username=\"zawy\" data-post=\"2\" data-topic=\"1062\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/zawy/48/750_2.png\" class=\"avatar\"> zawy:</div>\n<blockquote>\n<p>the 2nd best option in my mind is doing a past-time limit on every block, not just the 2016 transition. This would be slightly simpler code and \u201cmore attractive\u201d logic. If it\u2019s good and safe for the 2016 transition then its better to do it on all blocks. It would prevent the need to restrict nActualtimespan and removes the main reason MTP exists.</p>\n</blockquote>\n</aside>\n<p>I don\u2019t see how this would remove the need for MTP. As far as I can tell, the MTP requirement leads to a stronger monotonicity than requiring that every block cannot be more than 2h in the past from its predecessor. If an attacker can move the date back by two hours with each block, they can achieve a negative elapsed time of 24 weeks in a single difficulty period, then they can bring back the timestamp to the actual time while reducing the difficulty maximally for at least three subsequent difficulty periods.</p>\n<aside class=\"quote no-group\" data-username=\"zawy\" data-post=\"2\" data-topic=\"1062\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://delvingbitcoin.org/user_avatar/delvingbitcoin.org/zawy/48/750_2.png\" class=\"avatar\"> zawy:</div>\n<blockquote>\n<p>In fact, there\u2019s a benefit if the past time limit is applied to every block: the future time limit can be removed.</p>\n</blockquote>\n</aside>\n<p>I also don\u2019t see why the rule against moving time back would allow for the future limit on timestamps to be removed. If nodes would not enforce the future limit, an attacker could increase the timestamp by an average of 40 minutes with each block and reduce the difficulty by a factor 4 every difficulty period without doing anything else than pushing the chaintip off into the future.</p>\n<p>It seems to me that requiring blocks to be monotonic could be a pain if a miner ever put future timestamps on blocks, and I don\u2019t think I follow how you got to the conclusions about it being easier or better to make a bunch of sweeping consensus rule changes. If anything, the consensus changes should be as small as possible, and just requiring that in a difficulty period the first block has a lower timestamp than the last block seems to mitigate the attack you discovered and is a much smaller change. It\u2019s not clear to me what benefit you see in introducing a 2h-past limit for the other blocks, or trying to impose monotonicity on all blocks. Clearly, only the timestamps of the first and the last block in each difficulty period matter for the difficulty rule.</p>",
  "post_number": 6,
  "post_type": 1,
  "updated_at": "2024-08-12T15:36:23.588Z",
  "reply_count": 0,
  "reply_to_post_number": null,
  "quote_count": 1,
  "incoming_link_count": 0,
  "reads": 15,
  "readers_count": 14,
  "score": 3.0,
  "yours": false,
  "topic_id": 1062,
  "topic_slug": "zawy-s-alternating-timestamp-attack",
  "topic_title": "Zawy\u2019s Alternating Timestamp Attack",
  "topic_html_title": "Zawy\u2019s Alternating Timestamp Attack",
  "category_id": 7,
  "display_username": "Murch",
  "primary_group_name": null,
  "flair_name": null,
  "flair_url": null,
  "flair_bg_color": null,
  "flair_color": null,
  "flair_group_id": null,
  "version": 2,
  "can_edit": false,
  "can_delete": false,
  "can_recover": false,
  "can_see_hidden_post": false,
  "can_wiki": false,
  "user_title": "",
  "bookmarked": false,
  "raw": "[quote=\"zawy, post:2, topic:1062\"]\ndifficulty would drop to match his hashrate\n[/quote]\n\nRight, I forgot to account for the difficulty drop for the honest miners as well.\n\n[quote=\"zawy, post:2, topic:1062\"]\nthe 2nd best option in my mind is doing a past-time limit on every block, not just the 2016 transition. This would be slightly simpler code and \u201cmore attractive\u201d logic. If it\u2019s good and safe for the 2016 transition then its better to do it on all blocks. It would prevent the need to restrict nActualtimespan and removes the main reason MTP exists.\n[/quote]\n\nI don\u2019t see how this would remove the need for MTP. As far as I can tell, the MTP requirement leads to a stronger monotonicity than requiring that every block cannot be more than 2h in the past from its predecessor. If an attacker can move the date back by two hours with each block, they can achieve a negative elapsed time of 24 weeks in a single difficulty period, then they can bring back the timestamp to the actual time while reducing the difficulty maximally for at least three subsequent difficulty periods.\n\n[quote=\"zawy, post:2, topic:1062\"]\nIn fact, there\u2019s a benefit if the past time limit is applied to every block: the future time limit can be removed.\n[/quote]\n\nI also don\u2019t see why the rule against moving time back would allow for the future limit on timestamps to be removed. If nodes would not enforce the future limit, an attacker could increase the timestamp by an average of 40 minutes with each block and reduce the difficulty by a factor 4 every difficulty period without doing anything else than pushing the chaintip off into the future.\n\nIt seems to me that requiring blocks to be monotonic could be a pain if a miner ever put future timestamps on blocks, and I don\u2019t think I follow how you got to the conclusions about it being easier or better to make a bunch of sweeping consensus rule changes. If anything, the consensus changes should be as small as possible, and just requiring that in a difficulty period the first block has a lower timestamp than the last block seems to mitigate the attack you discovered and is a much smaller change. It\u2019s not clear to me what benefit you see in introducing a 2h-past limit for the other blocks, or trying to impose monotonicity on all blocks. Clearly, only the timestamps of the first and the last block in each difficulty period matter for the difficulty rule.",
  "actions_summary": [],
  "moderator": false,
  "admin": false,
  "staff": false,
  "user_id": 58,
  "hidden": false,
  "trust_level": 3,
  "deleted_at": null,
  "user_deleted": false,
  "edit_reason": null,
  "can_view_edit_history": true,
  "wiki": false,
  "reactions": [],
  "current_user_reaction": null,
  "reaction_users_count": 0,
  "current_user_used_main_reaction": false
}